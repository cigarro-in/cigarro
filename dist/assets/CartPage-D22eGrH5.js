import{r as e,j as s}from"./ui-DmSYmwlh.js";import{c as t,a,b as i,u as r,H as c,o as l,p as n,q as o,B as d,P as m,A as x,S as h,t as p}from"./index-sG1ZoleV.js";import{A as j}from"./arrow-left-BDiTJN5X.js";import{S as u}from"./shopping-cart-D8ThiKve.js";import{P as y}from"./plus-Bq58mKy_.js";import{T as g}from"./trash-2-qJ8T_unO.js";import"./vendor-CTYTkcnE.js";import"./supabase-CLG-Fze1.js";
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=t("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),v=e=>e.toLocaleString("en-IN"),b=({item:t,updateQuantity:a,removeFromCart:i,isLoading:r})=>{const[c,o]=e.useState(!1),[d,m]=e.useState(!1),x=async e=>{if(!(e<1)){m(!0);try{await a(t.id,e)}catch(s){p.error("Failed to update quantity")}finally{m(!1)}}};return s.jsx(l.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"relative w-20 h-20 sm:w-24 sm:h-24 bg-creme-light rounded-lg overflow-hidden flex-shrink-0",children:s.jsx("img",{src:c?"/images/inspiration/product-placeholder.webp":t.gallery_images?.[0]||"/images/inspiration/product-placeholder.webp",alt:t.name,onError:()=>o(!0),className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(n,{to:`/product/${t.slug}`,children:s.jsx("h3",{className:"text-lg font-semibold text-dark hover:text-canyon transition-colors duration-200 line-clamp-2",children:t.name})}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.brand}),s.jsxs("p",{className:"text-xl font-bold text-dark mt-2",children:["₹",v(t.price)]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 bg-creme-light rounded-lg p-1",children:[s.jsx("button",{onClick:()=>x(t.quantity-1),disabled:d||r||t.quantity<=1,className:"w-8 h-8 rounded-md bg-white text-dark hover:bg-canyon hover:text-white transition-colors duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(N,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-12 text-center font-medium text-dark",children:t.quantity}),s.jsx("button",{onClick:()=>x(t.quantity+1),disabled:d||r,className:"w-8 h-8 rounded-md bg-white text-dark hover:bg-canyon hover:text-white transition-colors duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(y,{className:"w-4 h-4"})})]}),s.jsx("button",{onClick:async()=>{try{await i(t.id),p.success("Item removed from cart")}catch(e){p.error("Failed to remove item")}},disabled:r,className:"text-red-500 hover:text-red-600 transition-colors duration-200 p-2 hover:bg-red-50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Remove from cart",children:s.jsx(g,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal:"}),s.jsxs("span",{className:"text-lg font-semibold text-dark",children:["₹",v(t.price*t.quantity)]})]})})]})})},f=()=>s.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx("div",{className:"w-24 h-24 bg-creme-light rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(h,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h2",{className:"text-2xl font-serif text-dark mb-4",children:"Your Cart is Empty"}),s.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Discover our premium collection and start adding products to your cart."}),s.jsx(n,{to:"/products",children:s.jsxs(d,{className:"bg-dark text-white hover:bg-canyon transition-colors duration-200 px-8 py-3",children:["Start Shopping",s.jsx(j,{className:"w-5 h-5 ml-2 rotate-180"})]})})]})});function w(){const{items:t,totalPrice:h,isLoading:p,updateQuantity:y,removeFromCart:g,totalItems:N}=a(),{user:w}=i(),k=r(),[C,S]=e.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs(c,{children:[s.jsx("title",{children:`My Cart (${N}) - Cigarro`}),s.jsx("meta",{name:"description",content:"Review your items before checkout"})]}),s.jsxs("div",{className:"min-h-screen bg-creme",children:[s.jsx("div",{className:"main-container",children:s.jsxs("div",{className:"py-16",children:[s.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[s.jsxs("h1",{className:"main-title text-dark mb-4",children:["Shopping Cart",N>0&&s.jsxs("span",{className:"text-canyon",children:[" (",N," ",1===N?"item":"items",")"]})]}),s.jsx("div",{className:"w-16 h-0.5 bg-canyon mx-auto"})]}),s.jsxs("nav",{className:"flex items-center justify-center space-x-2 text-sm text-dark/60 mb-8",children:[s.jsx(n,{to:"/",className:"hover:text-dark transition-colors",children:"Home"}),s.jsx("span",{children:"/"}),s.jsx(n,{to:"/products",className:"hover:text-dark transition-colors",children:"Products"}),s.jsx("span",{children:"/"}),s.jsx("span",{children:"Cart"})]})]})}),s.jsx("div",{className:"main-container pb-16",children:0===t.length?s.jsx(f,{}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:s.jsx(o,{mode:"popLayout",children:t.map((e,t)=>s.jsx(b,{item:e,updateQuantity:y,removeFromCart:g,isLoading:p},`${e.id}-${e.variant_id||"base"}-${e.combo_id||"none"}-${t}`))})}),s.jsx("div",{className:"mt-8",children:s.jsx(n,{to:"/products",children:s.jsxs(d,{variant:"outline",className:"border-dark text-dark hover:bg-dark hover:text-white",children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),"Continue Shopping"]})})})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-lg shadow-md p-6 sticky top-8",children:[s.jsxs("h2",{className:"text-xl font-semibold text-dark mb-6 flex items-center",children:[s.jsx(m,{className:"w-5 h-5 mr-2"}),"Order Summary"]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-gray-600",children:["Subtotal (",N," items)"]}),s.jsxs("span",{className:"font-semibold text-dark",children:["₹",v(h)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Shipping"}),s.jsx("span",{className:"text-green-600 font-medium",children:"Free"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Tax"}),s.jsx("span",{className:"text-gray-600",children:"Calculated at checkout"})]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-4 mb-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-dark",children:"Total"}),s.jsxs("span",{className:"text-xl font-bold text-dark",children:["₹",v(h)]})]})}),s.jsxs(d,{className:"w-full bg-dark text-white hover:bg-canyon transition-colors duration-200 py-3 text-lg",disabled:p,onClick:()=>{w?k("/checkout"):S(!0)},children:[s.jsx(u,{className:"w-5 h-5 mr-2"}),p?"Processing...":"Proceed to Checkout"]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsxs("p",{className:"text-xs text-gray-500 flex items-center justify-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Secure checkout"]})})]})})]})})]}),s.jsx(x,{open:C,onOpenChange:S,onAuthSuccess:()=>{S(!1),k("/checkout")},context:"checkout"})]})}export{w as default};
