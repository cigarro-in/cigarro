import{r as e,j as r}from"./ui-DmSYmwlh.js";import{u as s,a,Z as t,s as n,t as o}from"./index-sG1ZoleV.js";import"./vendor-CTYTkcnE.js";import"./supabase-CLG-Fze1.js";function i(){s();const[i,d]=e.useState([]),{addToCart:c,isLoading:l}=a();e.useEffect(()=>{(async()=>{const{data:e,error:r}=await n.from("categories").select("\n          id,\n          name,\n          description,\n          image,\n          products:product_categories!inner(\n            order,\n            products!inner(\n              id,\n              name,\n              brand,\n              price,\n              description,\n              is_active,\n              slug,\n              gallery_images,\n              rating,\n              review_count\n            )\n          )\n        ").order("order",{foreignTable:"products",ascending:!0});if(r)o.error("Failed to load collections."),console.error(r);else{const r=e.map(e=>({...e,products:e.products.map(e=>e.products).filter(e=>e.is_active)}));d(r)}})()},[]);return r.jsx("div",{className:"py-12 bg-background",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"font-serif-premium text-4xl sm:text-5xl text-foreground",children:"Our Collections"}),r.jsx("p",{className:"font-sans-premium text-lg text-muted-foreground mt-4",children:"Explore our curated collections of premium products."})]}),r.jsx("div",{className:"space-y-16",children:i.map(e=>r.jsxs("section",{children:[r.jsx("h2",{className:"font-serif-premium text-3xl text-foreground mb-6",children:e.name}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8",children:e.products.map((e,s)=>r.jsx(t,{product:e,variant:"default",onAddToCart:e=>(async(e,r)=>{e.stopPropagation();try{await c(r),o.success(`${r.name} added to cart`)}catch(s){o.error("Failed to add to cart")}})(null,e),isLoading:l,index:s},e.id))})]},e.id))})]})})}export{i as CollectionsPage};
