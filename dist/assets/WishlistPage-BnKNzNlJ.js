import{r as e,j as s,R as t}from"./ui-DmSYmwlh.js";import{c as a,a as r,_ as i,s as o,t as l,H as n,o as c,B as d,p as m,q as h,a1 as x}from"./index-sG1ZoleV.js";import{G as p,L as g}from"./list-cBP1F4cr.js";import{T as u}from"./trash-2-qJ8T_unO.js";import{A as j}from"./arrow-left-BDiTJN5X.js";import{S as y}from"./shopping-cart-D8ThiKve.js";import"./vendor-CTYTkcnE.js";import"./supabase-CLG-Fze1.js";
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=a("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),w=e=>e.toLocaleString("en-IN"),b=t.forwardRef(({product:t,onRemove:a,onAddToCart:r,isLoading:i,viewMode:o},l)=>{const[n,h]=e.useState(!1),x=e=>{e.preventDefault(),e.stopPropagation(),a(t.id)},p=e=>{e.preventDefault(),e.stopPropagation(),r(t)};return"list"===o?s.jsx(c.div,{ref:l,layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden",children:s.jsxs("div",{className:"flex",children:[s.jsxs("div",{className:"relative w-32 h-32 flex-shrink-0",children:[s.jsx("img",{src:n?"/images/inspiration/product-placeholder.webp":t.gallery_images?.[0]||"/images/inspiration/product-placeholder.webp",alt:t.name,onError:()=>h(!0),className:"w-full h-full object-cover"}),s.jsx("button",{onClick:x,className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors duration-200",children:s.jsx(u,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 p-4 flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx(m,{to:`/product/${t.slug}`,children:s.jsx("h3",{className:"text-lg font-semibold text-dark hover:text-canyon transition-colors duration-200 line-clamp-2",children:t.name})}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.brand}),s.jsxs("p",{className:"text-xl font-bold text-dark mt-2",children:["₹",w(t.price)]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsx(m,{to:`/product/${t.slug}`,className:"text-canyon hover:text-dark transition-colors duration-200 font-medium",children:"View Details"}),s.jsx(d,{onClick:p,disabled:i,className:"bg-dark text-white hover:bg-canyon transition-colors duration-200",children:i?"Adding...":"Add to Cart"})]})]})]})}):s.jsxs(c.div,{ref:l,layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden group",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:n?"/images/inspiration/product-placeholder.webp":t.gallery_images?.[0]||"/images/inspiration/product-placeholder.webp",alt:t.name,onError:()=>h(!0),className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"}),s.jsx("button",{onClick:x,className:"absolute top-3 right-3 w-10 h-10 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors duration-200 opacity-0 group-hover:opacity-100",children:s.jsx(u,{className:"w-5 h-5"})}),s.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/60 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:s.jsxs(d,{onClick:p,disabled:i,className:"w-full bg-white text-dark hover:bg-canyon hover:text-white transition-all duration-200",children:[s.jsx(y,{className:"w-4 h-4 mr-2"}),i?"Adding...":"Add to Cart"]})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx(m,{to:`/product/${t.slug}`,children:s.jsx("h3",{className:"text-lg font-semibold text-dark hover:text-canyon transition-colors duration-200 line-clamp-2 mb-2",children:t.name})}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.brand}),s.jsxs("p",{className:"text-xl font-bold text-dark",children:["₹",w(t.price)]})]})]})});b.displayName="WishlistItem";const f=()=>s.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx("div",{className:"w-24 h-24 bg-creme-light rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(x,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h2",{className:"text-2xl font-serif text-dark mb-4",children:"Your Wishlist is Empty"}),s.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Discover our premium collection and save your favorite products to your wishlist for easy access later."}),s.jsx(m,{to:"/products",children:s.jsxs(d,{className:"bg-dark text-white hover:bg-canyon transition-colors duration-200 px-8 py-3",children:["Explore Products",s.jsx(j,{className:"w-5 h-5 ml-2 rotate-180"})]})})]})});function N(){const[t,a]=e.useState([]),[x,y]=e.useState(!0),[w,N]=e.useState("grid"),{addToCart:k,isLoading:C}=r(),{wishlistItems:E,toggleWishlist:W,clearWishlist:A}=i();e.useEffect(()=>{S()},[E]);const S=async()=>{try{if(y(!0),!E||0===E.length)return a([]),void y(!1);const{data:e,error:s}=await o.from("products").select("id, name, slug, brand, price, description, is_active, gallery_images, rating, review_count, created_at").in("id",E).eq("is_active",!0);s?(console.error("Error fetching wishlist products:",s),l.error("Failed to load wishlist products"),a([])):a(e||[])}catch(e){console.error("Error loading wishlist:",e),a([])}finally{y(!1)}},_=async e=>{try{await W(e)}catch(s){console.error("Error removing from wishlist:",s),l.error("Failed to remove from wishlist")}},L=async e=>{try{await k(e,1),l.success(`${e.name} added to cart!`)}catch(s){l.error("Failed to add to cart")}};return x?s.jsx("div",{className:"min-h-screen bg-creme flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-dark"}),s.jsx("p",{className:"text-dark mt-4 font-sans",children:"Loading your wishlist..."})]})}):s.jsxs(s.Fragment,{children:[s.jsxs(n,{children:[s.jsx("title",{children:"My Wishlist - Cigarro"}),s.jsx("meta",{name:"description",content:"Your saved favorite products from our premium collection."})]}),s.jsxs("div",{className:"min-h-screen bg-creme",children:[s.jsx("div",{className:"main-container",children:s.jsxs("div",{className:"py-16",children:[s.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"main-title text-dark mb-4",children:"My Wishlist"}),s.jsx("p",{className:"text-dark/80 font-sans text-lg",children:t.length>0?`${t.length} ${1===t.length?"item":"items"} saved`:"No items saved yet"})]}),t.length>0&&s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>N("grid"),className:"p-2 rounded "+("grid"===w?"bg-dark text-white":"bg-white text-dark border border-coyote"),children:s.jsx(p,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>N("list"),className:"p-2 rounded "+("list"===w?"bg-dark text-white":"bg-white text-dark border border-coyote"),children:s.jsx(g,{className:"w-5 h-5"})})]}),s.jsxs(d,{onClick:()=>{navigator.share?navigator.share({title:"My Wishlist - Cigarro",text:"Check out my wishlist on Cigarro",url:window.location.href}):(navigator.clipboard.writeText(window.location.href),l.success("Wishlist link copied to clipboard"))},variant:"outline",className:"border-dark text-dark hover:bg-dark hover:text-white",children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),"Share"]}),s.jsxs(d,{onClick:async()=>{try{await A()}catch(e){console.error("Error clearing wishlist:",e),l.error("Failed to clear wishlist")}},variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white",children:[s.jsx(u,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]}),s.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-dark/60 mb-8",children:[s.jsx(m,{to:"/",className:"hover:text-dark transition-colors",children:"Home"}),s.jsx("span",{children:"/"}),s.jsx("span",{children:"Wishlist"})]})]})}),s.jsx("div",{className:"main-container pb-16",children:0===t.length?s.jsx(f,{}):s.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"grid"===w?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:s.jsx(h,{mode:"popLayout",children:t.map(e=>s.jsx(b,{product:e,onRemove:_,onAddToCart:L,isLoading:C,viewMode:w},e.id))})})}),t.length>0&&s.jsx("div",{className:"main-container pb-16",children:s.jsx("div",{className:"text-center",children:s.jsx(m,{to:"/products",children:s.jsxs(d,{className:"bg-dark text-white hover:bg-canyon transition-colors duration-200 px-8 py-3",children:["Continue Shopping",s.jsx(j,{className:"w-5 h-5 ml-2 rotate-180"})]})})})})]})]})}export{N as WishlistPage};
