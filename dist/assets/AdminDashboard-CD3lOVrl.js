import{j as e,r,f as t,l as n,d as a,e as i,m as s,k as o,n as l,R as c,o as d,p as u}from"./ui-DmSYmwlh.js";import{c as p,r as m,B as f,X as g,t as x,s as h,b as v,e as b,I as j,w as y,u as N,h as _,x as w,y as C,z as D,D as I,S,P as k,F as E,d as P,U as A,g as O,G as R,J as L,K as B,N as T,O as M,Q as F,R as G,V as U,C as z,E as q,f as V,M as W,W as H}from"./index-sG1ZoleV.js";import{C as $,a as Y,b as J,c as K,S as X}from"./separator-C5Dcbw9Z.js";import{u as Q,C as Z,S as ee,a as re,b as te,c as ne,d as ae,M as ie}from"./select-De3tEF3x.js";import{I as se}from"./ImageWithFallback-D00OHxEV.js";import{a as oe}from"./vendor-CTYTkcnE.js";import{P as le}from"./plus-Bq58mKy_.js";import{T as ce}from"./trash-2-qJ8T_unO.js";import{C as de}from"./circle-x-CnjQXyoU.js";import{T as ue}from"./truck-BHGA4bM_.js";import"./supabase-CLG-Fze1.js";import"./chevron-up-BjPB7NKs.js";
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=p("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),me=p("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),fe=p("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),ge=p("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),xe=p("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),he=p("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),ve=p("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),be=p("square-check-big",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),je=p("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),ye=p("toggle-left",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),Ne=p("toggle-right",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),_e=p("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),we=p("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function Ce({className:r,...t}){return e.jsx("textarea",{"data-slot":"textarea",className:m("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...t})}function De({className:r,...t}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:m("w-full caption-bottom text-sm",r),...t})})}function Ie({className:r,...t}){return e.jsx("thead",{"data-slot":"table-header",className:m("[&_tr]:border-b",r),...t})}function Se({className:r,...t}){return e.jsx("tbody",{"data-slot":"table-body",className:m("[&_tr:last-child]:border-0",r),...t})}function ke({className:r,...t}){return e.jsx("tr",{"data-slot":"table-row",className:m("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),...t})}function Ee({className:r,...t}){return e.jsx("th",{"data-slot":"table-head",className:m("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t})}function Pe({className:r,...t}){return e.jsx("td",{"data-slot":"table-cell",className:m("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t})}var Ae="Checkbox",[Oe]=t(Ae),[Re,Le]=Oe(Ae);function Be(t){const{__scopeCheckbox:n,checked:a,children:s,defaultChecked:o,disabled:l,form:c,name:d,onCheckedChange:u,required:p,value:m="on",internal_do_not_use_render:f}=t,[g,x]=i({prop:a,defaultProp:o??!1,onChange:u,caller:Ae}),[h,v]=r.useState(null),[b,j]=r.useState(null),y=r.useRef(!1),N=!h||(!!c||!!h.closest("form")),_={checked:g,disabled:l,setChecked:x,control:h,setControl:v,name:d,form:c,value:m,hasConsumerStoppedPropagationRef:y,required:p,defaultChecked:!We(o)&&o,isFormControl:N,bubbleInput:b,setBubbleInput:j};return e.jsx(Re,{scope:n,..._,children:Ve(f)?f(_):s})}var Te="CheckboxTrigger",Me=r.forwardRef(({__scopeCheckbox:t,onKeyDown:n,onClick:i,...l},c)=>{const{control:d,value:u,disabled:p,checked:m,required:f,setControl:g,setChecked:x,hasConsumerStoppedPropagationRef:h,isFormControl:v,bubbleInput:b}=Le(Te,t),j=s(c,g),y=r.useRef(m);return r.useEffect(()=>{const e=d?.form;if(e){const r=()=>x(y.current);return e.addEventListener("reset",r),()=>e.removeEventListener("reset",r)}},[d,x]),e.jsx(a.button,{type:"button",role:"checkbox","aria-checked":We(m)?"mixed":m,"aria-required":f,"data-state":He(m),"data-disabled":p?"":void 0,disabled:p,value:u,...l,ref:j,onKeyDown:o(n,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:o(i,e=>{x(e=>!!We(e)||!e),b&&v&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})})});Me.displayName=Te;var Fe=r.forwardRef((r,t)=>{const{__scopeCheckbox:n,name:a,checked:i,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...p}=r;return e.jsx(Be,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:l,required:o,onCheckedChange:d,name:a,form:u,value:c,internal_do_not_use_render:({isFormControl:r})=>e.jsxs(e.Fragment,{children:[e.jsx(Me,{...p,ref:t,__scopeCheckbox:n}),r&&e.jsx(qe,{__scopeCheckbox:n})]})})});Fe.displayName=Ae;var Ge="CheckboxIndicator",Ue=r.forwardRef((r,t)=>{const{__scopeCheckbox:i,forceMount:s,...o}=r,l=Le(Ge,i);return e.jsx(n,{present:s||We(l.checked)||!0===l.checked,children:e.jsx(a.span,{"data-state":He(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...r.style}})})});Ue.displayName=Ge;var ze="CheckboxBubbleInput",qe=r.forwardRef(({__scopeCheckbox:t,...n},i)=>{const{control:o,hasConsumerStoppedPropagationRef:c,checked:d,defaultChecked:u,required:p,disabled:m,name:f,value:g,form:x,bubbleInput:h,setBubbleInput:v}=Le(ze,t),b=s(i,v),j=Q(d),y=l(o);r.useEffect(()=>{const e=h;if(!e)return;const r=window.HTMLInputElement.prototype,t=Object.getOwnPropertyDescriptor(r,"checked").set,n=!c.current;if(j!==d&&t){const r=new Event("click",{bubbles:n});e.indeterminate=We(d),t.call(e,!We(d)&&d),e.dispatchEvent(r)}},[h,j,d,c]);const N=r.useRef(!We(d)&&d);return e.jsx(a.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??N.current,required:p,disabled:m,name:f,value:g,form:x,...n,tabIndex:-1,ref:b,style:{...n.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function Ve(e){return"function"==typeof e}function We(e){return"indeterminate"===e}function He(e){return We(e)?"indeterminate":e?"checked":"unchecked"}function $e({className:r,...t}){return e.jsx(Fe,{"data-slot":"checkbox",className:m("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:e.jsx(Ue,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Z,{className:"size-3.5"})})})}function Ye({imageUrl:t,onImageUrlChange:n}){const[a,i]=r.useState(!1);return e.jsx("div",{className:"space-y-2",children:t?e.jsxs("div",{className:"relative",children:[e.jsx(se,{src:t,alt:"Uploaded image",className:"w-full max-h-96 object-contain rounded-md"}),e.jsx(f,{variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>n(null),children:e.jsx(g,{className:"w-4 h-4"})})]}):e.jsx("div",{className:"w-full max-h-96 border-2 border-dashed border-border/20 rounded-md flex items-center justify-center",children:e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{if(!e.target.files||0===e.target.files.length)return;const r=e.target.files[0];if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(r.type))return void x.error("Invalid file type. Only JPEG, PNG, and WebP images are allowed.");if(r.size>5242880)return void x.error("File too large. Maximum size is 5MB.");const t=r.name.split(".").pop()?.toLowerCase();if(!t||!["jpg","jpeg","png","webp"].includes(t))return void x.error("Invalid file extension.");const a=`${`${Math.random().toString(36).substring(2)}.${t}`}`;i(!0);const{data:s,error:o}=await h.storage.from("asset_images").upload(a,r);if(o)x.error("Failed to upload image");else{const{data:{publicUrl:e}}=h.storage.from("asset_images").getPublicUrl(a);n(e)}i(!1)},disabled:a,className:"hidden"}),e.jsxs("div",{className:"flex flex-col items-center space-y-2 text-muted-foreground",children:[e.jsx(_e,{className:"w-8 h-8"}),e.jsx("span",{children:a?"Uploading...":"Upload an image"})]})]})})})}function Je(e,r){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Je(e,r)}function Ke(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,Je(e,r)}function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Xe.apply(null,arguments)}function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Ze(e){var r=function(e,r){if("object"!=Qe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r);if("object"!=Qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==Qe(r)?r:r+""}function er(e,r,t){return(r=Ze(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function rr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function tr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?rr(Object(t),!0).forEach(function(r){er(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rr(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function nr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}qe.displayName=ze;var ar="function"==typeof Symbol&&Symbol.observable||"@@observable",ir=function(){return Math.random().toString(36).substring(7).split("").join(".")},sr={INIT:"@@redux/INIT"+ir(),REPLACE:"@@redux/REPLACE"+ir()};function or(e,r,t){var n;if("function"==typeof r&&"function"==typeof t||"function"==typeof t&&"function"==typeof arguments[3])throw new Error(nr(0));if("function"==typeof r&&void 0===t&&(t=r,r=void 0),void 0!==t){if("function"!=typeof t)throw new Error(nr(1));return t(or)(e,r)}if("function"!=typeof e)throw new Error(nr(2));var a=e,i=r,s=[],o=s,l=!1;function c(){o===s&&(o=s.slice())}function d(){if(l)throw new Error(nr(3));return i}function u(e){if("function"!=typeof e)throw new Error(nr(4));if(l)throw new Error(nr(5));var r=!0;return c(),o.push(e),function(){if(r){if(l)throw new Error(nr(6));r=!1,c();var t=o.indexOf(e);o.splice(t,1),s=null}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}(e))throw new Error(nr(7));if(void 0===e.type)throw new Error(nr(8));if(l)throw new Error(nr(9));try{l=!0,i=a(i,e)}finally{l=!1}for(var r=s=o,t=0;t<r.length;t++){(0,r[t])()}return e}return p({type:sr.INIT}),(n={dispatch:p,subscribe:u,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(nr(10));a=e,p({type:sr.REPLACE})}})[ar]=function(){var e,r=u;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(nr(11));function t(){e.next&&e.next(d())}return t(),{unsubscribe:r(t)}}})[ar]=function(){return this},e},n}function lr(e,r){return function(){return r(e.apply(this,arguments))}}function cr(e,r){if("function"==typeof e)return lr(e,r);if("object"!=typeof e||null===e)throw new Error(nr(16));var t={};for(var n in e){var a=e[n];"function"==typeof a&&(t[n]=lr(a,r))}return t}function dr(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return 0===r.length?function(e){return e}:1===r.length?r[0]:r.reduce(function(e,r){return function(){return e(r.apply(void 0,arguments))}})}var ur=c.createContext(null);var pr=function(e){e()},mr=function(){return pr};var fr={notify:function(){},get:function(){return[]}};function gr(e,r){var t,n=fr;function a(){s.onStateChange&&s.onStateChange()}function i(){t||(t=r?r.addNestedSub(a):e.subscribe(a),n=function(){var e=mr(),r=null,t=null;return{clear:function(){r=null,t=null},notify:function(){e(function(){for(var e=r;e;)e.callback(),e=e.next})},get:function(){for(var e=[],t=r;t;)e.push(t),t=t.next;return e},subscribe:function(e){var n=!0,a=t={callback:e,next:null,prev:t};return a.prev?a.prev.next=a:r=a,function(){n&&null!==r&&(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:r=a.next)}}}}())}var s={addNestedSub:function(e){return i(),n.subscribe(e)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:a,isSubscribed:function(){return Boolean(t)},trySubscribe:i,tryUnsubscribe:function(){t&&(t(),t=void 0,n.clear(),n=fr)},getListeners:function(){return n}};return s}var xr="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;function hr(e){var t=e.store,n=e.context,a=e.children,i=r.useMemo(function(){var e=gr(t);return{store:t,subscription:e}},[t]),s=r.useMemo(function(){return t.getState()},[t]);xr(function(){var e=i.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[i,s]);var o=n||ur;return c.createElement(o.Provider,{value:i},a)}function vr(e,r){if(null==e)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==r.indexOf(n))continue;t[n]=e[n]}return t}var br,jr,yr,Nr,_r={exports:{}},wr={};function Cr(){return jr||(jr=1,_r.exports=function(){if(br)return wr;br=1;var e="function"==typeof Symbol&&Symbol.for,r=e?Symbol.for("react.element"):60103,t=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,u=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,f=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,x=e?Symbol.for("react.fundamental"):60117,h=e?Symbol.for("react.responder"):60118,v=e?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var p=e.$$typeof;switch(p){case r:switch(e=e.type){case l:case c:case n:case i:case a:case u:return e;default:switch(e=e&&e.$$typeof){case o:case d:case f:case m:case s:return e;default:return p}}case t:return p}}}function j(e){return b(e)===c}return wr.AsyncMode=l,wr.ConcurrentMode=c,wr.ContextConsumer=o,wr.ContextProvider=s,wr.Element=r,wr.ForwardRef=d,wr.Fragment=n,wr.Lazy=f,wr.Memo=m,wr.Portal=t,wr.Profiler=i,wr.StrictMode=a,wr.Suspense=u,wr.isAsyncMode=function(e){return j(e)||b(e)===l},wr.isConcurrentMode=j,wr.isContextConsumer=function(e){return b(e)===o},wr.isContextProvider=function(e){return b(e)===s},wr.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},wr.isForwardRef=function(e){return b(e)===d},wr.isFragment=function(e){return b(e)===n},wr.isLazy=function(e){return b(e)===f},wr.isMemo=function(e){return b(e)===m},wr.isPortal=function(e){return b(e)===t},wr.isProfiler=function(e){return b(e)===i},wr.isStrictMode=function(e){return b(e)===a},wr.isSuspense=function(e){return b(e)===u},wr.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===c||e===i||e===a||e===u||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===m||e.$$typeof===s||e.$$typeof===o||e.$$typeof===d||e.$$typeof===x||e.$$typeof===h||e.$$typeof===v||e.$$typeof===g)},wr.typeOf=b,wr}()),_r.exports}var Dr=function(){if(Nr)return yr;Nr=1;var e=Cr(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function i(t){return e.isMemo(t)?n:a[t.$$typeof]||r}a[e.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[e.Memo]=n;var s=Object.defineProperty,o=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,u=Object.prototype;return yr=function e(r,n,a){if("string"!=typeof n){if(u){var p=d(n);p&&p!==u&&e(r,p,a)}var m=o(n);l&&(m=m.concat(l(n)));for(var f=i(r),g=i(n),x=0;x<m.length;++x){var h=m[x];if(!(t[h]||a&&a[h]||g&&g[h]||f&&f[h])){var v=c(n,h);try{s(r,h,v)}catch(b){}}}}return r}}();const Ir=oe(Dr);var Sr,kr,Er={exports:{}},Pr={};var Ar=(kr||(kr=1,Er.exports=function(){if(Sr)return Pr;Sr=1;var e=60103,r=60106,t=60107,n=60108,a=60114,i=60109,s=60110,o=60112,l=60113,c=60120,d=60115,u=60116,p=60121,m=60122,f=60117,g=60129,x=60131;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;e=h("react.element"),r=h("react.portal"),t=h("react.fragment"),n=h("react.strict_mode"),a=h("react.profiler"),i=h("react.provider"),s=h("react.context"),o=h("react.forward_ref"),l=h("react.suspense"),c=h("react.suspense_list"),d=h("react.memo"),u=h("react.lazy"),p=h("react.block"),m=h("react.server.block"),f=h("react.fundamental"),g=h("react.debug_trace_mode"),x=h("react.legacy_hidden")}function v(p){if("object"==typeof p&&null!==p){var m=p.$$typeof;switch(m){case e:switch(p=p.type){case t:case a:case n:case l:case c:return p;default:switch(p=p&&p.$$typeof){case s:case o:case u:case d:case i:return p;default:return m}}case r:return m}}}var b=i,j=e,y=o,N=t,_=u,w=d,C=r,D=a,I=n,S=l;return Pr.ContextConsumer=s,Pr.ContextProvider=b,Pr.Element=j,Pr.ForwardRef=y,Pr.Fragment=N,Pr.Lazy=_,Pr.Memo=w,Pr.Portal=C,Pr.Profiler=D,Pr.StrictMode=I,Pr.Suspense=S,Pr.isAsyncMode=function(){return!1},Pr.isConcurrentMode=function(){return!1},Pr.isContextConsumer=function(e){return v(e)===s},Pr.isContextProvider=function(e){return v(e)===i},Pr.isElement=function(r){return"object"==typeof r&&null!==r&&r.$$typeof===e},Pr.isForwardRef=function(e){return v(e)===o},Pr.isFragment=function(e){return v(e)===t},Pr.isLazy=function(e){return v(e)===u},Pr.isMemo=function(e){return v(e)===d},Pr.isPortal=function(e){return v(e)===r},Pr.isProfiler=function(e){return v(e)===a},Pr.isStrictMode=function(e){return v(e)===n},Pr.isSuspense=function(e){return v(e)===l},Pr.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===t||e===a||e===g||e===n||e===l||e===c||e===x||"object"==typeof e&&null!==e&&(e.$$typeof===u||e.$$typeof===d||e.$$typeof===i||e.$$typeof===s||e.$$typeof===o||e.$$typeof===f||e.$$typeof===p||e[0]===m)},Pr.typeOf=v,Pr}()),Er.exports),Or=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Rr=["reactReduxForwardedRef"],Lr=[],Br=[null,null];function Tr(e,r){var t=e[1];return[r.payload,t+1]}function Mr(e,r,t){xr(function(){return e.apply(void 0,r)},t)}function Fr(e,r,t,n,a,i,s){e.current=n,r.current=a,t.current=!1,i.current&&(i.current=null,s())}function Gr(e,r,t,n,a,i,s,o,l,c){if(e){var d=!1,u=null,p=function(){if(!d){var e,t,p=r.getState();try{e=n(p,a.current)}catch(m){t=m,u=m}t||(u=null),e===i.current?s.current||l():(i.current=e,o.current=e,s.current=!0,c({type:"STORE_UPDATED",payload:{error:t}}))}};t.onStateChange=p,t.trySubscribe(),p();return function(){if(d=!0,t.tryUnsubscribe(),t.onStateChange=null,u)throw u}}}var Ur=function(){return[null,0]};function zr(e,t){void 0===t&&(t={});var n=t,a=n.getDisplayName,i=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,s=n.methodName,o=void 0===s?"connectAdvanced":s,l=n.renderCountProp,d=void 0===l?void 0:l,u=n.shouldHandleStateChanges,p=void 0===u||u,m=n.storeKey,f=void 0===m?"store":m;n.withRef;var g=n.forwardRef,x=void 0!==g&&g,h=n.context,v=void 0===h?ur:h,b=vr(n,Or),j=v;return function(t){var n=t.displayName||t.name||"Component",a=i(n),s=Xe({},b,{getDisplayName:i,methodName:o,renderCountProp:d,shouldHandleStateChanges:p,storeKey:f,displayName:a,wrappedComponentName:n,WrappedComponent:t}),l=b.pure;var u=l?r.useMemo:function(e){return e()};function m(n){var a=r.useMemo(function(){var e=n.reactReduxForwardedRef,r=vr(n,Rr);return[n.context,e,r]},[n]),i=a[0],o=a[1],l=a[2],d=r.useMemo(function(){return i&&i.Consumer&&Ar.isContextConsumer(c.createElement(i.Consumer,null))?i:j},[i,j]),m=r.useContext(d),f=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(m)&&Boolean(m.store);var g=f?n.store:m.store,x=r.useMemo(function(){return function(r){return e(r.dispatch,s)}(g)},[g]),h=r.useMemo(function(){if(!p)return Br;var e=gr(g,f?null:m.subscription),r=e.notifyNestedSubs.bind(e);return[e,r]},[g,f,m]),v=h[0],b=h[1],y=r.useMemo(function(){return f?m:Xe({},m,{subscription:v})},[f,m,v]),N=r.useReducer(Tr,Lr,Ur),_=N[0][0],w=N[1];if(_&&_.error)throw _.error;var C=r.useRef(),D=r.useRef(l),I=r.useRef(),S=r.useRef(!1),k=u(function(){return I.current&&l===D.current?I.current:x(g.getState(),l)},[g,_,l]);Mr(Fr,[D,C,S,l,k,I,b]),Mr(Gr,[p,g,v,x,D,C,S,I,b,w],[g,v,x]);var E=r.useMemo(function(){return c.createElement(t,Xe({},k,{ref:o}))},[o,t,k]);return r.useMemo(function(){return p?c.createElement(d.Provider,{value:y},E):E},[d,E,y])}var g=l?c.memo(m):m;if(g.WrappedComponent=t,g.displayName=m.displayName=a,x){var h=c.forwardRef(function(e,r){return c.createElement(g,Xe({},e,{reactReduxForwardedRef:r}))});return h.displayName=a,h.WrappedComponent=t,Ir(h,t)}return Ir(g,t)}}function qr(e,r){return e===r?0!==e||0!==r||1/e==1/r:e!=e&&r!=r}function Vr(e,r){if(qr(e,r))return!0;if("object"!=typeof e||null===e||"object"!=typeof r||null===r)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(!Object.prototype.hasOwnProperty.call(r,t[a])||!qr(e[t[a]],r[t[a]]))return!1;return!0}function Wr(e){return function(r,t){var n=e(r,t);function a(){return n}return a.dependsOnOwnProps=!1,a}}function Hr(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function $r(e,r){return function(r,t){t.displayName;var n=function(e,r){return n.dependsOnOwnProps?n.mapToProps(e,r):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(r,t){n.mapToProps=e,n.dependsOnOwnProps=Hr(e);var a=n(r,t);return"function"==typeof a&&(n.mapToProps=a,n.dependsOnOwnProps=Hr(a),a=n(r,t)),a},n}}const Yr=[function(e){return"function"==typeof e?$r(e):void 0},function(e){return e?void 0:Wr(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?Wr(function(r){return function(e,r){var t={},n=function(n){var a=e[n];"function"==typeof a&&(t[n]=function(){return r(a.apply(void 0,arguments))})};for(var a in e)n(a);return t}(e,r)}):void 0}];const Jr=[function(e){return"function"==typeof e?$r(e):void 0},function(e){return e?void 0:Wr(function(){return{}})}];function Kr(e,r,t){return Xe({},t,e,r)}const Xr=[function(e){return"function"==typeof e?function(e){return function(r,t){t.displayName;var n,a=t.pure,i=t.areMergedPropsEqual,s=!1;return function(r,t,o){var l=e(r,t,o);return s?a&&i(l,n)||(n=l):(s=!0,n=l),n}}}(e):void 0},function(e){return e?void 0:function(){return Kr}}];var Qr=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Zr(e,r,t,n){return function(a,i){return t(e(a,i),r(n,i),i)}}function et(e,r,t,n,a){var i,s,o,l,c,d=a.areStatesEqual,u=a.areOwnPropsEqual,p=a.areStatePropsEqual,m=!1;function f(a,m){var f,g,x=!u(m,s),h=!d(a,i,m,s);return i=a,s=m,x&&h?(o=e(i,s),r.dependsOnOwnProps&&(l=r(n,s)),c=t(o,l,s)):x?(e.dependsOnOwnProps&&(o=e(i,s)),r.dependsOnOwnProps&&(l=r(n,s)),c=t(o,l,s)):h?(f=e(i,s),g=!p(f,o),o=f,g&&(c=t(o,l,s)),c):c}return function(a,d){return m?f(a,d):(o=e(i=a,s=d),l=r(n,s),c=t(o,l,s),m=!0,c)}}function rt(e,r){var t=r.initMapStateToProps,n=r.initMapDispatchToProps,a=r.initMergeProps,i=vr(r,Qr),s=t(e,i),o=n(e,i),l=a(e,i);return(i.pure?et:Zr)(s,o,l,e,i)}var tt=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function nt(e,r,t){for(var n=r.length-1;n>=0;n--){var a=r[n](e);if(a)return a}return function(r,n){throw new Error("Invalid value of type "+typeof e+" for "+t+" argument when connecting component "+n.wrappedComponentName+".")}}function at(e,r){return e===r}function it(e){var r=void 0===e?{}:e,t=r.connectHOC,n=void 0===t?zr:t,a=r.mapStateToPropsFactories,i=void 0===a?Jr:a,s=r.mapDispatchToPropsFactories,o=void 0===s?Yr:s,l=r.mergePropsFactories,c=void 0===l?Xr:l,d=r.selectorFactory,u=void 0===d?rt:d;return function(e,r,t,a){void 0===a&&(a={});var s=a,l=s.pure,d=void 0===l||l,p=s.areStatesEqual,m=void 0===p?at:p,f=s.areOwnPropsEqual,g=void 0===f?Vr:f,x=s.areStatePropsEqual,h=void 0===x?Vr:x,v=s.areMergedPropsEqual,b=void 0===v?Vr:v,j=vr(s,tt),y=nt(e,i,"mapStateToProps"),N=nt(r,o,"mapDispatchToProps"),_=nt(t,c,"mergeProps");return n(u,Xe({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:y,initMapDispatchToProps:N,initMergeProps:_,pure:d,areStatesEqual:m,areOwnPropsEqual:g,areStatePropsEqual:h,areMergedPropsEqual:b},j))}}const st=it();var ot;function lt(e,t){var n=r.useState(function(){return{inputs:t,result:e()}})[0],a=r.useRef(!0),i=r.useRef(n),s=a.current||Boolean(t&&i.current.inputs&&function(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}(t,i.current.inputs))?i.current:{inputs:t,result:e()};return r.useEffect(function(){a.current=!1,i.current=s},[s]),s.result}ot=d.unstable_batchedUpdates,pr=ot;var ct=lt,dt=function(e,r){return lt(function(){return e},r)};var ut=function(e){var r=e.top,t=e.right,n=e.bottom,a=e.left;return{top:r,right:t,bottom:n,left:a,width:t-a,height:n-r,x:a,y:r,center:{x:(t+a)/2,y:(n+r)/2}}},pt=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},mt=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},ft={top:0,right:0,bottom:0,left:0},gt=function(e){var r=e.borderBox,t=e.margin,n=void 0===t?ft:t,a=e.border,i=void 0===a?ft:a,s=e.padding,o=void 0===s?ft:s,l=ut(pt(r,n)),c=ut(mt(r,i)),d=ut(mt(c,o));return{marginBox:l,borderBox:ut(r),paddingBox:c,contentBox:d,margin:n,border:i,padding:o}},xt=function(e){var r=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var t=Number(r);return isNaN(t)&&function(){throw new Error("Invariant failed")}(),t},ht=function(e,r){var t,n,a=e.borderBox,i=e.border,s=e.margin,o=e.padding,l=(n=r,{top:(t=a).top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x});return gt({borderBox:l,border:i,margin:s,padding:o})},vt=function(e,r){return void 0===r&&(r={x:window.pageXOffset,y:window.pageYOffset}),ht(e,r)},bt=function(e,r){var t={top:xt(r.marginTop),right:xt(r.marginRight),bottom:xt(r.marginBottom),left:xt(r.marginLeft)},n={top:xt(r.paddingTop),right:xt(r.paddingRight),bottom:xt(r.paddingBottom),left:xt(r.paddingLeft)},a={top:xt(r.borderTopWidth),right:xt(r.borderRightWidth),bottom:xt(r.borderBottomWidth),left:xt(r.borderLeftWidth)};return gt({borderBox:e,margin:t,padding:n,border:a})},jt=function(e){var r=e.getBoundingClientRect(),t=window.getComputedStyle(e);return bt(r,t)},yt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Nt(e,r){return e===r||!(!yt(e)||!yt(r))}function _t(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!Nt(e[t],r[t]))return!1;return!0}function wt(e,r){var t;void 0===r&&(r=_t);var n,a=[],i=!1;return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return i&&t===this&&r(s,a)||(n=e.apply(this,s),i=!0,t=this,a=s),n}}var Ct=function(e){var r=[],t=null,n=function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];r=a,t||(t=requestAnimationFrame(function(){t=null,e.apply(void 0,r)}))};return n.cancel=function(){t&&(cancelAnimationFrame(t),t=null)},n};function Dt(e,r){}function It(){}function St(e,r,t){var n=r.map(function(r){var n,a,i=(n=t,a=r.options,Xe({},n,{},a));return e.addEventListener(r.eventName,r.fn,i),function(){e.removeEventListener(r.eventName,r.fn,i)}});return function(){n.forEach(function(e){e()})}}Dt.bind(null,"warn"),Dt.bind(null,"error");function kt(e){this.message=e}function Et(e,r){throw new kt("Invariant failed")}kt.prototype.toString=function(){return this.message};var Pt=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(r=e.call.apply(e,[this].concat(n))||this).callbacks=null,r.unbind=It,r.onWindowError=function(e){var t=r.getCallbacks();t.isDragging()&&t.tryAbort(),e.error instanceof kt&&e.preventDefault()},r.getCallbacks=function(){if(!r.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return r.callbacks},r.setCallbacks=function(e){r.callbacks=e},r}Ke(r,e);var t=r.prototype;return t.componentDidMount=function(){this.unbind=St(window,[{eventName:"error",fn:this.onWindowError}])},t.componentDidCatch=function(e){if(!(e instanceof kt))throw e;this.setState({})},t.componentWillUnmount=function(){this.unbind()},t.render=function(){return this.props.children(this.setCallbacks)},r}(c.Component),At=function(e){return e+1},Ot=function(e,r){var t=e.droppableId===r.droppableId,n=At(e.index),a=At(r.index);return t?"\n      You have moved the item from position "+n+"\n      to position "+a+"\n    ":"\n    You have moved the item from position "+n+"\n    in list "+e.droppableId+"\n    to list "+r.droppableId+"\n    in position "+a+"\n  "},Rt=function(e,r,t){return r.droppableId===t.droppableId?"\n      The item "+e+"\n      has been combined with "+t.draggableId:"\n      The item "+e+"\n      in list "+r.droppableId+"\n      has been combined with "+t.draggableId+"\n      in list "+t.droppableId+"\n    "},Lt=function(e){return"\n  The item has returned to its starting position\n  of "+At(e.index)+"\n"},Bt="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",Tt=function(e){return"\n  You have lifted an item in position "+At(e.source.index)+"\n"},Mt=function(e){var r=e.destination;if(r)return Ot(e.source,r);var t=e.combine;return t?Rt(e.draggableId,e.source,t):"You are over an area that cannot be dropped on"},Ft=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Lt(e.source)+"\n    ";var r=e.destination,t=e.combine;return r?"\n      You have dropped the item.\n      "+Ot(e.source,r)+"\n    ":t?"\n      You have dropped the item.\n      "+Rt(e.draggableId,e.source,t)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Lt(e.source)+"\n  "},Gt={x:0,y:0},Ut=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},zt=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},qt=function(e,r){return e.x===r.x&&e.y===r.y},Vt=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},Wt=function(e,r,t){var n;return void 0===t&&(t=0),(n={})[e]=r,n["x"===e?"y":"x"]=t,n},Ht=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},$t=function(e,r){return Math.min.apply(Math,r.map(function(r){return Ht(e,r)}))},Yt=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},Jt=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},Kt=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Xt=function(e,r){return r&&r.shouldClipSubject?function(e,r){var t=ut({top:Math.max(r.top,e.top),right:Math.min(r.right,e.right),bottom:Math.min(r.bottom,e.bottom),left:Math.max(r.left,e.left)});return t.width<=0||t.height<=0?null:t}(r.pageMarginBox,e):ut(e)},Qt=function(e){var r=e.page,t=e.withPlaceholder,n=e.axis,a=e.frame,i=function(e,r){return r?Jt(e,r.scroll.diff.displacement):e}(r.marginBox,a),s=function(e,r,t){var n;return t&&t.increasedBy?Xe({},e,((n={})[r.end]=e[r.end]+t.increasedBy[r.line],n)):e}(i,n,t);return{page:r,withPlaceholder:t,active:Xt(s,a)}},Zt=function(e,r){e.frame||Et();var t=e.frame,n=zt(r,t.scroll.initial),a=Vt(n),i=Xe({},t,{scroll:{initial:t.scroll.initial,current:r,diff:{value:n,displacement:a},max:t.scroll.max}});return Xe({},e,{frame:i,subject:Qt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i})})};function en(e){return Object.values?Object.values(e):Object.keys(e).map(function(r){return e[r]})}function rn(e,r){if(e.findIndex)return e.findIndex(r);for(var t=0;t<e.length;t++)if(r(e[t]))return t;return-1}function tn(e,r){if(e.find)return e.find(r);var t=rn(e,r);return-1!==t?e[t]:void 0}function nn(e){return Array.prototype.slice.call(e)}var an=wt(function(e){return e.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),sn=wt(function(e){return e.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),on=wt(function(e){return en(e)}),ln=wt(function(e){return en(e)}),cn=wt(function(e,r){return ln(r).filter(function(r){return e===r.descriptor.droppableId}).sort(function(e,r){return e.descriptor.index-r.descriptor.index})});function dn(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function un(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var pn=wt(function(e,r){return r.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),mn=function(e,r){return e.descriptor.droppableId===r.descriptor.id},fn={point:Gt,value:0},gn={invisible:{},visible:{},all:[]},xn={displaced:gn,displacedBy:fn,at:null},hn=function(e,r){return function(t){return e<=t&&t<=r}},vn=function(e){var r=hn(e.top,e.bottom),t=hn(e.left,e.right);return function(n){if(r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right))return!0;var a=r(n.top)||r(n.bottom),i=t(n.left)||t(n.right);if(a&&i)return!0;var s=n.top<e.top&&n.bottom>e.bottom,o=n.left<e.left&&n.right>e.right;return!(!s||!o)||(s&&i||o&&a)}},bn=function(e){var r=hn(e.top,e.bottom),t=hn(e.left,e.right);return function(e){return r(e.top)&&r(e.bottom)&&t(e.left)&&t(e.right)}},jn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},yn={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Nn=function(e){var r=e.target,t=e.destination,n=e.viewport,a=e.withDroppableDisplacement,i=e.isVisibleThroughFrameFn,s=a?function(e,r){var t=r.frame?r.frame.scroll.diff.displacement:Gt;return Jt(e,t)}(r,t):r;return function(e,r,t){return!!r.subject.active&&t(r.subject.active)(e)}(s,t,i)&&function(e,r,t){return t(r)(e)}(s,n,i)},_n=function(e){return Nn(Xe({},e,{isVisibleThroughFrameFn:bn}))};function wn(e){var r=e.afterDragging,t=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,s=e.last;return r.reduce(function(e,r){var o=function(e,r){var t=e.page.marginBox,n={top:r.point.y,right:0,bottom:0,left:r.point.x};return ut(pt(t,n))}(r,n),l=r.descriptor.id;if(e.all.push(l),!Nn(Xe({},{target:o,destination:t,viewport:a,withDroppableDisplacement:!0},{isVisibleThroughFrameFn:vn})))return e.invisible[r.descriptor.id]=!0,e;var c=function(e,r,t){if("boolean"==typeof t)return t;if(!r)return!0;var n=r.invisible,a=r.visible;if(n[e])return!1;var i=a[e];return!i||i.shouldAnimate}(l,s,i),d={draggableId:l,shouldAnimate:c};return e.visible[l]=d,e},{all:[],visible:{},invisible:{}})}function Cn(e){var r=e.insideDestination,t=e.inHomeList,n=e.displacedBy,a=e.destination,i=function(e,r){if(!e.length)return 0;var t=e[e.length-1].descriptor.index;return r.inHomeList?t:t+1}(r,{inHomeList:t});return{displaced:gn,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function Dn(e){var r=e.draggable,t=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,s=e.last,o=e.index,l=e.forceShouldAnimate,c=mn(r,n);if(null==o)return Cn({insideDestination:t,inHomeList:c,displacedBy:i,destination:n});var d=tn(t,function(e){return e.descriptor.index===o});if(!d)return Cn({insideDestination:t,inHomeList:c,displacedBy:i,destination:n});var u=pn(r,t),p=t.indexOf(d);return{displaced:wn({afterDragging:u.slice(p),destination:n,displacedBy:i,last:s,viewport:a.frame,forceShouldAnimate:l}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function In(e,r){return Boolean(r.effected[e])}var Sn=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,s=e.insideDestination,o=e.previousImpact,l=e.viewport,c=e.afterCritical,d=o.at;if(d||Et(),"REORDER"===d.type){var u=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,s=r?i+1:i-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index;return s<o||s>(t?l:l+1)?null:s}({isMovingForward:r,isInHomeList:t,location:d.destination,insideDestination:s});return null==u?null:Dn({draggable:n,insideDestination:s,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:u})}var p=function(e){var r=e.isMovingForward,t=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!t.isCombineEnabled)return null;var s=a.draggableId,o=n[s].descriptor.index;return In(s,i)?r?o:o-1:r?o+1:o}({isMovingForward:r,destination:i,displaced:o.displaced,draggables:a,combine:d.combine,afterCritical:c});return null==p?null:Dn({draggable:n,insideDestination:s,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:p})},kn=function(e){var r=e.afterCritical,t=e.impact,n=e.draggables,a=un(t);a||Et();var i=a.draggableId,s=n[i].page.borderBox.center,o=function(e){var r=e.displaced,t=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=Boolean(r.visible[n]||r.invisible[n]);return In(n,t)?i?Gt:Vt(a.point):i?a.point:Gt}({displaced:t.displaced,afterCritical:r,combineWith:i,displacedBy:t.displacedBy});return Ut(s,o)},En=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},Pn=function(e,r,t){return r[e.crossAxisStart]+t.margin[e.crossAxisStart]+t.borderBox[e.crossAxisSize]/2},An=function(e){var r=e.axis,t=e.moveRelativeTo,n=e.isMoving;return Wt(r.line,t.marginBox[r.end]+En(r,n),Pn(r,t.marginBox,n))},On=function(e){var r=e.axis,t=e.moveRelativeTo,n=e.isMoving;return Wt(r.line,t.marginBox[r.start]-function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2}(r,n),Pn(r,t.marginBox,n))},Rn=function(e){var r=e.impact,t=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,s=cn(a.descriptor.id,n),o=t.page,l=a.axis;if(!s.length)return function(e){var r=e.axis,t=e.moveInto,n=e.isMoving;return Wt(r.line,t.contentBox[r.start]+En(r,n),Pn(r,t.contentBox,n))}({axis:l,moveInto:a.page,isMoving:o});var c=r.displaced,d=r.displacedBy,u=c.all[0];if(u){var p=n[u];if(In(u,i))return On({axis:l,moveRelativeTo:p.page,isMoving:o});var m=ht(p.page,d.point);return On({axis:l,moveRelativeTo:m,isMoving:o})}var f=s[s.length-1];if(f.descriptor.id===t.descriptor.id)return o.borderBox.center;if(In(f.descriptor.id,i)){var g=ht(f.page,Vt(i.displacedBy.point));return An({axis:l,moveRelativeTo:g,isMoving:o})}return An({axis:l,moveRelativeTo:f.page,isMoving:o})},Ln=function(e,r){var t=e.frame;return t?Ut(r,t.scroll.diff.displacement):r},Bn=function(e){var r=function(e){var r=e.impact,t=e.draggable,n=e.droppable,a=e.draggables,i=e.afterCritical,s=t.page.borderBox.center,o=r.at;return n&&o?"REORDER"===o.type?Rn({impact:r,draggable:t,draggables:a,droppable:n,afterCritical:i}):kn({impact:r,draggables:a,afterCritical:i}):s}(e),t=e.droppable;return t?Ln(t,r):r},Tn=function(e,r){var t=zt(r,e.scroll.initial),n=Vt(t);return{frame:ut({top:r.y,bottom:r.y+e.frame.height,left:r.x,right:r.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:r,diff:{value:t,displacement:n}}}};function Mn(e,r){return e.map(function(e){return r[e]})}var Fn=function(e){var r=e.pageBorderBoxCenter,t=e.draggable,n=function(e,r){return Ut(e.scroll.diff.displacement,r)}(e.viewport,r),a=zt(n,t.page.borderBox.center);return Ut(t.client.borderBox.center,a)},Gn=function(e){var r=e.draggable,t=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,s=e.onlyOnMainAxis,o=void 0!==s&&s,l=zt(n,r.page.borderBox.center),c={target:Jt(r.page.borderBox,l),destination:t,withDroppableDisplacement:i,viewport:a};return o?function(e){return Nn(Xe({},e,{isVisibleThroughFrameFn:(r=e.destination.axis,function(e){var t=hn(e.top,e.bottom),n=hn(e.left,e.right);return function(e){return r===jn?t(e.top)&&t(e.bottom):n(e.left)&&n(e.right)}})}));var r}(c):_n(c)},Un=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,s=e.viewport,o=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!n.isEnabled)return null;var d=cn(n.descriptor.id,a),u=mn(t,n),p=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;if(!dn(i))return null;function s(e){var r={type:"COMBINE",combine:{draggableId:e,droppableId:n.descriptor.id}};return Xe({},i,{at:r})}var o=i.displaced.all,l=o.length?o[0]:null;if(r)return l?s(l):null;var c=pn(t,a);if(!l)return c.length?s(c[c.length-1].descriptor.id):null;var d=rn(c,function(e){return e.descriptor.id===l});-1===d&&Et();var u=d-1;return u<0?null:s(c[u].descriptor.id)}({isMovingForward:r,draggable:t,destination:n,insideDestination:d,previousImpact:i})||Sn({isMovingForward:r,isInHomeList:u,draggable:t,draggables:a,destination:n,insideDestination:d,previousImpact:i,viewport:s,afterCritical:c});if(!p)return null;var m=Bn({impact:p,draggable:t,droppable:n,draggables:a,afterCritical:c});if(Gn({draggable:t,destination:n,newPageBorderBoxCenter:m,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Fn({pageBorderBoxCenter:m,draggable:t,viewport:s}),impact:p,scrollJumpRequest:null};var f=zt(m,o),g=function(e){var r=e.impact,t=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,s=Tn(t,Ut(t.scroll.current,i)),o=n.frame?Zt(n,Ut(n.frame.scroll.current,i)):n,l=r.displaced,c=wn({afterDragging:Mn(l.all,a),destination:n,displacedBy:r.displacedBy,viewport:s.frame,last:l,forceShouldAnimate:!1}),d=wn({afterDragging:Mn(l.all,a),destination:o,displacedBy:r.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),u={},p={},m=[l,c,d];return l.all.forEach(function(e){var r=function(e,r){for(var t=0;t<r.length;t++){var n=r[t].visible[e];if(n)return n}return null}(e,m);r?p[e]=r:u[e]=!0}),Xe({},r,{displaced:{all:l.all,invisible:u,visible:p}})}({impact:p,viewport:s,destination:n,draggables:a,maxScrollChange:f});return{clientSelection:l,impact:g,scrollJumpRequest:f}},zn=function(e){var r=e.subject.active;return r||Et(),r},qn=function(e,r){var t=e.page.borderBox.center;return In(e.descriptor.id,r)?zt(t,r.displacedBy.point):t},Vn=function(e,r){var t=e.page.borderBox;return In(e.descriptor.id,r)?Jt(t,Vt(r.displacedBy.point)):t},Wn=wt(function(e,r){var t=r[e.line];return{value:t,point:Wt(e.line,t)}}),Hn=function(e,r){return Xe({},e,{scroll:Xe({},e.scroll,{max:r})})},$n=function(e,r,t){var n=e.frame;mn(r,e)&&Et(),e.subject.withPlaceholder&&Et();var a=Wn(e.axis,r.displaceBy).point,i=function(e,r,t){var n=e.axis;if("virtual"===e.descriptor.mode)return Wt(n.line,r[n.line]);var a=e.subject.page.contentBox[n.size],i=cn(e.descriptor.id,t).reduce(function(e,r){return e+r.client.marginBox[n.size]},0)+r[n.line]-a;return i<=0?null:Wt(n.line,i)}(e,a,t),s={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n)return Xe({},e,{subject:Qt({page:e.subject.page,withPlaceholder:s,axis:e.axis,frame:e.frame})});var o=i?Ut(n.scroll.max,i):n.scroll.max,l=Hn(n,o);return Xe({},e,{subject:Qt({page:e.subject.page,withPlaceholder:s,axis:e.axis,frame:l}),frame:l})},Yn=function(e){var r=e.isMovingForward,t=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,s=e.droppables,o=e.viewport,l=e.afterCritical,c=function(e){var r=e.isMovingForward,t=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,s=n.subject.active;if(!s)return null;var o=n.axis,l=hn(s[o.start],s[o.end]),c=on(a).filter(function(e){return e!==n}).filter(function(e){return e.isEnabled}).filter(function(e){return Boolean(e.subject.active)}).filter(function(e){return vn(i.frame)(zn(e))}).filter(function(e){var t=zn(e);return r?s[o.crossAxisEnd]<t[o.crossAxisEnd]:t[o.crossAxisStart]<s[o.crossAxisStart]}).filter(function(e){var r=zn(e),t=hn(r[o.start],r[o.end]);return l(r[o.start])||l(r[o.end])||t(s[o.start])||t(s[o.end])}).sort(function(e,t){var n=zn(e)[o.crossAxisStart],a=zn(t)[o.crossAxisStart];return r?n-a:a-n}).filter(function(e,r,t){return zn(e)[o.crossAxisStart]===zn(t[0])[o.crossAxisStart]});if(!c.length)return null;if(1===c.length)return c[0];var d=c.filter(function(e){return hn(zn(e)[o.start],zn(e)[o.end])(t[o.line])});return 1===d.length?d[0]:d.length>1?d.sort(function(e,r){return zn(e)[o.start]-zn(r)[o.start]})[0]:c.sort(function(e,r){var n=$t(t,Kt(zn(e))),a=$t(t,Kt(zn(r)));return n!==a?n-a:zn(e)[o.start]-zn(r)[o.start]})[0]}({isMovingForward:r,pageBorderBoxCenter:t,source:a,droppables:s,viewport:o});if(!c)return null;var d=cn(c.descriptor.id,i),u=function(e){var r=e.pageBorderBoxCenter,t=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical;return a.filter(function(e){return _n({target:Vn(e,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})}).sort(function(e,t){var a=Ht(r,Ln(n,qn(e,i))),s=Ht(r,Ln(n,qn(t,i)));return a<s?-1:s<a?1:e.descriptor.index-t.descriptor.index})[0]||null}({pageBorderBoxCenter:t,viewport:o,destination:c,insideDestination:d,afterCritical:l}),p=function(e){var r=e.previousPageBorderBoxCenter,t=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,s=e.destination,o=e.viewport,l=e.afterCritical;if(!t){if(n.length)return null;var c={displaced:gn,displacedBy:fn,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},d=Bn({impact:c,draggable:a,droppable:s,draggables:i,afterCritical:l}),u=mn(a,s)?s:$n(s,a,i);return Gn({draggable:a,destination:u,newPageBorderBoxCenter:d,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var p,m=Boolean(r[s.axis.line]<=t.page.borderBox.center[s.axis.line]),f=(p=t.descriptor.index,t.descriptor.id===a.descriptor.id||m?p:p+1),g=Wn(s.axis,a.displaceBy);return Dn({draggable:a,insideDestination:n,destination:s,viewport:o,displacedBy:g,last:gn,index:f})}({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:i,moveRelativeTo:u,insideDestination:d,viewport:o,afterCritical:l});if(!p)return null;var m=Bn({impact:p,draggable:n,droppable:c,draggables:i,afterCritical:l});return{clientSelection:Fn({pageBorderBoxCenter:m,draggable:n,viewport:o}),impact:p,scrollJumpRequest:null}},Jn=function(e){var r=e.at;return r?"REORDER"===r.type?r.destination.droppableId:r.combine.droppableId:null},Kn=function(e){var r=e.state,t=e.type,n=function(e,r){var t=Jn(e);return t?r[t]:null}(r.impact,r.dimensions.droppables),a=Boolean(n),i=r.dimensions.droppables[r.critical.droppable.id],s=n||i,o=s.axis.direction,l="vertical"===o&&("MOVE_UP"===t||"MOVE_DOWN"===t)||"horizontal"===o&&("MOVE_LEFT"===t||"MOVE_RIGHT"===t);if(l&&!a)return null;var c="MOVE_DOWN"===t||"MOVE_RIGHT"===t,d=r.dimensions.draggables[r.critical.draggable.id],u=r.current.page.borderBoxCenter,p=r.dimensions,m=p.draggables,f=p.droppables;return l?Un({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,destination:s,draggables:m,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):Yn({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,isOver:s,draggables:m,droppables:f,viewport:r.viewport,afterCritical:r.afterCritical})};function Xn(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Qn(e){var r=hn(e.top,e.bottom),t=hn(e.left,e.right);return function(e){return r(e.y)&&t(e.x)}}function Zn(e){var r=e.pageBorderBox,t=e.draggable,n=e.droppables,a=on(n).filter(function(e){if(!e.isEnabled)return!1;var t,n,a=e.subject.active;if(!a)return!1;if(n=a,!((t=r).left<n.right&&t.right>n.left&&t.top<n.bottom&&t.bottom>n.top))return!1;if(Qn(a)(r.center))return!0;var i=e.axis,s=a.center[i.crossAxisLine],o=r[i.crossAxisStart],l=r[i.crossAxisEnd],c=hn(a[i.crossAxisStart],a[i.crossAxisEnd]),d=c(o),u=c(l);return!d&&!u||(d?o<s:l>s)});return a.length?1===a.length?a[0].descriptor.id:function(e){var r=e.pageBorderBox,t=e.draggable,n=e.candidates,a=t.page.borderBox.center,i=n.map(function(e){var t=e.axis,n=Wt(e.axis.line,r.center[t.line],e.page.borderBox.center[t.crossAxisLine]);return{id:e.descriptor.id,distance:Ht(a,n)}}).sort(function(e,r){return r.distance-e.distance});return i[0]?i[0].id:null}({pageBorderBox:r,draggable:t,candidates:a}):null}var ea=function(e,r){return ut(Jt(e,r))};function ra(e){var r=e.displaced,t=e.id;return Boolean(r.visible[t]||r.invisible[t])}var ta=function(e){var r=e.pageOffset,t=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,s=e.viewport,o=e.afterCritical,l=ea(t.page.borderBox,r),c=Zn({pageBorderBox:l,draggable:t,droppables:a});if(!c)return xn;var d,u,p=a[c],m=cn(p.descriptor.id,n),f=(d=l,(u=p.frame)?ea(d,u.scroll.diff.value):d);return function(e){var r=e.draggable,t=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,s=e.afterCritical;if(!a.isCombineEnabled)return null;var o=a.axis,l=Wn(a.axis,r.displaceBy),c=l.value,d=t[o.start],u=t[o.end],p=tn(pn(r,i),function(e){var r=e.descriptor.id,t=e.page.borderBox,a=t[o.size]/4,i=In(r,s),l=ra({displaced:n.displaced,id:r});return i?l?u>t[o.start]+a&&u<t[o.end]-a:d>t[o.start]-c+a&&d<t[o.end]-c-a:l?u>t[o.start]+c+a&&u<t[o.end]+c-a:d>t[o.start]+a&&d<t[o.end]-a});return p?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:a.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:f,draggable:t,previousImpact:i,destination:p,insideDestination:m,afterCritical:o})||function(e){var r=e.pageBorderBoxWithDroppableScroll,t=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,s=e.viewport,o=e.afterCritical,l=n.axis,c=Wn(n.axis,t.displaceBy),d=c.value,u=r[l.start],p=r[l.end],m=function(e){var r=e.draggable,t=e.closest,n=e.inHomeList;return t?n&&t.descriptor.index>r.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}({draggable:t,closest:tn(pn(t,a),function(e){var r=e.descriptor.id,t=e.page.borderBox.center[l.line],n=In(r,o),a=ra({displaced:i,id:r});return n?a?p<=t:u<t-d:a?p<=t+d:u<t}),inHomeList:mn(t,n)});return Dn({draggable:t,insideDestination:a,destination:n,viewport:s,last:i,displacedBy:c,index:m})}({pageBorderBoxWithDroppableScroll:f,draggable:t,destination:p,insideDestination:m,last:i.displaced,viewport:s,afterCritical:o})},na=function(e,r){var t;return Xe({},e,((t={})[r.descriptor.id]=r,t))},aa=function(e){var r=e.previousImpact,t=e.impact,n=e.droppables,a=Jn(r),i=Jn(t);if(!a)return n;if(a===i)return n;var s=n[a];if(!s.subject.withPlaceholder)return n;var o=function(e){var r=e.subject.withPlaceholder;r||Et();var t=e.frame;if(!t)return Xe({},e,{subject:Qt({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var n=r.oldFrameMaxScroll;n||Et();var a=Hn(t,n);return Xe({},e,{subject:Qt({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null}),frame:a})}(s);return na(n,o)},ia=function(e){var r=e.state,t=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,s=e.scrollJumpRequest,o=a||r.viewport,l=n||r.dimensions,c=t||r.current.client.selection,d=zt(c,r.initial.client.selection),u={offset:d,selection:c,borderBoxCenter:Ut(r.initial.client.borderBoxCenter,d)},p={selection:Ut(u.selection,o.scroll.current),borderBoxCenter:Ut(u.borderBoxCenter,o.scroll.current),offset:Ut(u.offset,o.scroll.diff.value)},m={client:u,page:p};if("COLLECTING"===r.phase)return Xe({phase:"COLLECTING"},r,{dimensions:l,viewport:o,current:m});var f=l.draggables[r.critical.draggable.id],g=i||ta({pageOffset:p.offset,draggable:f,draggables:l.draggables,droppables:l.droppables,previousImpact:r.impact,viewport:o,afterCritical:r.afterCritical}),x=function(e){var r=e.draggable,t=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,s=aa({previousImpact:a,impact:i,droppables:n}),o=Jn(i);if(!o)return s;var l=n[o];if(mn(r,l))return s;if(l.subject.withPlaceholder)return s;var c=$n(l,r,t);return na(s,c)}({draggable:f,impact:g,previousImpact:r.impact,draggables:l.draggables,droppables:l.droppables});return Xe({},r,{current:m,dimensions:{draggables:l.draggables,droppables:x},impact:g,viewport:o,scrollJumpRequest:s||null,forceShouldAnimate:!s&&null})};var sa=function(e){var r=e.impact,t=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,s=r.displaced,o=function(e,r){return e.map(function(e){return r[e]})}(s.all,n);return Xe({},r,{displaced:wn({afterDragging:o,destination:a,displacedBy:r.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:s})})},oa=function(e){var r=e.impact,t=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,s=e.afterCritical,o=Bn({impact:r,draggable:t,draggables:a,droppable:n,afterCritical:s});return Fn({pageBorderBoxCenter:o,draggable:t,viewport:i})},la=function(e){var r=e.state,t=e.dimensions,n=e.viewport;"SNAP"!==r.movementMode&&Et();var a=r.impact,i=n||r.viewport,s=t||r.dimensions,o=s.draggables,l=s.droppables,c=o[r.critical.draggable.id],d=Jn(a);d||Et();var u=l[d],p=sa({impact:a,viewport:i,destination:u,draggables:o}),m=oa({impact:p,draggable:c,droppable:u,draggables:o,viewport:i,afterCritical:r.afterCritical});return ia({impact:p,clientSelection:m,state:r,dimensions:s,viewport:i})},ca=function(e){var r=e.draggable,t=e.home,n=e.draggables,a=e.viewport,i=Wn(t.axis,r.displaceBy),s=cn(t.descriptor.id,n),o=s.indexOf(r);-1===o&&Et();var l,c=s.slice(o+1),d=c.reduce(function(e,r){return e[r.descriptor.id]=!0,e},{}),u={inVirtualList:"virtual"===t.descriptor.mode,displacedBy:i,effected:d};return{impact:{displaced:wn({afterDragging:c,destination:t,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:(l=r.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:u}},da=function(e){var r=e.additions,t=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return r.map(function(e){var r=e.descriptor.droppableId,i=function(e){var r=e.frame;return r||Et(),r}(t[r]).scroll.diff.value,s=function(e){var r=e.draggable,t=e.offset,n=e.initialWindowScroll,a=ht(r.client,t),i=vt(a,n);return Xe({},r,{placeholder:Xe({},r.placeholder,{client:a}),client:a,page:i})}({draggable:e,offset:Ut(a,i),initialWindowScroll:n.scroll.initial});return s})},ua=function(e){return"SNAP"===e.movementMode},pa=function(e,r,t){var n=function(e,r){return{draggables:e.draggables,droppables:na(e.droppables,r)}}(e.dimensions,r);return!ua(e)||t?ia({state:e,dimensions:n}):la({state:e,dimensions:n})};function ma(e){return e.isDragging&&"SNAP"===e.movementMode?Xe({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var fa={phase:"IDLE",completed:null,shouldFlush:!1},ga=function(e,r){if(void 0===e&&(e=fa),"FLUSH"===r.type)return Xe({},fa,{shouldFlush:!0});if("INITIAL_PUBLISH"===r.type){"IDLE"!==e.phase&&Et();var t=r.payload,n=t.critical,a=t.clientSelection,i=t.viewport,s=t.dimensions,o=t.movementMode,l=s.draggables[n.draggable.id],c=s.droppables[n.droppable.id],d={selection:a,borderBoxCenter:l.client.borderBox.center,offset:Gt},u={client:d,page:{selection:Ut(d.selection,i.scroll.initial),borderBoxCenter:Ut(d.selection,i.scroll.initial),offset:Ut(d.selection,i.scroll.diff.value)}},p=on(s.droppables).every(function(e){return!e.isFixedOnPage}),m=ca({draggable:l,home:c,draggables:s.draggables,viewport:i}),f=m.impact;return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:s,initial:u,current:u,isWindowScrollAllowed:p,impact:f,afterCritical:m.afterCritical,onLiftImpact:f,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===r.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Et(),Xe({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===r.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Et(),function(e){var r=e.state,t=e.published,n=t.modified.map(function(e){var t=r.dimensions.droppables[e.droppableId];return Zt(t,e.scroll)}),a=Xe({},r.dimensions.droppables,{},an(n)),i=sn(da({additions:t.additions,updatedDroppables:a,viewport:r.viewport})),s=Xe({},r.dimensions.draggables,{},i);t.removals.forEach(function(e){delete s[e]});var o={droppables:a,draggables:s},l=Jn(r.impact),c=l?o.droppables[l]:null,d=o.draggables[r.critical.draggable.id],u=o.droppables[r.critical.droppable.id],p=ca({draggable:d,home:u,draggables:s,viewport:r.viewport}),m=p.impact,f=p.afterCritical,g=c&&c.isCombineEnabled?r.impact:m,x=ta({pageOffset:r.current.page.offset,draggable:o.draggables[r.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:g,viewport:r.viewport,afterCritical:f}),h=Xe({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:x,onLiftImpact:m,dimensions:o,afterCritical:f,forceShouldAnimate:!1});return"COLLECTING"===r.phase?h:Xe({phase:"DROP_PENDING"},h,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1})}({state:e,published:r.payload});if("MOVE"===r.type){if("DROP_PENDING"===e.phase)return e;Xn(e)||Et();var g=r.payload.client;return qt(g,e.current.client.selection)?e:ia({state:e,clientSelection:g,impact:ua(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===r.type){if("DROP_PENDING"===e.phase)return ma(e);if("COLLECTING"===e.phase)return ma(e);Xn(e)||Et();var x=r.payload,h=x.id,v=x.newScroll,b=e.dimensions.droppables[h];if(!b)return e;var j=Zt(b,v);return pa(e,j,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===r.type){if("DROP_PENDING"===e.phase)return e;Xn(e)||Et();var y=r.payload,N=y.id,_=y.isEnabled,w=e.dimensions.droppables[N];w||Et(),w.isEnabled===_&&Et();var C=Xe({},w,{isEnabled:_});return pa(e,C,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===r.type){if("DROP_PENDING"===e.phase)return e;Xn(e)||Et();var D=r.payload,I=D.id,S=D.isCombineEnabled,k=e.dimensions.droppables[I];k||Et(),k.isCombineEnabled===S&&Et();var E=Xe({},k,{isCombineEnabled:S});return pa(e,E,!0)}if("MOVE_BY_WINDOW_SCROLL"===r.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;Xn(e)||Et(),e.isWindowScrollAllowed||Et();var P=r.payload.newScroll;if(qt(e.viewport.scroll.current,P))return ma(e);var A=Tn(e.viewport,P);return ua(e)?la({state:e,viewport:A}):ia({state:e,viewport:A})}if("UPDATE_VIEWPORT_MAX_SCROLL"===r.type){if(!Xn(e))return e;var O=r.payload.maxScroll;if(qt(O,e.viewport.scroll.max))return e;var R=Xe({},e.viewport,{scroll:Xe({},e.viewport.scroll,{max:O})});return Xe({phase:"DRAGGING"},e,{viewport:R})}if("MOVE_UP"===r.type||"MOVE_DOWN"===r.type||"MOVE_LEFT"===r.type||"MOVE_RIGHT"===r.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Et();var L=Kn({state:e,type:r.type});return L?ia({state:e,impact:L.impact,clientSelection:L.clientSelection,scrollJumpRequest:L.scrollJumpRequest}):e}if("DROP_PENDING"===r.type){var B=r.payload.reason;return"COLLECTING"!==e.phase&&Et(),Xe({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:B})}if("DROP_ANIMATE"===r.type){var T=r.payload,M=T.completed,F=T.dropDuration,G=T.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Et(),{phase:"DROP_ANIMATING",completed:M,dropDuration:F,newHomeClientOffset:G,dimensions:e.dimensions}}return"DROP_COMPLETE"===r.type?{phase:"IDLE",completed:r.payload.completed,shouldFlush:!1}:e},xa=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},ha=function(){return{type:"COLLECTION_STARTING",payload:null}},va=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},ba=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},ja=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},ya=function(e){return{type:"MOVE",payload:e}},Na=function(){return{type:"MOVE_UP",payload:null}},_a=function(){return{type:"MOVE_DOWN",payload:null}},wa=function(){return{type:"MOVE_RIGHT",payload:null}},Ca=function(){return{type:"MOVE_LEFT",payload:null}},Da=function(e){return{type:"DROP_COMPLETE",payload:e}},Ia=function(e){return{type:"DROP",payload:e}},Sa=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},ka="cubic-bezier(.2,1,.1,1)",Ea={drop:0,combining:.7},Pa={drop:.75},Aa=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Oa={fluid:"opacity "+Aa,snap:"transform "+Aa+", opacity "+Aa,drop:function(e){var r=e+"s "+ka;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Aa,placeholder:"height "+Aa+", width "+Aa+", margin "+Aa},Ra=function(e){return qt(e,Gt)?null:"translate("+e.x+"px, "+e.y+"px)"},La=Ra,Ba=function(e,r){var t=Ra(e);return t?r?t+" scale("+Pa.drop+")":t:null},Ta=.33,Ma=.55,Fa=Ma-Ta,Ga=function(e){var r=e.getState,t=e.dispatch;return function(e){return function(n){if("DROP"===n.type){var a=r(),i=n.payload.reason;if("COLLECTING"!==a.phase){if("IDLE"!==a.phase){"DROP_PENDING"===a.phase&&a.isWaiting&&Et(),"DRAGGING"!==a.phase&&"DROP_PENDING"!==a.phase&&Et();var s=a.critical,o=a.dimensions,l=o.draggables[a.critical.draggable.id],c=function(e){var r=e.draggables,t=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,s=e.onLiftImpact;return n.at&&"DROP"===t?"REORDER"===n.at.type?{impact:n,didDropInsideDroppable:!0}:{impact:Xe({},n,{displaced:gn}),didDropInsideDroppable:!0}:{impact:sa({draggables:r,impact:s,destination:a,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),d=c.impact,u=c.didDropInsideDroppable,p=u?dn(d):null,m=u?un(d):null,f={index:s.draggable.index,droppableId:s.droppable.id},g={draggableId:l.descriptor.id,type:l.descriptor.type,source:f,reason:i,mode:a.movementMode,destination:p,combine:m},x=function(e){var r=e.impact,t=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,s=n.draggables,o=n.droppables,l=Jn(r),c=l?o[l]:null,d=o[t.descriptor.droppableId],u=oa({impact:r,draggable:t,draggables:s,afterCritical:i,droppable:c||d,viewport:a});return zt(u,t.client.borderBox.center)}({impact:d,draggable:l,dimensions:o,viewport:a.viewport,afterCritical:a.afterCritical}),h={critical:a.critical,afterCritical:a.afterCritical,result:g,impact:d};if(!qt(a.current.client.offset,x)||Boolean(g.combine)){var v=function(e){var r=e.current,t=e.destination,n=e.reason,a=Ht(r,t);if(a<=0)return Ta;if(a>=1500)return Ma;var i=Ta+Fa*(a/1500);return Number(("CANCEL"===n?.6*i:i).toFixed(2))}({current:a.current.client.offset,destination:x,reason:i});t(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:x,dropDuration:v,completed:h}))}else t(Da({completed:h}))}}else t(function(e){return{type:"DROP_PENDING",payload:e}}({reason:i}))}else e(n)}}},Ua=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function za(e){var r=e.onWindowScroll;var t,n=Ct(function(){r(Ua())}),a=(t=n,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||t()}}),i=It;function s(){return i!==It}return{start:function(){s()&&Et(),i=St(window,[a])},stop:function(){s()||Et(),n.cancel(),i(),i=It},isActive:s}}var qa=function(e){var r=za({onWindowScroll:function(r){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:r}})}});return function(e){return function(t){r.isActive()||"INITIAL_PUBLISH"!==t.type||r.start(),r.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(t)&&r.stop(),e(t)}}},Va=function(){var e=[];return{add:function(r){var t=setTimeout(function(){return function(r){var t=rn(e,function(e){return e.timerId===r});-1===t&&Et(),e.splice(t,1)[0].callback()}(t)}),n={timerId:t,callback:r};e.push(n)},flush:function(){if(e.length){var r=[].concat(e);e.length=0,r.forEach(function(e){clearTimeout(e.timerId),e.callback()})}}}},Wa=function(e,r){r()},Ha=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},$a=function(e,r,t,n){if(e){var a=function(e){var r=!1,t=!1,n=setTimeout(function(){t=!0}),a=function(a){r||t||(r=!0,e(a),clearTimeout(n))};return a.wasCalled=function(){return r},a}(t);e(r,{announce:a}),a.wasCalled()||t(n(r))}else t(n(r))},Ya=function(e,r){var t=function(e,r){var t=Va(),n=null,a=function(t){n||Et(),n=null,Wa(0,function(){return $a(e().onDragEnd,t,r,Ft)})};return{beforeCapture:function(r,t){n&&Et(),Wa(0,function(){var n=e().onBeforeCapture;n&&n({draggableId:r,mode:t})})},beforeStart:function(r,t){n&&Et(),Wa(0,function(){var n=e().onBeforeDragStart;n&&n(Ha(r,t))})},start:function(a,i){n&&Et();var s=Ha(a,i);n={mode:i,lastCritical:a,lastLocation:s.source,lastCombine:null},t.add(function(){Wa(0,function(){return $a(e().onDragStart,s,r,Tt)})})},update:function(a,i){var s=dn(i),o=un(i);n||Et();var l=!function(e,r){if(e===r)return!0;var t=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,n=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return t&&n}(a,n.lastCritical);l&&(n.lastCritical=a);var c,d,u=(d=s,!(null==(c=n.lastLocation)&&null==d||null!=c&&null!=d&&c.droppableId===d.droppableId&&c.index===d.index));u&&(n.lastLocation=s);var p=!function(e,r){return null==e&&null==r||null!=e&&null!=r&&e.draggableId===r.draggableId&&e.droppableId===r.droppableId}(n.lastCombine,o);if(p&&(n.lastCombine=o),l||u||p){var m=Xe({},Ha(a,n.mode),{combine:o,destination:s});t.add(function(){Wa(0,function(){return $a(e().onDragUpdate,m,r,Mt)})})}},flush:function(){n||Et(),t.flush()},drop:a,abort:function(){if(n){var e=Xe({},Ha(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});a(e)}}}}(e,r);return function(e){return function(r){return function(n){if("BEFORE_INITIAL_CAPTURE"!==n.type){if("INITIAL_PUBLISH"===n.type){var a=n.payload.critical;return t.beforeStart(a,n.payload.movementMode),r(n),void t.start(a,n.payload.movementMode)}if("DROP_COMPLETE"===n.type){var i=n.payload.completed.result;return t.flush(),r(n),void t.drop(i)}if(r(n),"FLUSH"!==n.type){var s=e.getState();"DRAGGING"===s.phase&&t.update(s.critical,s.impact)}else t.abort()}else t.beforeCapture(n.payload.draggableId,n.payload.movementMode)}}}},Ja=function(e){return function(r){return function(t){if("DROP_ANIMATION_FINISHED"===t.type){var n=e.getState();"DROP_ANIMATING"!==n.phase&&Et(),e.dispatch(Da({completed:n.completed}))}else r(t)}}},Ka=function(e){var r=null,t=null;return function(n){return function(a){if("FLUSH"!==a.type&&"DROP_COMPLETE"!==a.type&&"DROP_ANIMATION_FINISHED"!==a.type||(t&&(cancelAnimationFrame(t),t=null),r&&(r(),r=null)),n(a),"DROP_ANIMATE"===a.type){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};t=requestAnimationFrame(function(){t=null,r=St(window,[i])})}}}},Xa=function(e){return function(r){return function(t){if(r(t),"PUBLISH_WHILE_DRAGGING"===t.type){var n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(Ia({reason:n.reason})))}}}},Qa=dr,Za=function(e){var r,t=e.dimensionMarshal,n=e.focusMarshal,a=e.styleMarshal,i=e.getResponders,s=e.announce,o=e.autoScroller;return or(ga,Qa(function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e){return function(){var t=e.apply(void 0,arguments),n=function(){throw new Error(nr(15))},a={getState:t.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=r.map(function(e){return e(a)});return n=dr.apply(void 0,i)(t.dispatch),tr(tr({},t),{},{dispatch:n})}}}((r=a,function(){return function(e){return function(t){"INITIAL_PUBLISH"===t.type&&r.dragging(),"DROP_ANIMATE"===t.type&&r.dropping(t.payload.completed.result.reason),"FLUSH"!==t.type&&"DROP_COMPLETE"!==t.type||r.resting(),e(t)}}}),function(e){return function(){return function(r){return function(t){"DROP_COMPLETE"!==t.type&&"FLUSH"!==t.type&&"DROP_ANIMATE"!==t.type||e.stopPublishing(),r(t)}}}}(t),function(e){return function(r){var t=r.getState,n=r.dispatch;return function(r){return function(a){if("LIFT"===a.type){var i=a.payload,s=i.id,o=i.clientSelection,l=i.movementMode,c=t();"DROP_ANIMATING"===c.phase&&n(Da({completed:c.completed})),"IDLE"!==t().phase&&Et(),n({type:"FLUSH",payload:null}),n({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:s,movementMode:l}});var d={draggableId:s,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},u=e.startPublishing(d),p=u.critical,m=u.dimensions,f=u.viewport;n({type:"INITIAL_PUBLISH",payload:{critical:p,dimensions:m,clientSelection:o,movementMode:l,viewport:f}})}else r(a)}}}}(t),Ga,Ja,Ka,Xa,function(e){return function(r){return function(t){return function(n){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n))return e.stop(),void t(n);if("INITIAL_PUBLISH"===n.type){t(n);var a=r.getState();return"DRAGGING"!==a.phase&&Et(),void e.start(a)}t(n),e.scroll(r.getState())}}}}(o),qa,function(e){var r=!1;return function(){return function(t){return function(n){if("INITIAL_PUBLISH"===n.type)return r=!0,e.tryRecordFocus(n.payload.critical.draggable.id),t(n),void e.tryRestoreFocusRecorded();if(t(n),r){if("FLUSH"===n.type)return r=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===n.type){r=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(n),Ya(i,s))))};var ei=function(e){var r=e.scrollHeight,t=e.scrollWidth,n=e.height,a=e.width,i=zt({x:t,y:r},{x:a,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},ri=function(){var e=document.documentElement;return e||Et(),e},ti=function(){var e=ri();return ei({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},ni=function(e){var r,t,n,a,i,s,o,l=e.critical,c=e.scrollOptions,d=e.registry,u=(r=Ua(),t=ti(),n=r.y,a=r.x,i=ri(),s=i.clientWidth,o=i.clientHeight,{frame:ut({top:n,left:a,right:a+s,bottom:n+o}),scroll:{initial:r,current:r,max:t,diff:{value:Gt,displacement:Gt}}}),p=u.scroll.current,m=l.droppable,f=d.droppable.getAllByType(m.type).map(function(e){return e.callbacks.getDimensionAndWatchScroll(p,c)}),g=d.draggable.getAllByType(l.draggable.type).map(function(e){return e.getDimension(p)});return{dimensions:{draggables:sn(g),droppables:an(f)},critical:l,viewport:u}};function ai(e,r,t){return t.descriptor.id!==r.id&&(t.descriptor.type===r.type&&"virtual"===e.droppable.getById(t.descriptor.droppableId).descriptor.mode)}var ii,si=function(e,r){var t=null,n=function(e){var r=e.registry,t=e.callbacks,n={additions:{},removals:{},modified:{}},a=null,i=function(){a||(t.collectionStarting(),a=requestAnimationFrame(function(){a=null;var e=n,i=e.additions,s=e.removals,o=e.modified,l=Object.keys(i).map(function(e){return r.draggable.getById(e).getDimension(Gt)}).sort(function(e,r){return e.descriptor.index-r.descriptor.index}),c=Object.keys(o).map(function(e){return{droppableId:e,scroll:r.droppable.getById(e).callbacks.getScrollWhileDragging()}}),d={additions:l,removals:Object.keys(s),modified:c};n={additions:{},removals:{},modified:{}},t.publish(d)}))};return{add:function(e){var r=e.descriptor.id;n.additions[r]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[r]&&delete n.removals[r],i()},remove:function(e){var r=e.descriptor;n.removals[r.id]=!0,n.modified[r.droppableId]=!0,n.additions[r.id]&&delete n.additions[r.id],i()},stop:function(){a&&(cancelAnimationFrame(a),a=null,n={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:e}),a=function(r){t||Et();var a=t.critical.draggable;"ADDITION"===r.type&&ai(e,a,r.value)&&n.add(r.value),"REMOVAL"===r.type&&ai(e,a,r.value)&&n.remove(r.value)};return{updateDroppableIsEnabled:function(n,a){e.droppable.exists(n)||Et(),t&&r.updateDroppableIsEnabled({id:n,isEnabled:a})},updateDroppableIsCombineEnabled:function(n,a){t&&(e.droppable.exists(n)||Et(),r.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:a}))},scrollDroppable:function(r,n){t&&e.droppable.getById(r).callbacks.scroll(n)},updateDroppableScroll:function(n,a){t&&(e.droppable.exists(n)||Et(),r.updateDroppableScroll({id:n,newScroll:a}))},startPublishing:function(r){t&&Et();var n=e.draggable.getById(r.draggableId),i=e.droppable.getById(n.descriptor.droppableId),s={draggable:n.descriptor,droppable:i.descriptor},o=e.subscribe(a);return t={critical:s,unsubscribe:o},ni({critical:s,registry:e,scrollOptions:r.scrollOptions})},stopPublishing:function(){if(t){n.stop();var r=t.critical.droppable;e.droppable.getAllByType(r.type).forEach(function(e){return e.callbacks.dragStopped()}),t.unsubscribe(),t=null}}}},oi=function(e,r){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==r&&"DROP"===e.completed.result.reason)},li=function(e){window.scrollBy(e.x,e.y)},ci=wt(function(e){return on(e).filter(function(e){return!!e.isEnabled&&!!e.frame})}),di=function(e){var r=e.center,t=e.destination,n=e.droppables;if(t){var a=n[t];return a.frame?a:null}var i=function(e,r){return tn(ci(r),function(r){return r.frame||Et(),Qn(r.frame.pageMarginBox)(e)})}(r,n);return i},ui=.25,pi=.05,mi=28,fi=function(e){return Math.pow(e,2)},gi={stopDampeningAt:1200,accelerateAt:360},xi=function(e){var r=e.startOfRange,t=e.endOfRange,n=e.current,a=t-r;return 0===a?0:(n-r)/a},hi=gi.accelerateAt,vi=gi.stopDampeningAt,bi=function(e){var r=e.distanceToEdge,t=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=function(e,r){if(e>r.startScrollingFrom)return 0;if(e<=r.maxScrollValueAt)return mi;if(e===r.startScrollingFrom)return 1;var t=xi({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:e}),n=mi*fi(1-t);return Math.ceil(n)}(r,t);return 0===i?0:a?Math.max(function(e,r){var t=r,n=vi,a=Date.now()-t;if(a>=vi)return e;if(a<hi)return 1;var i=xi({startOfRange:hi,endOfRange:n,current:a}),s=e*fi(i);return Math.ceil(s)}(i,n),1):i},ji=function(e){var r=e.container,t=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,s=function(e,r){return{startScrollingFrom:e[r.size]*ui,maxScrollValueAt:e[r.size]*pi}}(r,a);return t[a.end]<t[a.start]?bi({distanceToEdge:t[a.end],thresholds:s,dragStartTime:n,shouldUseTimeDampening:i}):-1*bi({distanceToEdge:t[a.start],thresholds:s,dragStartTime:n,shouldUseTimeDampening:i})},yi=Yt(function(e){return 0===e?0:e}),Ni=function(e){var r=e.dragStartTime,t=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,s={top:a.y-t.top,right:t.right-a.x,bottom:t.bottom-a.y,left:a.x-t.left},o=ji({container:t,distanceToEdges:s,dragStartTime:r,axis:jn,shouldUseTimeDampening:i}),l=ji({container:t,distanceToEdges:s,dragStartTime:r,axis:yn,shouldUseTimeDampening:i}),c=yi({x:l,y:o});if(qt(c,Gt))return null;var d=function(e){var r=e.container,t=e.subject,n=e.proposedScroll,a=t.height>r.height,i=t.width>r.width;return i||a?i&&a?null:{x:i?0:n.x,y:a?0:n.y}:n}({container:t,subject:n,proposedScroll:c});return d?qt(d,Gt)?null:d:null},_i=Yt(function(e){return 0===e?0:e>0?1:-1}),wi=function(){var e=function(e,r){return e<0?e:e>r?e-r:0};return function(r){var t=r.current,n=r.max,a=r.change,i=Ut(t,a),s={x:e(i.x,n.x),y:e(i.y,n.y)};return qt(s,Gt)?null:s}}(),Ci=function(e){var r=e.max,t=e.current,n=e.change,a={x:Math.max(t.x,r.x),y:Math.max(t.y,r.y)},i=_i(n),s=wi({max:a,current:t,change:i});return!s||(0!==i.x&&0===s.x||0!==i.y&&0===s.y)},Di=function(e,r){return Ci({current:e.scroll.current,max:e.scroll.max,change:r})},Ii=function(e,r){var t=e.frame;return!!t&&Ci({current:t.scroll.current,max:t.scroll.max,change:r})},Si=function(e){var r=e.state,t=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,s=r.current.page.borderBoxCenter,o=r.dimensions.draggables[r.critical.draggable.id].page.marginBox;if(r.isWindowScrollAllowed){var l=function(e){var r=e.viewport,t=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,s=Ni({dragStartTime:a,container:r.frame,subject:t,center:n,shouldUseTimeDampening:i});return s&&Di(r,s)?s:null}({dragStartTime:t,viewport:r.viewport,subject:o,center:s,shouldUseTimeDampening:n});if(l)return void a(l)}var c=di({center:s,destination:Jn(r.impact),droppables:r.dimensions.droppables});if(c){var d=function(e){var r=e.droppable,t=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,s=r.frame;if(!s)return null;var o=Ni({dragStartTime:a,container:s.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i});return o&&Ii(r,o)?o:null}({dragStartTime:t,droppable:c,subject:o,center:s,shouldUseTimeDampening:n});d&&i(c.descriptor.id,d)}},ki=function(e){var r=e.move,t=e.scrollDroppable,n=e.scrollWindow,a=function(e,r){if(!Ii(e,r))return r;var n=function(e,r){var t=e.frame;return t&&Ii(e,r)?wi({current:t.scroll.current,max:t.scroll.max,change:r}):null}(e,r);if(!n)return t(e.descriptor.id,r),null;var a=zt(r,n);return t(e.descriptor.id,a),zt(r,a)},i=function(e,r,t){if(!e)return t;if(!Di(r,t))return t;var a=function(e,r){if(!Di(e,r))return null;var t=e.scroll.max,n=e.scroll.current;return wi({current:n,max:t,change:r})}(r,t);if(!a)return n(t),null;var i=zt(t,a);return n(i),zt(t,i)};return function(e){var t=e.scrollJumpRequest;if(t){var n=Jn(e.impact);n||Et();var s=a(e.dimensions.droppables[n],t);if(s){var o=e.viewport,l=i(e.isWindowScrollAllowed,o,s);l&&function(e,t){var n=Ut(e.current.client.selection,t);r({client:n})}(e,l)}}}},Ei=function(e){var r=e.scrollDroppable,t=e.scrollWindow,n=e.move,a=function(e){var r=e.scrollWindow,t=e.scrollDroppable,n=Ct(r),a=Ct(t),i=null,s=function(e){i||Et();var r=i,t=r.shouldUseTimeDampening,s=r.dragStartTime;Si({state:e,scrollWindow:n,scrollDroppable:a,dragStartTime:s,shouldUseTimeDampening:t})};return{start:function(e){i&&Et();var r=Date.now(),t=!1,n=function(){t=!0};Si({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:n,scrollDroppable:n}),i={dragStartTime:r,shouldUseTimeDampening:t},t&&s(e)},stop:function(){i&&(n.cancel(),a.cancel(),i=null)},scroll:s}}({scrollWindow:t,scrollDroppable:r}),i=ki({move:n,scrollWindow:t,scrollDroppable:r});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&i(e):a.scroll(e))},start:a.start,stop:a.stop}},Pi="data-rbd",Ai={base:ii=Pi+"-drag-handle",draggableId:ii+"-draggable-id",contextId:ii+"-context-id"},Oi=function(){var e=Pi+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Ri=function(){var e=Pi+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Li={contextId:Pi+"-scroll-container-context-id"},Bi=function(e,r){return e.map(function(e){var t=e.styles[r];return t?e.selector+" { "+t+" }":""}).join(" ")},Ti="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,Mi=function(){var e=document.querySelector("head");return e||Et(),e},Fi=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function Gi(e,t){var n=ct(function(){return function(e){var r,t,n,a=(r=e,function(e){return"["+e+'="'+r+'"]'}),i=(t="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:a(Ai.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:t,dragging:"pointer-events: none;",dropAnimating:t}}),s=[(n="\n      transition: "+Oa.outOfTheWay+";\n    ",{selector:a(Oi.contextId),styles:{dragging:n,dropAnimating:n,userCancel:n}}),i,{selector:a(Ri.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Bi(s,"always"),resting:Bi(s,"resting"),dragging:Bi(s,"dragging"),dropAnimating:Bi(s,"dropAnimating"),userCancel:Bi(s,"userCancel")}}(e)},[e]),a=r.useRef(null),i=r.useRef(null),s=dt(wt(function(e){var r=i.current;r||Et(),r.textContent=e}),[]),o=dt(function(e){var r=a.current;r||Et(),r.textContent=e},[]);Ti(function(){(a.current||i.current)&&Et();var r=Fi(t),l=Fi(t);return a.current=r,i.current=l,r.setAttribute(Pi+"-always",e),l.setAttribute(Pi+"-dynamic",e),Mi().appendChild(r),Mi().appendChild(l),o(n.always),s(n.resting),function(){var e=function(e){var r=e.current;r||Et(),Mi().removeChild(r),e.current=null};e(a),e(i)}},[t,o,s,n.always,n.resting,e]);var l=dt(function(){return s(n.dragging)},[s,n.dragging]),c=dt(function(e){s("DROP"!==e?n.userCancel:n.dropAnimating)},[s,n.dropAnimating,n.userCancel]),d=dt(function(){i.current&&s(n.resting)},[s,n.resting]);return ct(function(){return{dragging:l,dropping:c,resting:d}},[l,c,d])}var Ui=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function zi(e){return e instanceof Ui(e).HTMLElement}function qi(e){var t=r.useRef({}),n=r.useRef(null),a=r.useRef(null),i=r.useRef(!1),s=dt(function(e,r){var n={id:e,focus:r};return t.current[e]=n,function(){var r=t.current;r[e]!==n&&delete r[e]}},[]),o=dt(function(r){var t=function(e,r){var t="["+Ai.contextId+'="'+e+'"]',n=nn(document.querySelectorAll(t));if(!n.length)return null;var a=tn(n,function(e){return e.getAttribute(Ai.draggableId)===r});return a&&zi(a)?a:null}(e,r);t&&t!==document.activeElement&&t.focus()},[e]),l=dt(function(e,r){n.current===e&&(n.current=r)},[]),c=dt(function(){a.current||i.current&&(a.current=requestAnimationFrame(function(){a.current=null;var e=n.current;e&&o(e)}))},[o]),d=dt(function(e){n.current=null;var r=document.activeElement;r&&r.getAttribute(Ai.draggableId)===e&&(n.current=e)},[]);return Ti(function(){return i.current=!0,function(){i.current=!1;var e=a.current;e&&cancelAnimationFrame(e)}},[]),ct(function(){return{register:s,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[s,d,c,l])}function Vi(){var e={draggables:{},droppables:{}},r=[];function t(e){r.length&&r.forEach(function(r){return r(e)})}function n(r){return e.draggables[r]||null}function a(r){return e.droppables[r]||null}return{draggable:{register:function(r){e.draggables[r.descriptor.id]=r,t({type:"ADDITION",value:r})},update:function(r,t){var n=e.draggables[t.descriptor.id];n&&n.uniqueId===r.uniqueId&&(delete e.draggables[t.descriptor.id],e.draggables[r.descriptor.id]=r)},unregister:function(r){var a=r.descriptor.id,i=n(a);i&&r.uniqueId===i.uniqueId&&(delete e.draggables[a],t({type:"REMOVAL",value:r}))},getById:function(e){var r=n(e);return r||Et(),r},findById:n,exists:function(e){return Boolean(n(e))},getAllByType:function(r){return en(e.draggables).filter(function(e){return e.descriptor.type===r})}},droppable:{register:function(r){e.droppables[r.descriptor.id]=r},unregister:function(r){var t=a(r.descriptor.id);t&&r.uniqueId===t.uniqueId&&delete e.droppables[r.descriptor.id]},getById:function(e){var r=a(e);return r||Et(),r},findById:a,exists:function(e){return Boolean(a(e))},getAllByType:function(r){return en(e.droppables).filter(function(e){return e.descriptor.type===r})}},subscribe:function(e){return r.push(e),function(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}},clean:function(){e.draggables={},e.droppables={},r.length=0}}}var Wi=c.createContext(null),Hi=function(){var e=document.body;return e||Et(),e},$i={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var Yi=0,Ji={separator:"::"};function Ki(e,r){return void 0===r&&(r=Ji),ct(function(){return""+e+r.separator+Yi++},[r.separator,e])}var Xi=c.createContext(null);function Qi(e){var t=r.useRef(e);return r.useEffect(function(){t.current=e}),t}var Zi,es=((Zi={})[13]=!0,Zi[9]=!0,Zi),rs=function(e){es[e.keyCode]&&e.preventDefault()},ts=function(){var e="visibilitychange";return"undefined"==typeof document?e:tn([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],function(e){return"on"+e in document})||e}();var ns,as={type:"IDLE"};function is(e){var r=e.cancel,t=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(e){var r=e.button,t=e.clientX,i=e.clientY;if(0===r){var s={x:t,y:i},o=n();if("DRAGGING"===o.type)return e.preventDefault(),void o.actions.move(s);"PENDING"!==o.type&&Et();var l=o.point;if(c=l,d=s,Math.abs(d.x-c.x)>=5||Math.abs(d.y-c.y)>=5){var c,d;e.preventDefault();var u=o.actions.fluidLift(s);a({type:"DRAGGING",actions:u})}}}},{eventName:"mouseup",fn:function(e){var a=n();"DRAGGING"===a.type?(e.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()):r()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===n().type&&e.preventDefault(),r()}},{eventName:"keydown",fn:function(e){if("PENDING"!==n().type)return 27===e.keyCode?(e.preventDefault(),void r()):void rs(e);r()}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===n().type&&r()}},{eventName:"webkitmouseforcedown",fn:function(e){var t=n();"IDLE"===t.type&&Et(),t.actions.shouldRespectForcePress()?r():e.preventDefault()}},{eventName:ts,fn:r}]}function ss(){}var os=((ns={})[34]=!0,ns[33]=!0,ns[36]=!0,ns[35]=!0,ns);function ls(e,r){function t(){r(),e.cancel()}return[{eventName:"keydown",fn:function(n){return 27===n.keyCode?(n.preventDefault(),void t()):32===n.keyCode?(n.preventDefault(),r(),void e.drop()):40===n.keyCode?(n.preventDefault(),void e.moveDown()):38===n.keyCode?(n.preventDefault(),void e.moveUp()):39===n.keyCode?(n.preventDefault(),void e.moveRight()):37===n.keyCode?(n.preventDefault(),void e.moveLeft()):void(os[n.keyCode]?n.preventDefault():rs(n))}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:ts,fn:t}]}var cs={type:"IDLE"};var ds={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function us(e,r){if(null==r)return!1;if(Boolean(ds[r.tagName.toLowerCase()]))return!0;var t=r.getAttribute("contenteditable");return"true"===t||""===t||r!==e&&us(e,r.parentElement)}function ps(e,r){var t=r.target;return!!zi(t)&&us(e,t)}var ms=function(e){return ut(e.getBoundingClientRect()).center};var fs=function(){var e="matches";return"undefined"==typeof document?e:tn([e,"msMatchesSelector","webkitMatchesSelector"],function(e){return e in Element.prototype})||e}();function gs(e,r){return null==e?null:e[fs](r)?e:gs(e.parentElement,r)}function xs(e,r){return e.closest?e.closest(r):gs(e,r)}function hs(e,r){var t,n=r.target;if(!((t=n)instanceof Ui(t).Element))return null;var a=function(e){return"["+Ai.contextId+'="'+e+'"]'}(e),i=xs(n,a);return i&&zi(i)?i:null}function vs(e){e.preventDefault()}function bs(e){var r=e.expected,t=e.phase,n=e.isLockActive;return e.shouldWarn,!!n()&&r===t}function js(e){var r=e.lockAPI,t=e.store,n=e.registry,a=e.draggableId;if(r.isClaimed())return!1;var i=n.draggable.findById(a);return!!i&&(!!i.options.isEnabled&&!!oi(t.getState(),a))}function ys(e){var r=e.lockAPI,t=e.contextId,n=e.store,a=e.registry,i=e.draggableId,s=e.forceSensorStop,o=e.sourceEvent;if(!js({lockAPI:r,store:n,registry:a,draggableId:i}))return null;var l=a.draggable.getById(i),c=function(e,r){var t="["+Oi.contextId+'="'+e+'"]',n=tn(nn(document.querySelectorAll(t)),function(e){return e.getAttribute(Oi.id)===r});return n&&zi(n)?n:null}(t,l.descriptor.id);if(!c)return null;if(o&&!l.options.canDragInteractiveElements&&ps(c,o))return null;var d=r.claim(s||It),u="PRE_DRAG";function p(){return l.options.shouldRespectForcePress}function m(){return r.isActive(d)}var f=function(e,r){bs({expected:e,phase:u,isLockActive:m,shouldWarn:!0})&&n.dispatch(r())}.bind(null,"DRAGGING");function g(e){function t(){r.release(),u="COMPLETED"}function a(r,a){if(void 0===a&&(a={shouldBlockNextClick:!1}),e.cleanup(),a.shouldBlockNextClick){var i=St(window,[{eventName:"click",fn:vs,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(i)}t(),n.dispatch(Ia({reason:r}))}return"PRE_DRAG"!==u&&(t(),"PRE_DRAG"!==u&&Et()),n.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),u="DRAGGING",Xe({isActive:function(){return bs({expected:"DRAGGING",phase:u,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return a("DROP",e)},cancel:function(e){return a("CANCEL",e)}},e.actions)}return{isActive:function(){return bs({expected:"PRE_DRAG",phase:u,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var r=Ct(function(e){f(function(){return ya({client:e})})});return Xe({},g({liftActionArgs:{id:i,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return r.cancel()},actions:{move:r}}),{move:r})},snapLift:function(){var e={moveUp:function(){return f(Na)},moveRight:function(){return f(wa)},moveDown:function(){return f(_a)},moveLeft:function(){return f(Ca)}};return g({liftActionArgs:{id:i,clientSelection:ms(c),movementMode:"SNAP"},cleanup:It,actions:e})},abort:function(){bs({expected:"PRE_DRAG",phase:u,isLockActive:m,shouldWarn:!0})&&r.release()}}}var Ns=[function(e){var t=r.useRef(as),n=r.useRef(It),a=ct(function(){return{eventName:"mousedown",fn:function(r){if(!r.defaultPrevented&&0===r.button&&!(r.ctrlKey||r.metaKey||r.shiftKey||r.altKey)){var t=e.findClosestDraggableId(r);if(t){var a=e.tryGetLock(t,o,{sourceEvent:r});if(a){r.preventDefault();var i={x:r.clientX,y:r.clientY};n.current(),d(a,i)}}}}}},[e]),i=ct(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(r){if(!r.defaultPrevented){var t=e.findClosestDraggableId(r);if(t){var n=e.findOptionsForDraggable(t);n&&(n.shouldRespectForcePress||e.canGetLock(t)&&r.preventDefault())}}}}},[e]),s=dt(function(){n.current=St(window,[i,a],{passive:!1,capture:!0})},[i,a]),o=dt(function(){"IDLE"!==t.current.type&&(t.current=as,n.current(),s())},[s]),l=dt(function(){var e=t.current;o(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[o]),c=dt(function(){var e=is({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=St(window,e,{capture:!0,passive:!1})},[l,o]),d=dt(function(e,r){"IDLE"!==t.current.type&&Et(),t.current={type:"PENDING",point:r,actions:e},c()},[c]);Ti(function(){return s(),function(){n.current()}},[s])},function(e){var t=r.useRef(ss),n=ct(function(){return{eventName:"keydown",fn:function(r){if(!r.defaultPrevented&&32===r.keyCode){var n=e.findClosestDraggableId(r);if(n){var i=e.tryGetLock(n,l,{sourceEvent:r});if(i){r.preventDefault();var s=!0,o=i.snapLift();t.current(),t.current=St(window,ls(o,l),{capture:!0,passive:!1})}}}function l(){s||Et(),s=!1,t.current(),a()}}}},[e]),a=dt(function(){t.current=St(window,[n],{passive:!1,capture:!0})},[n]);Ti(function(){return a(),function(){t.current()}},[a])},function(e){var t=r.useRef(cs),n=r.useRef(It),a=dt(function(){return t.current},[]),i=dt(function(e){t.current=e},[]),s=ct(function(){return{eventName:"touchstart",fn:function(r){if(!r.defaultPrevented){var t=e.findClosestDraggableId(r);if(t){var a=e.tryGetLock(t,l,{sourceEvent:r});if(a){var i=r.touches[0],s={x:i.clientX,y:i.clientY};n.current(),p(a,s)}}}}}},[e]),o=dt(function(){n.current=St(window,[s],{capture:!0,passive:!1})},[s]),l=dt(function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),i(cs),n.current(),o())},[o,i]),c=dt(function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[l]),d=dt(function(){var e={capture:!0,passive:!1},r={cancel:c,completed:l,getPhase:a},t=St(window,function(e){var r=e.cancel,t=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var t=n();if("DRAGGING"===t.type){t.hasMoved=!0;var a=e.touches[0],i={x:a.clientX,y:a.clientY};e.preventDefault(),t.actions.move(i)}else r()}},{eventName:"touchend",fn:function(e){var a=n();"DRAGGING"===a.type?(e.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()):r()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===n().type?(e.preventDefault(),r()):r()}},{eventName:"touchforcechange",fn:function(e){var t=n();"IDLE"===t.type&&Et();var a=e.touches[0];if(a&&a.force>=.15){var i=t.actions.shouldRespectForcePress();if("PENDING"!==t.type)return i?t.hasMoved?void e.preventDefault():void r():void e.preventDefault();i&&r()}}},{eventName:ts,fn:r}]}(r),e),i=St(window,function(e){var r=e.cancel,t=e.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===t().type?(27===e.keyCode&&e.preventDefault(),r()):r()}},{eventName:ts,fn:r}]}(r),e);n.current=function(){t(),i()}},[c,a,l]),u=dt(function(){var e=a();"PENDING"!==e.type&&Et();var r=e.actions.fluidLift(e.point);i({type:"DRAGGING",actions:r,hasMoved:!1})},[a,i]),p=dt(function(e,r){"IDLE"!==a().type&&Et();var t=setTimeout(u,120);i({type:"PENDING",point:r,actions:e,longPressTimerId:t}),d()},[d,a,i,u]);Ti(function(){return o(),function(){n.current();var e=a();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),i(cs))}},[a,o,i]),Ti(function(){return St(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])},[])}];function _s(e){var t=e.contextId,n=e.store,a=e.registry,i=e.customSensors,s=e.enableDefaultSensors,o=[].concat(s?Ns:[],i||[]),l=r.useState(function(){return function(){var e=null;function r(){e||Et(),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(r){return r===e},claim:function(r){e&&Et();var t={abandon:r};return e=t,t},release:r,tryAbandon:function(){e&&(e.abandon(),r())}}}()})[0],c=dt(function(e,r){e.isDragging&&!r.isDragging&&l.tryAbandon()},[l]);Ti(function(){var e=n.getState();return n.subscribe(function(){var r=n.getState();c(e,r),e=r})},[l,n,c]),Ti(function(){return l.tryAbandon},[l.tryAbandon]);for(var d=dt(function(e){return js({lockAPI:l,registry:a,store:n,draggableId:e})},[l,a,n]),u=dt(function(e,r,i){return ys({lockAPI:l,registry:a,contextId:t,store:n,draggableId:e,forceSensorStop:r,sourceEvent:i&&i.sourceEvent?i.sourceEvent:null})},[t,l,a,n]),p=dt(function(e){return function(e,r){var t=hs(e,r);return t?t.getAttribute(Ai.draggableId):null}(t,e)},[t]),m=dt(function(e){var r=a.draggable.findById(e);return r?r.options:null},[a.draggable]),f=dt(function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))},[l,n]),g=dt(l.isClaimed,[l]),x=ct(function(){return{canGetLock:d,tryGetLock:u,findClosestDraggableId:p,findOptionsForDraggable:m,tryReleaseLock:f,isLockClaimed:g}},[d,u,p,m,f,g]),h=0;h<o.length;h++)o[h](x)}function ws(e){return e.current||Et(),e.current}function Cs(e){var t=e.contextId,n=e.setCallbacks,a=e.sensors,i=e.nonce,s=e.dragHandleUsageInstructions,o=r.useRef(null),l=Qi(e),d=dt(function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(l.current)},[l]),u=function(e){var t=ct(function(){return function(e){return"rbd-announcement-"+e}(e)},[e]),n=r.useRef(null);return r.useEffect(function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),Xe(e.style,$i),Hi().appendChild(e),function(){setTimeout(function(){var r=Hi();r.contains(e)&&r.removeChild(e),e===n.current&&(n.current=null)})}},[t]),dt(function(e){var r=n.current;r&&(r.textContent=e)},[])}(t),p=function(e){var t=e.contextId,n=e.text,a=Ki("hidden-text",{separator:"-"}),i=ct(function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:a}).contextId+"-"+e.uniqueId;var e},[a,t]);return r.useEffect(function(){var e=document.createElement("div");return e.id=i,e.textContent=n,e.style.display="none",Hi().appendChild(e),function(){var r=Hi();r.contains(e)&&r.removeChild(e)}},[i,n]),i}({contextId:t,text:s}),m=Gi(t,i),f=dt(function(e){ws(o).dispatch(e)},[]),g=ct(function(){return cr({publishWhileDragging:xa,updateDroppableScroll:va,updateDroppableIsEnabled:ba,updateDroppableIsCombineEnabled:ja,collectionStarting:ha},f)},[f]),x=function(){var e=ct(Vi,[]);return r.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}(),h=ct(function(){return si(x,g)},[x,g]),v=ct(function(){return Ei(Xe({scrollWindow:li,scrollDroppable:h.scrollDroppable},cr({move:ya},f)))},[h.scrollDroppable,f]),b=qi(t),j=ct(function(){return Za({announce:u,autoScroller:v,dimensionMarshal:h,focusMarshal:b,getResponders:d,styleMarshal:m})},[u,v,h,b,d,m]);o.current=j;var y=dt(function(){var e=ws(o);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})},[]),N=dt(function(){var e=ws(o).getState();return e.isDragging||"DROP_ANIMATING"===e.phase},[]);n(ct(function(){return{isDragging:N,tryAbort:y}},[N,y]));var _=dt(function(e){return oi(ws(o).getState(),e)},[]),w=dt(function(){return Xn(ws(o).getState())},[]),C=ct(function(){return{marshal:h,focus:b,contextId:t,canLift:_,isMovementAllowed:w,dragHandleUsageInstructionsId:p,registry:x}},[t,h,p,b,_,w,x]);return _s({contextId:t,store:j,registry:x,customSensors:a,enableDefaultSensors:!1!==e.enableDefaultSensors}),r.useEffect(function(){return y},[y]),c.createElement(Xi.Provider,{value:C},c.createElement(hr,{context:Wi,store:j},e.children))}var Ds=0;function Is(e){var r=ct(function(){return""+Ds++},[]),t=e.dragHandleUsageInstructions||Bt;return c.createElement(Pt,null,function(n){return c.createElement(Cs,{nonce:e.nonce,contextId:r,setCallbacks:n,dragHandleUsageInstructions:t,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Ss=function(e){return function(r){return e===r}},ks=Ss("scroll"),Es=Ss("auto"),Ps=function(e,r){return r(e.overflowX)||r(e.overflowY)},As=function e(r){return null==r||r===document.body||r===document.documentElement?null:function(e){var r=window.getComputedStyle(e),t={overflowX:r.overflowX,overflowY:r.overflowY};return Ps(t,ks)||Ps(t,Es)}(r)?r:e(r.parentElement)},Os=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Rs=function e(r){return!!r&&("fixed"===window.getComputedStyle(r).position||e(r.parentElement))},Ls=function(e){return{closestScrollable:As(e),isFixedOnPage:Rs(e)}},Bs=function(e){var r=e.ref,t=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,s=e.isDropDisabled,o=e.isCombineEnabled,l=e.shouldClipSubject,c=n.closestScrollable,d=function(e,r){var t=jt(e);if(!r)return t;if(e!==r)return t;var n=t.paddingBox.top-r.scrollTop,a=t.paddingBox.left-r.scrollLeft,i=n+r.scrollHeight,s=a+r.scrollWidth,o=pt({top:n,right:s,bottom:i,left:a},t.border);return gt({borderBox:o,margin:t.margin,border:t.border,padding:t.padding})}(r,c),u=vt(d,a),p=function(){if(!c)return null;var e=jt(c),r={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:vt(e,a),scroll:Os(c),scrollSize:r,shouldClipSubject:l}}(),m=function(e){var r=e.descriptor,t=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,s=e.client,o=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,r=l.client,t=ei({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:r.paddingBox.height,width:r.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:r,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:t,diff:{value:Gt,displacement:Gt}}}}(),d="vertical"===i?jn:yn;return{descriptor:r,isCombineEnabled:n,isFixedOnPage:a,axis:d,isEnabled:t,client:s,page:o,frame:c,subject:Qt({page:o,withPlaceholder:null,axis:d,frame:c})}}({descriptor:t,isEnabled:!s,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:d,page:u,closest:p});return m},Ts={passive:!1},Ms={passive:!0},Fs=function(e){return e.shouldPublishImmediately?Ts:Ms};function Gs(e){var t=r.useContext(e);return t||Et(),t}var Us=function(e){return e&&e.env.closestScrollable||null};function zs(){}var qs={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Vs=function(e){var r=e.isAnimatingOpenOnMount,t=e.placeholder,n=e.animate,a=function(e){var r=e.isAnimatingOpenOnMount,t=e.placeholder,n=e.animate;return r||"close"===n?qs:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin}}({isAnimatingOpenOnMount:r,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==n?Oa.placeholder:null}};var Ws=c.memo(function(e){var t=r.useRef(null),n=dt(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),a=e.animate,i=e.onTransitionEnd,s=e.onClose,o=e.contextId,l=r.useState("open"===e.animate),d=l[0],u=l[1];r.useEffect(function(){return d?"open"!==a?(n(),u(!1),zs):t.current?zs:(t.current=setTimeout(function(){t.current=null,u(!1)}),n):zs},[a,d,n]);var p=dt(function(e){"height"===e.propertyName&&(i(),"close"===a&&s())},[a,s,i]),m=Vs({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return c.createElement(e.placeholder.tagName,{style:m,"data-rbd-placeholder-context-id":o,onTransitionEnd:p,ref:e.innerRef})}),Hs=c.createContext(null),$s=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(r=e.call.apply(e,[this].concat(n))||this).state={isVisible:Boolean(r.props.on),data:r.props.on,animate:r.props.shouldAnimate&&r.props.on?"open":"none"},r.onClose=function(){"close"===r.state.animate&&r.setState({isVisible:!1})},r}return Ke(r,e),r.getDerivedStateFromProps=function(e,r){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},r.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},r}(c.PureComponent),Ys=5e3,Js=4500,Ks=function(e,r){return r?Oa.drop(r.duration):e?Oa.snap:Oa.fluid},Xs=function(e,r){return e?r?Ea.drop:Ea.combining:null};function Qs(e){return"DRAGGING"===e.type?(n=(t=e).dimension.client,a=t.offset,i=t.combineWith,s=t.dropping,o=Boolean(i),l=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(t),c=Boolean(s),d=c?Ba(a,o):La(a),{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Ks(l,s),transform:d,opacity:Xs(o,c),zIndex:c?Js:Ys,pointerEvents:"none"}):{transform:La((r=e).offset),transition:r.shouldAnimateDisplacement?null:"none"};var r,t,n,a,i,s,o,l,c,d}function Zs(e){var t=Ki("draggable"),n=e.descriptor,a=e.registry,i=e.getDraggableRef,s=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=ct(function(){return{canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:l}},[s,l,o]),d=dt(function(e){var r=i();return r||Et(),function(e,r,t){void 0===t&&(t=Gt);var n=window.getComputedStyle(r),a=r.getBoundingClientRect(),i=bt(a,n),s=vt(i,t);return{descriptor:e,placeholder:{client:i,tagName:r.tagName.toLowerCase(),display:n.display},displaceBy:{x:i.marginBox.width,y:i.marginBox.height},client:i,page:s}}(n,r,e)},[n,i]),u=ct(function(){return{uniqueId:t,descriptor:n,options:c,getDimension:d}},[n,d,c,t]),p=r.useRef(u),m=r.useRef(!0);Ti(function(){return a.draggable.register(p.current),function(){return a.draggable.unregister(p.current)}},[a.draggable]),Ti(function(){if(m.current)m.current=!1;else{var e=p.current;p.current=u,a.draggable.update(u,e)}},[u,a.draggable])}function eo(e){e.preventDefault()}var ro=function(e,r){return e===r},to=function(e){var r=e.combine,t=e.destination;return t?t.droppableId:r?r.droppableId:null};function no(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var ao={mapped:{type:"SECONDARY",offset:Gt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:no(null)}};var io=st(function(){var e,r,t,n=(e=wt(function(e,r){return{x:e,y:r}}),r=wt(function(e,r,t,n,a){return{isDragging:!0,isClone:r,isDropAnimating:Boolean(a),dropAnimation:a,mode:e,draggingOver:t,combineWith:n,combineTargetFor:null}}),t=wt(function(e,t,n,a,i,s,o){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:i,combineWith:s,mode:t,offset:e,dimension:n,forceShouldAnimate:o,snapshot:r(t,a,i,s,null)}}}),function(n,a){if(n.isDragging){if(n.critical.draggable.id!==a.draggableId)return null;var i=n.current.client.offset,s=n.dimensions.draggables[a.draggableId],o=Jn(n.impact),l=(d=n.impact).at&&"COMBINE"===d.at.type?d.at.combine.draggableId:null,c=n.forceShouldAnimate;return t(e(i.x,i.y),n.movementMode,s,a.isClone,o,l,c)}var d;if("DROP_ANIMATING"===n.phase){var u=n.completed;if(u.result.draggableId!==a.draggableId)return null;var p=a.isClone,m=n.dimensions.draggables[a.draggableId],f=u.result,g=f.mode,x=to(f),h=function(e){return e.combine?e.combine.draggableId:null}(f),v={duration:n.dropDuration,curve:ka,moveTo:n.newHomeClientOffset,opacity:h?Ea.drop:null,scale:h?Pa.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:m,dropping:v,draggingOver:x,combineWith:h,mode:g,forceShouldAnimate:null,snapshot:r(g,p,x,h,v)}}}return null}),a=function(){var e=wt(function(e,r){return{x:e,y:r}}),r=wt(no),t=wt(function(e,t,n){return void 0===t&&(t=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:t,shouldAnimateDisplacement:n,snapshot:r(t)}}}),n=function(e){return e?t(Gt,e,!0):null},a=function(r,a,i,s){var o=i.displaced.visible[r],l=Boolean(s.inVirtualList&&s.effected[r]),c=un(i),d=c&&c.draggableId===r?a:null;if(!o){if(!l)return n(d);if(i.displaced.invisible[r])return null;var u=Vt(s.displacedBy.point),p=e(u.x,u.y);return t(p,d,!0)}if(l)return n(d);var m=i.displacedBy.point,f=e(m.x,m.y);return t(f,d,o.shouldAnimate)};return function(e,r){if(e.isDragging)return e.critical.draggable.id===r.draggableId?null:a(r.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var t=e.completed;return t.result.draggableId===r.draggableId?null:a(r.draggableId,t.result.draggableId,t.impact,t.afterCritical)}return null}}();return function(e,r){return n(e,r)||a(e,r)||ao}},{dropAnimationFinished:Sa},null,{context:Wi,pure:!0,areStatePropsEqual:ro})(function(e){var t=r.useRef(null),n=dt(function(e){t.current=e},[]),a=dt(function(){return t.current},[]),i=Gs(Xi),s=i.contextId,o=i.dragHandleUsageInstructionsId,l=i.registry,c=Gs(Hs),d=c.type,u=c.droppableId,p=ct(function(){return{id:e.draggableId,index:e.index,type:d,droppableId:u}},[e.draggableId,e.index,d,u]),m=e.children,f=e.draggableId,g=e.isEnabled,x=e.shouldRespectForcePress,h=e.canDragInteractiveElements,v=e.isClone,b=e.mapped,j=e.dropAnimationFinished;v||Zs(ct(function(){return{descriptor:p,registry:l,getDraggableRef:a,canDragInteractiveElements:h,shouldRespectForcePress:x,isEnabled:g}},[p,l,a,h,x,g]));var y=ct(function(){return g?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":s,draggable:!1,onDragStart:eo}:null},[s,o,f,g]),N=dt(function(e){"DRAGGING"===b.type&&b.dropping&&"transform"===e.propertyName&&j()},[j,b]),_=ct(function(){var e=Qs(b),r="DRAGGING"===b.type&&b.dropping?N:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":s,"data-rbd-draggable-id":f,style:e,onTransitionEnd:r},dragHandleProps:y}},[s,y,f,b,N,n]),w=ct(function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}},[p.droppableId,p.id,p.index,p.type]);return m(_,b.snapshot,w)});function so(e){return Gs(Hs).isUsingCloneFor!==e.draggableId||e.isClone?c.createElement(io,e):null}function oo(e){var r="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,t=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return c.createElement(so,Xe({},e,{isClone:!1,isEnabled:r,canDragInteractiveElements:t,shouldRespectForcePress:n}))}var lo=function(e,r){return e===r.droppable.type},co=function(e,r){return r.draggables[e.draggable.id]};var uo={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Et(),document.body}},po=st(function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=Xe({},e,{shouldAnimatePlaceholder:!1}),t=wt(function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}}),n=wt(function(n,a,i,s,o,l){var c=o.descriptor.id;if(o.descriptor.droppableId===n){var d=l?{render:l,dragging:t(o.descriptor)}:null,u={isDraggingOver:i,draggingOverWith:i?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:o.placeholder,shouldAnimatePlaceholder:!1,snapshot:u,useClone:d}}if(!a)return r;if(!s)return e;var p={isDraggingOver:i,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:o.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return function(t,a){var i=a.droppableId,s=a.type,o=!a.isDropDisabled,l=a.renderClone;if(t.isDragging){var c=t.critical;if(!lo(s,c))return r;var d=co(c,t.dimensions),u=Jn(t.impact)===i;return n(i,o,u,u,d,l)}if("DROP_ANIMATING"===t.phase){var p=t.completed;if(!lo(s,p.critical))return r;var m=co(p.critical,t.dimensions);return n(i,o,to(p.result)===i,Jn(p.impact)===i,m,l)}if("IDLE"===t.phase&&t.completed&&!t.shouldFlush){var f=t.completed;if(!lo(s,f.critical))return r;var g=Jn(f.impact)===i,x=Boolean(f.impact.at&&"COMBINE"===f.impact.at.type),h=f.critical.droppable.id===i;return g?x?e:r:h?e:r}return r}},{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:Wi,pure:!0,areStatePropsEqual:ro})(function(e){var t=r.useContext(Xi);t||Et();var n=t.contextId,a=t.isMovementAllowed,i=r.useRef(null),s=r.useRef(null),o=e.children,l=e.droppableId,d=e.type,p=e.mode,m=e.direction,f=e.ignoreContainerClipping,g=e.isDropDisabled,x=e.isCombineEnabled,h=e.snapshot,v=e.useClone,b=e.updateViewportMaxScroll,j=e.getContainerForClone,y=dt(function(){return i.current},[]),N=dt(function(e){i.current=e},[]);dt(function(){return s.current},[]);var _=dt(function(e){s.current=e},[]),w=dt(function(){a()&&b({maxScroll:ti()})},[a,b]);!function(e){var t=r.useRef(null),n=Gs(Xi),a=Ki("droppable"),i=n.registry,s=n.marshal,o=Qi(e),l=ct(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=r.useRef(l),d=ct(function(){return wt(function(e,r){t.current||Et();var n={x:e,y:r};s.updateDroppableScroll(l.id,n)})},[l.id,s]),u=dt(function(){var e=t.current;return e&&e.env.closestScrollable?Os(e.env.closestScrollable):Gt},[]),p=dt(function(){var e=u();d(e.x,e.y)},[u,d]),m=ct(function(){return Ct(p)},[p]),f=dt(function(){var e=t.current,r=Us(e);e&&r||Et(),e.scrollOptions.shouldPublishImmediately?p():m()},[m,p]),g=dt(function(e,r){t.current&&Et();var a=o.current,i=a.getDroppableRef();i||Et();var s=Ls(i),c={ref:i,descriptor:l,env:s,scrollOptions:r};t.current=c;var d=Bs({ref:i,descriptor:l,env:s,windowScroll:e,direction:a.direction,isDropDisabled:a.isDropDisabled,isCombineEnabled:a.isCombineEnabled,shouldClipSubject:!a.ignoreContainerClipping}),u=s.closestScrollable;return u&&(u.setAttribute(Li.contextId,n.contextId),u.addEventListener("scroll",f,Fs(c.scrollOptions))),d},[n.contextId,l,f,o]),x=dt(function(){var e=t.current,r=Us(e);return e&&r||Et(),Os(r)},[]),h=dt(function(){var e=t.current;e||Et();var r=Us(e);t.current=null,r&&(m.cancel(),r.removeAttribute(Li.contextId),r.removeEventListener("scroll",f,Fs(e.scrollOptions)))},[f,m]),v=dt(function(e){var r=t.current;r||Et();var n=Us(r);n||Et(),n.scrollTop+=e.y,n.scrollLeft+=e.x},[]),b=ct(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:x,dragStopped:h,scroll:v}},[h,g,x,v]),j=ct(function(){return{uniqueId:a,descriptor:l,callbacks:b}},[b,l,a]);Ti(function(){return c.current=j.descriptor,i.droppable.register(j),function(){t.current&&h(),i.droppable.unregister(j)}},[b,l,h,j,s,i.droppable]),Ti(function(){t.current&&s.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),Ti(function(){t.current&&s.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}({droppableId:l,type:d,mode:p,direction:m,isDropDisabled:g,isCombineEnabled:x,ignoreContainerClipping:f,getDroppableRef:y});var C=c.createElement($s,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(e){var r=e.onClose,t=e.data,a=e.animate;return c.createElement(Ws,{placeholder:t,onClose:r,innerRef:_,animate:a,contextId:n,onTransitionEnd:w})}),D=ct(function(){return{innerRef:N,placeholder:C,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}},[n,l,C,N]),I=v?v.dragging.draggableId:null,S=ct(function(){return{droppableId:l,type:d,isUsingCloneFor:I}},[l,I,d]);return c.createElement(Hs.Provider,{value:S},o(D,h),function(){if(!v)return null;var e=v.dragging,r=v.render,t=c.createElement(so,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(t,n){return r(t,n,e)});return u.createPortal(t,j())}())});function mo({imageUrls:t,onImageUrlsChange:n}){const[a,i]=r.useState(!1),s=async e=>{if(!e.target.files||0===e.target.files.length)return;const r=Array.from(e.target.files),a=10-t.length;if(r.length>a)x.error(`You can only upload ${a} more images. Maximum 10 images allowed.`);else{i(!0);try{const e=r.map(async e=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type))throw new Error(`Invalid file type for ${e.name}. Only JPEG, PNG, and WebP images are allowed.`);if(e.size>5242880)throw new Error(`File ${e.name} is too large. Maximum size is 5MB.`);const r=e.name.split(".").pop()?.toLowerCase();if(!r||!["jpg","jpeg","png","webp"].includes(r))throw new Error(`Invalid file extension for ${e.name}.`);const t=`${`${Math.random().toString(36).substring(2)}.${r}`}`,{error:n}=await h.storage.from("asset_images").upload(t,e);if(n)throw n;const{data:{publicUrl:a}}=h.storage.from("asset_images").getPublicUrl(t);return a}),a=await Promise.all(e);n([...t,...a]),x.success(`${r.length} image(s) uploaded successfully`)}catch(s){x.error("Failed to upload some images")}i(!1)}};return e.jsx("div",{className:"space-y-4",children:e.jsx(Is,{onDragEnd:e=>{if(!e.destination)return;const r=Array.from(t),[a]=r.splice(e.source.index,1);r.splice(e.destination.index,0,a),n(r)},children:e.jsx(po,{droppableId:"image-gallery",direction:"horizontal",children:r=>e.jsxs("div",{...r.droppableProps,ref:r.innerRef,className:"flex flex-wrap gap-2",children:[t.map((r,a)=>e.jsx(oo,{draggableId:r,index:a,children:(i,s)=>{const o=e.jsxs("div",{ref:i.innerRef,...i.draggableProps,...i.dragHandleProps,className:"relative group w-20 h-20 flex-shrink-0 "+(s.isDragging?"shadow-lg":""),children:[e.jsx(se,{src:r,alt:`Uploaded image ${a+1}`,className:"w-full h-full object-cover rounded-md",width:80,height:80}),e.jsx("div",{className:"absolute top-0.5 right-0.5",children:e.jsx(f,{variant:"destructive",size:"icon",className:"h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>(e=>{const r=[...t];r.splice(e,1),n(r)})(a),children:e.jsx(g,{className:"w-2 h-2"})})})]});return s.isDragging?u.createPortal(o,document.body):o}},r)),r.placeholder,t.length<10&&e.jsx("div",{className:"w-20 h-20 border-2 border-dashed border-border/20 rounded-md flex items-center justify-center flex-shrink-0",children:e.jsxs("label",{className:"cursor-pointer w-full h-full flex flex-col items-center justify-center",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:s,disabled:a,className:"hidden",multiple:!0}),e.jsxs("div",{className:"flex flex-col items-center space-y-1 text-muted-foreground",children:[e.jsx(_e,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs",children:a?"Uploading...":"Add"})]})]})})]})})})})}function fo(){const{signOut:t}=v(),[n,a]=r.useState({site_name:"",favicon_url:"",meta_title:"",meta_description:""});r.useEffect(()=>{i()},[]);const i=async()=>{const{data:e,error:r}=await h.from("site_settings").select("*").single();r?x.error("Failed to fetch site settings"):e&&a(e)},s=(e,r)=>{a(t=>({...t,[e]:r}))};return e.jsxs($,{className:"glass-card border-border/20",children:[e.jsx(Y,{children:e.jsx(J,{className:"font-serif-premium",children:"Site Settings"})}),e.jsxs(K,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Site Name"}),e.jsx(j,{value:n.site_name,onChange:e=>s("site_name",e.target.value)})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Favicon URL"}),e.jsx(Ye,{imageUrl:n.favicon_url,onImageUrlChange:e=>s("favicon_url",e||"")})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Default Meta Title"}),e.jsx(j,{value:n.meta_title,onChange:e=>s("meta_title",e.target.value)})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Default Meta Description"}),e.jsx(Ce,{value:n.meta_description,onChange:e=>s("meta_description",e.target.value),rows:3})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{onClick:async()=>{const{error:e}=await h.from("site_settings").update(n).eq("id",1);e?x.error("Failed to save site settings"):x.success("Site settings saved successfully")},className:"bg-accent text-accent-foreground",children:"Save Settings"}),e.jsxs(f,{variant:"destructive",onClick:t,className:"px-6 py-2",children:[e.jsx(y,{className:"w-5 h-5 mr-2"}),"Sign Out"]})]})]})]})}function go(){const t=N(),{user:n,signOut:a}=v(),[i,s]=r.useState("overview"),[o,l]=r.useState(!1),[c,d]=r.useState(null),[u,p]=r.useState(!1),[m,g]=r.useState(null),[y,Q]=r.useState([]),[Z,oe]=r.useState([]),[_e,Ae]=r.useState([]),[Oe,Re]=r.useState([]),[Le,Be]=r.useState([]),[Te,Me]=r.useState([]),[Fe,Ge]=r.useState([]),[Ue,ze]=r.useState([]),[qe,Ve]=r.useState([]),[We,He]=r.useState([]),[Je,Ke]=r.useState(""),[Xe,Qe]=r.useState(""),[Ze,er]=r.useState(""),[rr,tr]=r.useState(""),[nr,ar]=r.useState("all"),[ir,sr]=r.useState("all"),[or,lr]=r.useState("all"),[cr,dr]=r.useState(null),[ur,pr]=r.useState(null),[mr,fr]=r.useState(null),[gr,xr]=r.useState(null),[hr,vr]=r.useState({shipping_company:"",tracking_id:"",tracking_link:"",shipping_method:"Standard",shipping_notes:""}),[br,jr]=r.useState({delivery_notes:"",delivery_proof_url:""}),[yr,Nr]=r.useState(null),[_r,wr]=r.useState([]),[Cr,Dr]=r.useState([]),[Ir,Sr]=r.useState([]),[kr,Er]=r.useState([]),[Pr,Ar]=r.useState([]),[Or,Rr]=r.useState([]),[Lr,Br]=r.useState(""),[Tr,Mr]=r.useState(""),[Fr,Gr]=r.useState(""),[Ur,zr]=r.useState(!1),[qr,Vr]=r.useState(!1),[Wr,Hr]=r.useState(!1),[$r,Yr]=r.useState(null),[Jr,Kr]=r.useState(null),[Xr,Qr]=r.useState(null),[Zr,et]=r.useState(null),[rt,tt]=r.useState(null);r.useEffect(()=>{nt(),at(),it(),st(),ot(),lt(),ct(),dt()},[]),r.useEffect(()=>{c&&pt({name:c.name,slug:c.slug,brand:c.brand,price:c.price,description:c.description,stock:c.stock,category_ids:[],rating:c.rating,review_count:c.review_count,origin:c.origin||"",strength:c.strength||"",pack_size:c.pack_size||"",specifications:c.specifications?Object.entries(c.specifications).map(([e,r])=>({key:e,value:r})):[{key:"",value:""}],ingredients:c.ingredients?c.ingredients.join(", "):"",gallery_images:c.gallery_images||[],meta_title:c.meta_title||"",meta_description:c.meta_description||"",image_alt_text:c.image_alt_text||""})},[c]);const nt=async()=>{const{data:e,error:r}=await h.from("products").select("*");r?x.error("Failed to fetch products"):Q(e||[])},at=async()=>{try{const{data:e,error:r}=await h.from("orders").select("*").order("created_at",{ascending:!1});if(r)return console.error("Error fetching orders:",r),void x.error("Failed to fetch orders");if(!e||0===e.length)return console.log("No orders found"),void oe([]);const t=e.map(e=>e.id),{data:n,error:a}=await h.from("order_items").select("*").in("order_id",t);a&&console.error("Error fetching order items:",a);const i=[...new Set(e.map(e=>e.user_id))],{data:s,error:o}=await h.from("profiles").select("id, name, email").in("id",i);o&&console.error("Error fetching profiles:",o);const l=e.map(e=>{const r=n?.filter(r=>r.order_id===e.id)||[],t=s?.find(r=>r.id===e.user_id);return{id:e.id,display_order_id:e.display_order_id||e.id.slice(0,8),user_id:e.user_id,customerName:t?.name||e.shipping_name||"Unknown",customerEmail:t?.email||"N/A",customerPhone:e.shipping_phone||"N/A",items:r.map(e=>({id:e.id,name:e.product_name,brand:e.product_brand,quantity:e.quantity,price:e.product_price,image:e.product_image})),total:e.total,subtotal:e.subtotal,tax:e.tax,shipping:e.shipping,discount:e.discount||0,status:e.status,payment_method:e.payment_method,payment_verified:e.payment_verified||"NO",payment_confirmed:e.payment_confirmed||!1,payment_confirmed_at:e.payment_confirmed_at,payment_verified_at:e.payment_verified_at,payment_verified_by:e.payment_verified_by,payment_rejection_reason:e.payment_rejection_reason,transaction_id:e.transaction_id,payment_proof_url:e.payment_proof_url,tracking_number:e.tracking_number,estimated_delivery:e.estimated_delivery,shipping_address:e.shipping_address,shipping_city:e.shipping_city,shipping_state:e.shipping_state,shipping_zip_code:e.shipping_zip_code,shipping_country:e.shipping_country||"India",createdAt:e.created_at,updatedAt:e.updated_at}});console.log("Formatted orders:",l),oe(l)}catch(e){console.error("Unexpected error fetching orders:",e),x.error("Failed to fetch orders")}},it=async()=>{try{const{data:e,error:r}=await h.from("profiles").select("*");if(r)return console.error("Error fetching profiles:",r),void x.error("Failed to fetch customers");if(!e||0===e.length)return console.log("No customers found"),void Ae([]);const t=e.map(e=>e.id),{data:n,error:a}=await h.from("orders").select("user_id, total_decimal, total, created_at, status").in("user_id",t);a&&console.error("Error fetching orders:",a);const i=e.map(e=>{const r=n?.filter(r=>r.user_id===e.id)||[],t=r.reduce((e,r)=>e+r.total,0),a=r.length,i=a>0?t/a:0,s=r.length>0?r.sort((e,r)=>new Date(r.created_at).getTime()-new Date(e.created_at).getTime())[0].created_at:null,o=r.length>0?r.sort((e,r)=>new Date(e.created_at).getTime()-new Date(r.created_at).getTime())[0].created_at:null;return{id:e.id,name:e.name,email:e.email,phone:e.phone,is_admin:e.is_admin,orderCount:a,totalSpent:t,averageOrderValue:i,lastOrderDate:s,firstOrderDate:o,status:e.is_admin||a>0?"active":"inactive",created_at:e.created_at,updated_at:e.updated_at}});console.log("Formatted customers:",i),Ae(i)}catch(e){console.error("Unexpected error fetching customers:",e),x.error("Failed to fetch customers")}},st=async()=>{const{data:e,error:r}=await h.from("categories").select("*");r?x.error("Failed to fetch categories"):Re(e||[])},ot=async()=>{const{data:e,error:r}=await h.from("homepage_sections").select("*");r?x.error("Failed to fetch homepage sections"):Be(e||[])},lt=async()=>{const{data:e,error:r}=await h.from("product_variants").select("\n        *,\n        products (id, name, brand),\n        variant_images (*)\n      ").order("created_at",{ascending:!1});r?x.error("Failed to fetch variants"):wr(e||[])},ct=async()=>{const{data:e,error:r}=await h.from("product_combos").select("\n        *,\n        combo_items (\n          *,\n          products (id, name, brand),\n          product_variants (id, variant_name)\n        )\n      ").order("created_at",{ascending:!1});r?x.error("Failed to fetch combos"):Dr(e||[])},dt=async()=>{const{data:e,error:r}=await h.from("discounts").select("*").order("created_at",{ascending:!1});r?x.error("Failed to fetch discounts"):Sr(e||[])},[ut,pt]=r.useState({name:"",slug:"",brand:"",price:0,description:"",stock:0,category_ids:[],rating:0,review_count:0,origin:"",strength:"",pack_size:"",specifications:[{key:"",value:""}],ingredients:"",gallery_images:[],meta_title:"",meta_description:"",image_alt_text:""}),[mt,ft]=r.useState({product_id:"",variant_name:"",variant_description:"",price:0,sku:"",stock_quantity:0,is_active:!0,sort_order:0,images:[]}),[gt,xt]=r.useState({name:"",description:"",combo_price:0,savings_amount:0,is_active:!0,sort_order:0,combo_items:[]}),[ht,vt]=r.useState({discount_name:"",discount_code:"",discount_type:"percentage",discount_value:0,minimum_cart_value:0,maximum_discount_amount:0,usage_limit:0,usage_count:0,valid_from:"",valid_until:"",is_active:!0,applicable_products:[],applicable_variants:[],applicable_combos:[]}),[bt,jt]=r.useState({name:"",slug:"",description:"",image:"",image_alt_text:"",section_ids:[]}),yt=Z.reduce((e,r)=>e+r.total,0),Nt=y.length,_t=_e.length,wt=Z.length,Ct=()=>{l(!1),d(null),pt({name:"",slug:"",brand:"",price:0,description:"",stock:0,category_ids:[],rating:0,review_count:0,origin:"",strength:"",pack_size:"",specifications:[{key:"",value:""}],ingredients:"",gallery_images:[],meta_title:"",meta_description:"",image_alt_text:""})},Dt=e=>{switch(e){case"placed":return"bg-orange-500/20 text-orange-300 border-orange-500/30";case"processing":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"shipped":return"bg-purple-500/20 text-purple-300 border-purple-500/30";case"delivered":return"bg-green-500/20 text-green-300 border-green-500/30";case"cancelled":return"bg-red-500/20 text-red-300 border-red-500/30";default:return"bg-muted text-muted-foreground"}},It=e=>{switch(e){case"YES":return"bg-green-500/20 text-green-300 border-green-500/30";case"NO":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"REJECTED":return"bg-red-500/20 text-red-300 border-red-500/30";default:return"bg-muted text-muted-foreground"}},St=async(e,r,t,a)=>{try{const{error:i}=await h.rpc("update_order_status",{order_id:e,new_status:r,admin_user_id:t||n?.id,additional_data:a?{shipping_company:a.shipping_company,tracking_id:a.tracking_id,tracking_link:a.tracking_link,shipping_method:a.shipping_method,shipping_notes:a.shipping_notes,delivery_notes:a.delivery_notes,delivery_proof_url:a.delivery_proof_url}:null});i?x.error(`Failed to update order status: ${i.message}`):(x.success("Order status updated successfully"),at())}catch(i){console.error("Error updating order status:",i),x.error("Failed to update order status")}},kt=async e=>{const{error:r}=await h.from("orders").update({payment_verified:"YES",payment_verified_at:(new Date).toISOString(),payment_verified_by:n?.id,payment_confirmed:!0,payment_confirmed_at:(new Date).toISOString()}).eq("id",e);r?x.error("Failed to confirm payment"):(x.success("Payment confirmed successfully"),at())},Et=Z.filter(e=>{const r=e.display_order_id.toLowerCase().includes(Je.toLowerCase())||e.customerName.toLowerCase().includes(Je.toLowerCase())||e.customerEmail.toLowerCase().includes(Je.toLowerCase()),t="all"===nr||e.status===nr,n="all"===ir||e.payment_verified===ir;return r&&t&&n}),Pt=_e.filter(e=>e.name.toLowerCase().includes(Xe.toLowerCase())||e.email.toLowerCase().includes(Xe.toLowerCase())),At=y.filter(e=>{const r=e.name.toLowerCase().includes(Ze.toLowerCase())||e.brand.toLowerCase().includes(Ze.toLowerCase())||e.slug.toLowerCase().includes(Ze.toLowerCase()),t="all"===or||"active"===or&&e.is_active||"inactive"===or&&!e.is_active;return r&&t}).sort((e,r)=>e.name.localeCompare(r.name)),Ot=Oe.filter(e=>e.name.toLowerCase().includes(rr.toLowerCase())||e.slug.toLowerCase().includes(rr.toLowerCase())||e.description.toLowerCase().includes(rr.toLowerCase())).sort((e,r)=>e.name.localeCompare(r.name));return n?.isAdmin?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs(w,{value:i,onValueChange:s,children:[e.jsxs(C,{className:"grid w-full grid-cols-9 lg:w-auto lg:flex bg-secondary",children:[e.jsx(D,{value:"overview",children:"Overview"}),e.jsx(D,{value:"products",children:"Products"}),e.jsxs(D,{value:"variants",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Variants"]}),e.jsxs(D,{value:"combos",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Combos"]}),e.jsxs(D,{value:"discounts",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Discounts"]}),e.jsx(D,{value:"categories",children:"Categories"}),e.jsx(D,{value:"orders",children:"Orders"}),e.jsx(D,{value:"customers",children:"Customers"}),e.jsxs(D,{value:"settings",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),e.jsxs(I,{value:"overview",className:"space-y-8",children:[e.jsxs($,{className:"bg-background border border-border bg-blue-500",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(ve,{className:"w-5 h-5"}),"Debug Information"]})}),e.jsxs(K,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Orders Count:"}),e.jsx("div",{className:"text-blue-600",children:Z.length})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Customers Count:"}),e.jsx("div",{className:"text-blue-600",children:_e.length})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Products Count:"}),e.jsx("div",{className:"text-blue-600",children:y.length})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Categories Count:"}),e.jsx("div",{className:"text-blue-600",children:Oe.length})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{console.log("Orders:",Z),console.log("Customers:",_e),console.log("Products:",y),console.log("Categories:",Oe)},children:"Log Data to Console"}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{at(),it(),nt(),st(),x.info("Data refreshed")},children:"Refresh Data"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-serif font-medium text-foreground",children:["₹",yt.toLocaleString("en-IN")]}),e.jsx("p",{className:"text-xs text-green-500 mt-1",children:"+12% from last month"})]}),e.jsx(S,{className:"w-8 h-8 text-accent"})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Products"}),e.jsx("p",{className:"text-2xl font-serif font-medium text-foreground",children:Nt}),e.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:[y.filter(e=>e.is_active).length," active"]})]}),e.jsx(k,{className:"w-8 h-8 text-accent"})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Orders"}),e.jsx("p",{className:"text-2xl font-serif font-medium text-foreground",children:wt}),e.jsxs("p",{className:"text-xs text-orange-500 mt-1",children:[Z.filter(e=>"placed"===e.status).length," placed"]})]}),e.jsx(S,{className:"w-8 h-8 text-accent"})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customers"}),e.jsx("p",{className:"text-2xl font-serif font-medium text-foreground",children:_t}),e.jsxs("p",{className:"text-xs text-green-500 mt-1",children:[_e.filter(e=>"active"===e.status).length," active"]})]}),e.jsx(we,{className:"w-8 h-8 text-accent"})]})})})]}),e.jsxs($,{className:"bg-background border border-border",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-yellow-500"}),"Inventory Alerts"]})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-3",children:y.filter(e=>e.stock<10).length>0?y.filter(e=>e.stock<10).map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-yellow-500/30 rounded-lg bg-yellow-500",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Low stock alert"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium text-yellow-600",children:[r.stock," left"]}),e.jsx(f,{size:"sm",variant:"outline",className:"mt-1",children:"Reorder"})]})]},r.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(P,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{children:"All products are well stocked!"})]})})})]}),e.jsxs($,{className:"bg-background border border-border",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Recent Orders"]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>s("orders"),children:"View All"})]})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-4",children:Z.slice(0,5).map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-accent rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["#",r.display_order_id]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.customerName}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(r.createdAt).toLocaleString("en-IN")})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["₹",r.total.toLocaleString("en-IN")]}),e.jsx(O,{className:`text-xs ${Dt(r.status)}`,children:r.status}),e.jsx("div",{className:"mt-1",children:e.jsx(O,{className:`text-xs ${It(r.payment_verified)}`,children:r.payment_verified})})]})]},r.id))})})]}),e.jsxs($,{className:"bg-background border border-border",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),"Top Customers"]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>s("customers"),children:"View All"})]})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-4",children:_e.sort((e,r)=>r.totalSpent-e.totalSpent).slice(0,5).map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-accent rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[r.name,r.is_admin&&e.jsx(O,{className:"bg-accent text-accent-foreground text-xs",children:"ADMIN"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.email}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[r.orderCount," orders"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["₹",r.totalSpent.toLocaleString("en-IN")]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["₹",r.averageOrderValue.toLocaleString("en-IN")," avg"]})]})]},r.id))})})]})]}),e.jsxs(I,{value:"products",className:"space-y-4",children:[e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j,{placeholder:"Search products...",value:Ze,onChange:e=>er(e.target.value),className:"w-64"}),e.jsxs(ee,{value:or,onValueChange:lr,children:[e.jsx(re,{className:"w-32",children:e.jsx(te,{placeholder:"Status"})}),e.jsxs(ne,{children:[e.jsx(ae,{value:"all",children:"All"}),e.jsx(ae,{value:"active",children:"Active"}),e.jsx(ae,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs(R,{open:o,onOpenChange:e=>{e?l(!0):Ct()},children:[e.jsx(L,{asChild:!0,children:e.jsxs(f,{className:"bg-accent text-accent-foreground",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Add Product"]})}),e.jsxs(B,{className:"bg-background border border-border max-w-4xl",children:[e.jsxs(T,{children:[e.jsx(M,{className:"text-2xl font-serif text-center text-foreground",children:c?"Edit Product":"Add Product"}),e.jsx(F,{className:"text-center text-muted-foreground",children:"Manage product details, pricing, and other attributes."})]}),e.jsxs(w,{defaultValue:"general",children:[e.jsxs(C,{className:"grid w-full grid-cols-3",children:[e.jsx(D,{value:"general",children:"General"}),e.jsx(D,{value:"media",children:"Media & SEO"}),e.jsx(D,{value:"details",children:"Details & Pricing"})]}),e.jsxs(I,{value:"general",className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Product Name"}),e.jsx(j,{value:ut.name,onChange:e=>{const r=e.target.value,t=r.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");pt(e=>({...e,name:r,slug:t}))}})]}),e.jsxs("div",{children:[e.jsx(b,{children:"URL Slug"}),e.jsx(j,{value:ut.slug,onChange:e=>pt(r=>({...r,slug:e.target.value}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Brand"}),e.jsx(j,{value:ut.brand,onChange:e=>pt(r=>({...r,brand:e.target.value}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Description"}),e.jsx(Ce,{value:ut.description,onChange:e=>pt(r=>({...r,description:e.target.value})),rows:4})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Categories"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 pt-2",children:Oe.map(r=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{id:`category-${r.id}`,checked:ut.category_ids.includes(r.id),onCheckedChange:e=>{const t=r.id;pt(r=>({...r,category_ids:!0===e?[...r.category_ids,t]:r.category_ids.filter(e=>e!==t)}))}}),e.jsx(b,{htmlFor:`category-${r.id}`,children:r.name})]},r.id))})]})]}),e.jsxs(I,{value:"media",className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Product Images"}),e.jsx(mo,{imageUrls:ut.gallery_images,onImageUrlsChange:e=>pt(r=>({...r,gallery_images:e}))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"The first image will be the main product image. You can drag to reorder."})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Image Alt Text"}),e.jsx(j,{value:ut.image_alt_text,onChange:e=>pt(r=>({...r,image_alt_text:e.target.value}))})]}),e.jsx(X,{}),e.jsx("h3",{className:"text-lg font-medium",children:"SEO"}),e.jsxs("div",{children:[e.jsx(b,{children:"Meta Title"}),e.jsx(j,{value:ut.meta_title,onChange:e=>pt(r=>({...r,meta_title:e.target.value}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Meta Description"}),e.jsx(Ce,{value:ut.meta_description,onChange:e=>pt(r=>({...r,meta_description:e.target.value})),rows:2})]})]}),e.jsxs(I,{value:"details",className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Price (₹)"}),e.jsx(j,{type:"number",step:"0.01",value:ut.price,onChange:e=>pt(r=>({...r,price:parseFloat(e.target.value)||0}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Stock Quantity"}),e.jsx(j,{type:"number",value:ut.stock,onChange:e=>pt(r=>({...r,stock:parseInt(e.target.value)||0}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Rating (0-5)"}),e.jsx(j,{type:"number",step:"0.1",value:ut.rating,onChange:e=>pt(r=>({...r,rating:parseFloat(e.target.value)||0}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Review Count"}),e.jsx(j,{type:"number",value:ut.review_count,onChange:e=>pt(r=>({...r,review_count:parseInt(e.target.value)||0}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Origin"}),e.jsx(j,{value:ut.origin,onChange:e=>pt(r=>({...r,origin:e.target.value}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Strength"}),e.jsx(j,{value:ut.strength,onChange:e=>pt(r=>({...r,strength:e.target.value}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Pack Size"}),e.jsx(j,{value:ut.pack_size,onChange:e=>pt(r=>({...r,pack_size:e.target.value}))})]})]}),e.jsx(X,{}),e.jsxs("div",{children:[e.jsx(b,{children:"Specifications"}),ut.specifications.map((r,t)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{placeholder:"Key (e.g., Length)",value:r.key,onChange:e=>{const r=[...ut.specifications];r[t].key=e.target.value,pt(e=>({...e,specifications:r}))}}),e.jsx(j,{placeholder:"Value (e.g., 84mm)",value:r.value,onChange:e=>{const r=[...ut.specifications];r[t].value=e.target.value,pt(e=>({...e,specifications:r}))}}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>{const e=ut.specifications.filter((e,r)=>r!==t);pt(r=>({...r,specifications:e}))},children:e.jsx(ce,{className:"w-4 h-4"})})]},t)),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>pt(e=>({...e,specifications:[...e.specifications,{key:"",value:""}]})),children:"Add Specification"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Ingredients (one per line)"}),e.jsx(Ce,{value:ut.ingredients,onChange:e=>pt(r=>({...r,ingredients:e.target.value})),rows:4})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(f,{variant:"outline",onClick:Ct,className:"flex-1",children:"Cancel"}),e.jsx(f,{onClick:async()=>{if(c){const{data:e,error:r}=await h.from("products").update({name:ut.name,brand:ut.brand,price:ut.price,description:ut.description,stock:ut.stock,rating:ut.rating,review_count:ut.review_count,origin:ut.origin,strength:ut.strength,pack_size:ut.pack_size,specifications:ut.specifications.reduce((e,r)=>(r.key&&(e[r.key]=r.value),e),{}),ingredients:ut.ingredients.split("\n").filter(e=>""!==e.trim()),gallery_images:ut.gallery_images}).eq("id",c.id).select();if(r)return void x.error("Failed to update product");const{error:t}=await h.from("product_categories").delete().eq("product_id",c.id);if(t)return void x.error("Failed to update product categories");const{error:n}=await h.from("product_categories").insert(ut.category_ids.map(e=>({product_id:c.id,category_id:e})));n?x.error("Failed to update product categories"):(x.success("Product updated successfully"),nt())}else{const{data:e,error:r}=await h.from("products").insert([{name:ut.name,slug:ut.slug,brand:ut.brand,price:ut.price,description:ut.description,stock:ut.stock,rating:ut.rating,review_count:ut.review_count,origin:ut.origin,strength:ut.strength,pack_size:ut.pack_size,specifications:ut.specifications.reduce((e,r)=>(r.key&&(e[r.key]=r.value),e),{}),ingredients:ut.ingredients.split("\n").filter(e=>""!==e.trim()),gallery_images:ut.gallery_images,meta_title:ut.meta_title,meta_description:ut.meta_description}]).select();if(r||!e)return void x.error("Failed to add product");const t=e[0].id,{error:n}=await h.from("product_categories").insert(ut.category_ids.map(e=>({product_id:t,category_id:e})));n?x.error("Failed to add product categories"):(x.success("Product added successfully"),nt())}Ct()},className:"flex-1 bg-accent text-accent-foreground",children:c?"Update Product":"Add Product"}),c&&e.jsxs(f,{onClick:()=>{window.confirm(`Are you sure you want to delete "${c.name}"? This action cannot be undone.`)&&(async e=>{try{const{data:r,error:t}=await h.from("order_items").select("id").eq("product_id",e).limit(1);if(t)return void x.error("Failed to check product references");if(r&&r.length>0)return void x.error("Cannot delete product: It is referenced in existing orders. Consider deactivating it instead.");const{error:n}=await h.from("products").delete().eq("id",e);n?x.error("Failed to delete product"):(x.success("Product deleted successfully"),nt(),l(!1),d(null))}catch(r){x.error("Failed to delete product")}})(c.id)},variant:"destructive",className:"px-6 bg-red-600 hover:bg-red-700 text-white border-red-600",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Delete Product"]})]})]})]})]})})}),qe.length>0&&e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[qe.length," product",qe.length>1?"s":""," selected"]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>Ve([]),children:"Clear Selection"})]})})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-0",children:e.jsxs(De,{className:"w-full",children:[e.jsx(Ie,{children:e.jsxs(ke,{className:"border-b border-border",children:[e.jsx(Ee,{className:"w-12 px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:e.jsx($e,{checked:qe.length===At.length&&At.length>0,onCheckedChange:e=>{Ve(e?At.map(e=>e.id):[])}})}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Product"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Brand"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Price"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Stock"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Actions"})]})}),e.jsx(Se,{children:At.map(r=>e.jsxs(ke,{className:"border-b border-border hover:bg-muted transition-colors cursor-pointer",onClick:()=>{d(r),l(!0)},children:[e.jsx(Pe,{className:"px-4 py-3",children:e.jsx($e,{checked:qe.includes(r.id),onCheckedChange:e=>{Ve(e?e=>[...e,r.id]:e=>e.filter(e=>e!==r.id))},onClick:e=>e.stopPropagation()})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 overflow-hidden",children:e.jsx(se,{src:r.gallery_images[0],alt:r.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:r.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.slug})]})]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:r.brand})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"font-medium text-accent",children:["₹",r.price.toLocaleString("en-IN")]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm",children:e.jsx(O,{variant:r.stock<10?"destructive":"secondary",children:r.stock})})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx(f,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation(),(async e=>{const r=y.find(r=>r.id===e);if(!r)return;const{error:t}=await h.from("products").update({is_active:!r.is_active}).eq("id",e);t?x.error("Failed to update product status"):(x.success("Product status updated successfully"),nt())})(r.id)},children:r.is_active?e.jsx(Ne,{className:"w-4 h-4 text-green-500"}):e.jsx(ye,{className:"w-4 h-4 text-muted-foreground"})})})]},r.id))})]})})})]}),e.jsxs(I,{value:"orders",className:"space-y-4",children:[e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(j,{placeholder:"Search orders by ID, customer name, or email...",value:Je,onChange:e=>Ke(e.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ee,{value:nr,onValueChange:ar,children:[e.jsx(re,{className:"w-48 bg-background border border-border",children:e.jsx(te,{placeholder:"Order Status"})}),e.jsxs(ne,{className:"bg-background border border-border z-50",children:[e.jsx(ae,{value:"all",children:"All Statuses"}),e.jsx(ae,{value:"placed",children:"Placed"}),e.jsx(ae,{value:"processing",children:"Processing"}),e.jsx(ae,{value:"shipped",children:"Shipped"}),e.jsx(ae,{value:"delivered",children:"Delivered"}),e.jsx(ae,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs(ee,{value:ir,onValueChange:sr,children:[e.jsx(re,{className:"w-48 bg-background border border-border",children:e.jsx(te,{placeholder:"Payment Status"})}),e.jsxs(ne,{className:"bg-background border border-border z-50",children:[e.jsx(ae,{value:"all",children:"All Payments"}),e.jsx(ae,{value:"NO",children:"Pending Payment"}),e.jsx(ae,{value:"YES",children:"Payment Verified"}),e.jsx(ae,{value:"REJECTED",children:"Payment Rejected"})]})]}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})})}),Fe.length>0&&e.jsx($,{className:"bg-background border border-border bg-accent",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-accent"}),e.jsxs("span",{className:"font-medium",children:[Fe.length," order",1!==Fe.length?"s":""," selected"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{onValueChange:e=>{"processing"===e?Fe.forEach(e=>St(e,"processing")):"shipped"===e?Fe.forEach(e=>St(e,"shipped")):"delivered"===e?Fe.forEach(e=>St(e,"delivered")):"confirm_payment"===e&&Fe.forEach(e=>kt(e)),Ge([])},children:[e.jsx(re,{className:"w-48 bg-background border border-border",children:e.jsx(te,{placeholder:"Bulk Actions"})}),e.jsxs(ne,{className:"bg-background border border-border z-50",children:[e.jsx(ae,{value:"processing",children:"Mark as Processing"}),e.jsx(ae,{value:"shipped",children:"Mark as Shipped"}),e.jsx(ae,{value:"delivered",children:"Mark as Delivered"}),e.jsx(ae,{value:"confirm_payment",children:"Confirm Payment"})]})]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>Ge([]),children:"Clear Selection"})]})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-0",children:e.jsxs(De,{className:"w-full",children:[e.jsx(Ie,{children:e.jsxs(ke,{className:"border-b border-border",children:[e.jsx(Ee,{className:"w-12 px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:e.jsx($e,{checked:Fe.length===Et.length&&Et.length>0,onCheckedChange:e=>{Ge(e?Et.map(e=>e.id):[])}})}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Order ID"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Customer"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Items"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Total"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Status"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Payment"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Date"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Actions"})]})}),e.jsx(Se,{children:Et.map(r=>e.jsxs(ke,{className:"border-b border-border hover:bg-muted transition-colors cursor-pointer",onClick:()=>dr(r.id),children:[e.jsx(Pe,{className:"px-4 py-3",children:e.jsx($e,{checked:Fe.includes(r.id),onCheckedChange:e=>{Ge(e?e=>[...e,r.id]:e=>e.filter(e=>e!==r.id))},onClick:e=>e.stopPropagation()})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"font-mono text-sm font-medium text-foreground",children:["#",r.display_order_id]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-foreground",children:r.customerName}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r.customerEmail}),r.customerPhone&&e.jsx("div",{className:"text-xs text-muted-foreground",children:r.customerPhone})]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.items.length," item",1!==r.items.length?"s":""]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"text-sm font-medium text-foreground",children:["₹",r.total.toLocaleString("en-IN")]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx(O,{className:Dt(r.status),children:r.status})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx(O,{className:It(r.payment_verified),children:r.payment_verified})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(r.createdAt).toLocaleDateString("en-IN")})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(f,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),dr(r.id)},children:e.jsx(U,{className:"w-4 h-4"})})})})]},r.id))})]})})}),e.jsx(R,{open:null!==cr,onOpenChange:()=>dr(null),children:e.jsx(B,{className:"max-w-7xl max-h-[95vh] overflow-y-auto bg-background border-border",children:cr&&(()=>{const r=Z.find(e=>e.id===cr);return r?e.jsxs(e.Fragment,{children:[e.jsxs(T,{className:"pb-4",children:[e.jsxs(M,{className:"text-2xl font-serif text-foreground text-center",children:["Order #",r.display_order_id]}),e.jsx(F,{className:"text-center text-muted-foreground text-sm",children:"Order Details & Management"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-accent rounded-lg p-4 border border-accent",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:`text-sm px-3 py-1 ${Dt(r.status)}`,children:r.status.toUpperCase()}),e.jsxs(O,{className:`text-sm px-3 py-1 ${It(r.payment_verified)}`,children:["PAYMENT: ",r.payment_verified]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-medium text-accent",children:["₹",r.total.toLocaleString("en-IN")]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(r.createdAt).toLocaleString("en-IN")})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:["NO"===r.payment_verified&&e.jsxs(f,{onClick:()=>kt(r.id),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),"Confirm Payment"]}),"NO"===r.payment_verified&&e.jsxs(f,{onClick:()=>(async(e,r)=>{const{error:t}=await h.from("orders").update({payment_verified:"REJECTED",payment_verified_at:(new Date).toISOString(),payment_verified_by:n?.id,payment_rejection_reason:r}).eq("id",e);t?x.error("Failed to reject payment"):(x.success("Payment rejected successfully"),at())})(r.id,"Payment verification failed"),variant:"destructive",size:"sm",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),"Reject Payment"]}),"placed"===r.status&&e.jsxs(f,{onClick:()=>St(r.id,"processing"),size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),"Start Processing"]}),"processing"===r.status&&e.jsxs(f,{onClick:()=>pr(r.id),size:"sm",className:"bg-purple-600 hover:bg-purple-700 text-white",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"Mark Shipped"]}),"shipped"===r.status&&e.jsxs(f,{onClick:()=>fr(r.id),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),"Mark Delivered"]}),e.jsx(f,{variant:"outline",onClick:()=>dr(null),size:"sm",children:"Close"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs($,{className:"bg-background border border-border",children:[e.jsx(Y,{className:"pb-3",children:e.jsxs(J,{className:"flex items-center gap-2 text-lg",children:[e.jsx(A,{className:"w-5 h-5 text-accent"}),"Customer Information"]})}),e.jsxs(K,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Name"}),e.jsx("div",{className:"text-sm font-medium",children:r.customerName})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Email"}),e.jsx("div",{className:"text-sm",children:r.customerEmail})]}),r.customerPhone&&e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Phone"}),e.jsx("div",{className:"text-sm",children:r.customerPhone})]})]})]}),e.jsxs($,{className:"bg-background border border-border",children:[e.jsx(Y,{className:"pb-3",children:e.jsxs(J,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ie,{className:"w-5 h-5 text-accent"}),"Shipping Address"]})}),e.jsxs(K,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Address"}),e.jsx("div",{className:"text-sm",children:r.shipping_address})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"City"}),e.jsx("div",{className:"text-sm",children:r.shipping_city})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"State"}),e.jsx("div",{className:"text-sm",children:r.shipping_state})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"ZIP"}),e.jsx("div",{className:"text-sm",children:r.shipping_zip_code})]})]}),r.tracking_number&&e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Tracking Number"}),e.jsx("div",{className:"text-sm font-mono bg-muted p-2 rounded",children:r.tracking_number})]}),r.shipping_company&&e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Shipping Company"}),e.jsx("div",{className:"text-sm font-medium",children:r.shipping_company})]}),r.tracking_id&&e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Tracking ID"}),e.jsx("div",{className:"text-sm font-mono bg-muted p-2 rounded",children:r.tracking_id})]}),r.tracking_link&&e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Tracking Link"}),e.jsxs("a",{href:r.tracking_link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 underline flex items-center gap-1",children:["Track Package ",e.jsx(q,{className:"w-3 h-3"})]})]}),r.shipped_at&&e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Shipped At"}),e.jsx("div",{className:"text-sm",children:new Date(r.shipped_at).toLocaleString("en-IN")})]}),r.delivered_at&&e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Delivered At"}),e.jsx("div",{className:"text-sm",children:new Date(r.delivered_at).toLocaleString("en-IN")})]}),r.estimated_delivery&&e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium text-muted-foreground",children:"Estimated Delivery"}),e.jsx("div",{className:"text-sm",children:new Date(r.estimated_delivery).toLocaleDateString("en-IN")})]})]})]})]}),e.jsxs($,{className:"bg-background border border-border",children:[e.jsx(Y,{className:"pb-3",children:e.jsxs(J,{className:"flex items-center gap-2 text-lg",children:[e.jsx(k,{className:"w-5 h-5 text-accent"}),"Order Items (",r.items.length,")"]})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-3",children:r.items.map(r=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg border border-border",children:[r.image&&e.jsx(se,{src:r.image,alt:r.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:r.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r.brand}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Quantity: ",r.quantity]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-medium",children:["₹",(r.price*r.quantity).toLocaleString("en-IN")]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["₹",r.price.toLocaleString("en-IN")," each"]})]})]},r.id))})})]}),e.jsxs($,{className:"bg-background border border-border",children:[e.jsx(Y,{className:"pb-3",children:e.jsxs(J,{className:"flex items-center gap-2 text-lg",children:[e.jsx(pe,{className:"w-5 h-5 text-accent"}),"Order Summary"]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["₹",r.subtotal.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Tax:"}),e.jsxs("span",{children:["₹",r.tax.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Shipping:"}),e.jsxs("span",{children:["₹",r.shipping.toLocaleString("en-IN")]})]}),r.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-₹",r.discount.toLocaleString("en-IN")]})]}),e.jsx(X,{className:"my-4"}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["₹",r.total.toLocaleString("en-IN")]})]})]})})]})]})]}):null})()})}),e.jsx(R,{open:null!==ur,onOpenChange:()=>pr(null),children:e.jsxs(B,{className:"max-w-2xl bg-background border-border",children:[e.jsxs(T,{children:[e.jsx(M,{className:"text-2xl font-serif text-foreground text-center",children:"Mark Order as Shipped"}),e.jsx(F,{className:"text-center text-muted-foreground",children:"Add shipping tracking details for the order"})]}),ur&&(()=>{const r=Z.find(e=>e.id===ur);return r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-accent rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-2",children:["Order #",r.display_order_id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Customer: ",r.customerName," | Total: ₹",r.total.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"shipping_company",children:"Shipping Company"}),e.jsxs(ee,{value:hr.shipping_company,onValueChange:e=>vr(r=>({...r,shipping_company:e})),children:[e.jsx(re,{children:e.jsx(te,{placeholder:"Select shipping company"})}),e.jsxs(ne,{children:[e.jsx(ae,{value:"Blue Dart",children:"Blue Dart"}),e.jsx(ae,{value:"DTDC",children:"DTDC"}),e.jsx(ae,{value:"FedEx",children:"FedEx"}),e.jsx(ae,{value:"DHL",children:"DHL"}),e.jsx(ae,{value:"India Post",children:"India Post"}),e.jsx(ae,{value:"Delhivery",children:"Delhivery"}),e.jsx(ae,{value:"Ecom Express",children:"Ecom Express"}),e.jsx(ae,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"shipping_method",children:"Shipping Method"}),e.jsxs(ee,{value:hr.shipping_method,onValueChange:e=>vr(r=>({...r,shipping_method:e})),children:[e.jsx(re,{children:e.jsx(te,{placeholder:"Select method"})}),e.jsxs(ne,{children:[e.jsx(ae,{value:"Standard",children:"Standard"}),e.jsx(ae,{value:"Express",children:"Express"}),e.jsx(ae,{value:"Overnight",children:"Overnight"}),e.jsx(ae,{value:"Same Day",children:"Same Day"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"tracking_id",children:"Tracking ID"}),e.jsx(j,{id:"tracking_id",value:hr.tracking_id,onChange:e=>vr(r=>({...r,tracking_id:e.target.value})),placeholder:"Enter tracking ID from shipping company"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"tracking_link",children:"Tracking Link"}),e.jsx(j,{id:"tracking_link",value:hr.tracking_link,onChange:e=>vr(r=>({...r,tracking_link:e.target.value})),placeholder:"https://example.com/track/TRACKING_ID"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"shipping_notes",children:"Shipping Notes"}),e.jsx(Ce,{id:"shipping_notes",value:hr.shipping_notes,onChange:e=>vr(r=>({...r,shipping_notes:e.target.value})),placeholder:"Additional notes about shipping...",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(f,{variant:"outline",onClick:()=>{pr(null),vr({shipping_company:"",tracking_id:"",tracking_link:"",shipping_method:"Standard",shipping_notes:""})},children:"Cancel"}),e.jsxs(f,{onClick:()=>{St(r.id,"shipped",n?.id,hr),pr(null),vr({shipping_company:"",tracking_id:"",tracking_link:"",shipping_method:"Standard",shipping_notes:""})},className:"bg-purple-600 hover:bg-purple-700 text-white",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Mark as Shipped"]})]})]}):null})()]})}),e.jsx(R,{open:null!==mr,onOpenChange:()=>fr(null),children:e.jsxs(B,{className:"max-w-2xl bg-background border-border",children:[e.jsxs(T,{children:[e.jsx(M,{className:"text-2xl font-serif text-foreground text-center",children:"Mark Order as Delivered"}),e.jsx(F,{className:"text-center text-muted-foreground",children:"Confirm delivery and add delivery details"})]}),mr&&(()=>{const r=Z.find(e=>e.id===mr);return r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-accent rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-2",children:["Order #",r.display_order_id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Customer: ",r.customerName," | Tracking: ",r.tracking_id||"N/A"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"delivery_notes",children:"Delivery Notes"}),e.jsx(Ce,{id:"delivery_notes",value:br.delivery_notes,onChange:e=>jr(r=>({...r,delivery_notes:e.target.value})),placeholder:"Delivery confirmation details, recipient info, etc...",rows:3})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"delivery_proof_url",children:"Delivery Proof URL"}),e.jsx(j,{id:"delivery_proof_url",value:br.delivery_proof_url,onChange:e=>jr(r=>({...r,delivery_proof_url:e.target.value})),placeholder:"https://example.com/delivery-proof.jpg"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Optional: Link to delivery photo, signature, or other proof"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(f,{variant:"outline",onClick:()=>{fr(null),jr({delivery_notes:"",delivery_proof_url:""})},children:"Cancel"}),e.jsxs(f,{onClick:()=>{St(r.id,"delivered",n?.id,br),fr(null),jr({delivery_notes:"",delivery_proof_url:""})},className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Mark as Delivered"]})]})]}):null})()]})})]}),e.jsxs(I,{value:"variants",className:"space-y-4",children:[e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Filter"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(j,{placeholder:"Search variants...",value:Lr,onChange:e=>Br(e.target.value),className:"pl-10 w-64"})]}),e.jsxs(f,{onClick:()=>{Yr(null),ft({product_id:"",variant_name:"",variant_description:"",price:0,sku:"",stock_quantity:0,is_active:!0,sort_order:0,images:[]}),zr(!0)},children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Add Variant"]})]})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-0",children:e.jsxs(De,{children:[e.jsx(Ie,{children:e.jsxs(ke,{children:[e.jsx(Ee,{className:"w-12",children:e.jsx($e,{checked:kr.length===_r.length&&_r.length>0,onCheckedChange:e=>{Er(e?_r.map(e=>e.id):[])}})}),e.jsx(Ee,{children:"Product"}),e.jsx(Ee,{children:"Variant Name"}),e.jsx(Ee,{children:"Price"}),e.jsx(Ee,{children:"Stock"}),e.jsx(Ee,{children:"Status"}),e.jsx(Ee,{className:"text-right",children:"Actions"})]})}),e.jsx(Se,{children:_r.filter(e=>""===Lr||e.variant_name.toLowerCase().includes(Lr.toLowerCase())||e.products?.name.toLowerCase().includes(Lr.toLowerCase())).map(r=>e.jsxs(ke,{children:[e.jsx(Pe,{children:e.jsx($e,{checked:kr.includes(r.id),onCheckedChange:e=>{Er(e?e=>[...e,r.id]:e=>e.filter(e=>e!==r.id))}})}),e.jsx(Pe,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[r.images&&r.images.length>0?e.jsx("img",{src:r.images[0].image_url,alt:r.variant_name,className:"w-10 h-10 object-cover rounded"}):e.jsx("div",{className:"w-10 h-10 bg-muted rounded flex items-center justify-center",children:e.jsx(k,{className:"w-4 h-4 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.products?.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.products?.brand})]})]})}),e.jsx(Pe,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.variant_name}),r.sku&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["SKU: ",r.sku]})]})}),e.jsx(Pe,{children:V(r.price)}),e.jsx(Pe,{children:r.stock_quantity||0}),e.jsx(Pe,{children:e.jsx(O,{variant:r.is_active?"default":"secondary",children:r.is_active?"Active":"Inactive"})}),e.jsx(Pe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>{Yr(r),ft({product_id:r.product_id,variant_name:r.variant_name,variant_description:r.variant_description||"",price:r.price,sku:r.sku||"",stock_quantity:r.stock_quantity||0,is_active:r.is_active,sort_order:r.sort_order,images:r.images?.map(e=>e.image_url)||[]}),zr(!0)},children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>{window.confirm(`Are you sure you want to delete "${r.variant_name}"?`)&&(async e=>{try{const{error:r}=await h.from("product_variants").delete().eq("id",e);if(r)throw r;x.success("Variant deleted successfully"),lt()}catch(r){console.error("Error deleting variant:",r),x.error("Failed to delete variant")}})(r.id)},children:e.jsx(ce,{className:"w-4 h-4"})})]})})]},r.id))})]})})})]}),e.jsxs(I,{value:"combos",className:"space-y-4",children:[e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Filter"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(j,{placeholder:"Search combos...",value:Tr,onChange:e=>Mr(e.target.value),className:"pl-10 w-64"})]}),e.jsxs(f,{onClick:()=>{Kr(null),xt({name:"",description:"",combo_price:0,savings_amount:0,is_active:!0,sort_order:0,combo_items:[]}),Vr(!0)},children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Add Combo"]})]})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-0",children:e.jsxs(De,{children:[e.jsx(Ie,{children:e.jsxs(ke,{children:[e.jsx(Ee,{className:"w-12",children:e.jsx($e,{checked:Pr.length===Cr.length&&Cr.length>0,onCheckedChange:e=>{Ar(e?Cr.map(e=>e.id):[])}})}),e.jsx(Ee,{children:"Combo Name"}),e.jsx(Ee,{children:"Items"}),e.jsx(Ee,{children:"Combo Price"}),e.jsx(Ee,{children:"Savings"}),e.jsx(Ee,{children:"Status"}),e.jsx(Ee,{className:"text-right",children:"Actions"})]})}),e.jsx(Se,{children:Cr.filter(e=>""===Tr||e.name.toLowerCase().includes(Tr.toLowerCase())).map(r=>e.jsxs(ke,{children:[e.jsx(Pe,{children:e.jsx($e,{checked:Pr.includes(r.id),onCheckedChange:e=>{Ar(e?e=>[...e,r.id]:e=>e.filter(e=>e!==r.id))}})}),e.jsx(Pe,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]})}),e.jsx(Pe,{children:e.jsxs("div",{className:"space-y-1",children:[(r.combo_items||r.items)?.slice(0,2).map((r,t)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:r.products?.name}),r.product_variants&&e.jsxs("span",{className:"text-muted-foreground",children:[" (",r.product_variants.variant_name,")"]}),e.jsxs("span",{className:"text-muted-foreground",children:[" x",r.quantity]})]},t)),(r.combo_items||r.items)&&(r.combo_items||r.items).length>2&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",(r.combo_items||r.items).length-2," more items"]})]})}),e.jsx(Pe,{children:V(r.combo_price)}),e.jsx(Pe,{children:e.jsx("span",{className:"text-green-600 font-medium",children:V(r.savings_amount||r.original_price-r.combo_price)})}),e.jsx(Pe,{children:e.jsx(O,{variant:r.is_active?"default":"secondary",children:r.is_active?"Active":"Inactive"})}),e.jsx(Pe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>{Kr(r),xt({name:r.name,description:r.description||"",combo_price:r.combo_price,savings_amount:r.savings_amount||r.original_price-r.combo_price,is_active:r.is_active,sort_order:r.sort_order||0,combo_items:(r.combo_items||r.items)?.map(e=>({product_id:e.product_id,variant_id:e.variant_id,quantity:e.quantity}))||[]}),Vr(!0)},children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>{window.confirm(`Are you sure you want to delete "${r.name}"?`)&&(async e=>{try{const{error:r}=await h.from("product_combos").delete().eq("id",e);if(r)throw r;x.success("Combo deleted successfully"),ct()}catch(r){console.error("Error deleting combo:",r),x.error("Failed to delete combo")}})(r.id)},children:e.jsx(ce,{className:"w-4 h-4"})})]})})]},r.id))})]})})})]}),e.jsxs(I,{value:"discounts",className:"space-y-4",children:[e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Filter"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(j,{placeholder:"Search discounts...",value:Fr,onChange:e=>Gr(e.target.value),className:"pl-10 w-64"})]}),e.jsxs(f,{onClick:()=>{Qr(null),vt({discount_name:"",discount_code:"",discount_type:"percentage",discount_value:0,minimum_cart_value:0,maximum_discount_amount:0,usage_limit:0,usage_count:0,valid_from:"",valid_until:"",is_active:!0,applicable_products:[],applicable_variants:[],applicable_combos:[]}),Hr(!0)},children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Add Discount"]})]})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-0",children:e.jsxs(De,{children:[e.jsx(Ie,{children:e.jsxs(ke,{children:[e.jsx(Ee,{className:"w-12",children:e.jsx($e,{checked:Or.length===Ir.length&&Ir.length>0,onCheckedChange:e=>{Rr(e?Ir.map(e=>e.id):[])}})}),e.jsx(Ee,{children:"Discount Name"}),e.jsx(Ee,{children:"Code"}),e.jsx(Ee,{children:"Type"}),e.jsx(Ee,{children:"Value"}),e.jsx(Ee,{children:"Usage"}),e.jsx(Ee,{children:"Status"}),e.jsx(Ee,{className:"text-right",children:"Actions"})]})}),e.jsx(Se,{children:Ir.filter(e=>""===Fr||(e.name||e.discount_name||"").toLowerCase().includes(Fr.toLowerCase())||(e.code||e.discount_code||"").toLowerCase().includes(Fr.toLowerCase())).map(r=>e.jsxs(ke,{children:[e.jsx(Pe,{children:e.jsx($e,{checked:Or.includes(r.id),onCheckedChange:e=>{Rr(e?e=>[...e,r.id]:e=>e.filter(e=>e!==r.id))}})}),e.jsx(Pe,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.name||r.discount_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(r.start_date||r.valid_from||"").toLocaleDateString()," - ",new Date(r.end_date||r.valid_until||"").toLocaleDateString()]})]})}),e.jsx(Pe,{children:e.jsx(O,{variant:"outline",children:r.code||r.discount_code})}),e.jsx(Pe,{children:e.jsx(O,{variant:"secondary",children:(r.type||r.discount_type||"").replace("_"," ")})}),e.jsx(Pe,{children:"percentage"===(r.type||r.discount_type)?`${r.value||r.discount_value}%`:V(r.value||r.discount_value||0)}),e.jsx(Pe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{children:[r.usage_count," / ",r.usage_limit||"∞"]}),(r.min_cart_value||r.minimum_cart_value)&&e.jsxs("p",{className:"text-muted-foreground",children:["Min: ",V(r.min_cart_value||r.minimum_cart_value||0)]})]})}),e.jsx(Pe,{children:e.jsx(O,{variant:r.is_active?"default":"secondary",children:r.is_active?"Active":"Inactive"})}),e.jsx(Pe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>{Qr(r),vt({discount_name:r.name||r.discount_name||"",discount_code:r.code||r.discount_code||"",discount_type:r.type||r.discount_type||"percentage",discount_value:r.value||r.discount_value||0,minimum_cart_value:r.min_cart_value||r.minimum_cart_value||0,maximum_discount_amount:r.max_discount_amount||r.maximum_discount_amount||0,usage_limit:r.usage_limit||0,usage_count:r.usage_count||0,valid_from:r.start_date||r.valid_from||"",valid_until:r.end_date||r.valid_until||"",is_active:r.is_active,applicable_products:r.product_ids||r.applicable_products||[],applicable_variants:r.variant_ids||r.applicable_variants||[],applicable_combos:r.combo_ids||r.applicable_combos||[]}),Hr(!0)},children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>{window.confirm(`Are you sure you want to delete "${r.name||r.discount_name}"?`)&&(async e=>{try{const{error:r}=await h.from("discounts").delete().eq("id",e);if(r)throw r;x.success("Discount deleted successfully"),dt()}catch(r){console.error("Error deleting discount:",r),x.error("Failed to delete discount")}})(r.id)},children:e.jsx(ce,{className:"w-4 h-4"})})]})})]},r.id))})]})})})]}),e.jsxs(I,{value:"categories",className:"space-y-4",children:[e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx(j,{placeholder:"Search categories...",value:rr,onChange:e=>tr(e.target.value),className:"w-64"})}),e.jsxs(R,{open:u,onOpenChange:p,children:[e.jsx(L,{asChild:!0,children:e.jsxs(f,{className:"bg-accent text-accent-foreground",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Add Category"]})}),e.jsxs(B,{className:"bg-background border border-border max-w-lg",children:[e.jsxs(T,{children:[e.jsx(M,{className:"text-2xl font-serif text-center text-foreground",children:m?"Edit Category":"Add New Category"}),e.jsxs(F,{className:"text-center text-muted-foreground",children:["Fill in the details below to ",m?"update the":"add a new"," category."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Category Name"}),e.jsx(j,{value:bt.name,onChange:e=>{const r=e.target.value,t=r.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");jt(e=>({...e,name:r,slug:t}))},className:"bg-input-background border-border"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"URL Slug"}),e.jsx(j,{value:bt.slug,onChange:e=>jt(r=>({...r,slug:e.target.value})),className:"bg-input-background border-border"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Description"}),e.jsx(Ce,{value:bt.description,onChange:e=>jt(r=>({...r,description:e.target.value})),className:"bg-input-background border-border",rows:3})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Image"}),e.jsx(Ye,{imageUrl:bt.image,onImageUrlChange:e=>jt(r=>({...r,image:e||""}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Image Alt Text"}),e.jsx(j,{value:bt.image_alt_text,onChange:e=>jt(r=>({...r,image_alt_text:e.target.value})),className:"bg-input-background border-border"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Homepage Sections"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Le.map(r=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{id:`section-${r.id}`,checked:bt.section_ids.includes(r.id),onCheckedChange:e=>{const t=r.id;jt(r=>{const n=e?[...r.section_ids,t]:r.section_ids.filter(e=>e!==t);return{...r,section_ids:n}})}}),e.jsx(b,{htmlFor:`section-${r.id}`,children:r.title})]},r.id))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Products in Category (Drag to Reorder)"}),e.jsx(Is,{onDragEnd:e=>{if(!e.destination)return;const r=Array.from(Te),[t]=r.splice(e.source.index,1);r.splice(e.destination.index,0,t);const n=r.map((e,r)=>({...e,order:r}));Me(n)},children:e.jsx(po,{droppableId:"products-in-category",children:r=>e.jsxs("div",{...r.droppableProps,ref:r.innerRef,className:"space-y-2 mt-2",children:[Te.map((r,t)=>e.jsx(oo,{draggableId:r.id,index:t,children:t=>e.jsxs("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,className:"flex items-center space-x-3 p-2 border border-border rounded-md bg-background",children:[e.jsx(se,{src:r.gallery_images[0],alt:r.name,className:"w-8 h-8 object-cover rounded-sm"}),e.jsx("span",{className:"flex-1 text-foreground",children:r.name}),e.jsxs(O,{variant:"secondary",className:"text-xs",children:["Order: ",r.order]})]})},r.id)),r.placeholder]})})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(f,{variant:"outline",onClick:()=>{p(!1),g(null),jt({name:"",slug:"",description:"",image:"",image_alt_text:"",section_ids:[]}),Me([])},className:"flex-1",children:"Cancel"}),e.jsx(f,{onClick:async()=>{let e=m?.id;if(m){const{data:e,error:r}=await h.from("categories").update({name:bt.name,description:bt.description,image:bt.image}).eq("id",m.id).select();if(r)return void x.error("Failed to update category")}else{const{data:r,error:t}=await h.from("categories").insert([{name:bt.name,slug:bt.slug,description:bt.description,image:bt.image,image_alt_text:bt.image_alt_text}]).select();if(t||!r)return void x.error("Failed to add category");e=r[0].id}if(!e)return;const{error:r}=await h.from("homepage_section_categories").delete().eq("category_id",e);if(r)x.error("Failed to update homepage sections");else{if(bt.section_ids.length>0){const{error:r}=await h.from("homepage_section_categories").insert(bt.section_ids.map(r=>({category_id:e,section_id:r})));if(r)return void x.error("Failed to update homepage sections")}if(Te.length>0){const r=Te.map((r,t)=>({product_id:r.id,category_id:e,order:t})),{error:t}=await h.from("product_categories").upsert(r,{onConflict:"product_id, category_id"});if(t)return x.error("Failed to update product order in category"),void console.error("Update order error:",t)}x.success(`Category ${m?"updated":"added"} successfully`),st(),p(!1),g(null),jt({name:"",slug:"",description:"",image:"",image_alt_text:"",section_ids:[]}),Me([])}},className:"flex-1 bg-accent text-accent-foreground",children:m?"Update Category":"Add Category"})]})]})]})]})})}),We.length>0&&e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[We.length," categor",We.length>1?"ies":"y"," selected"]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>He([]),children:"Clear Selection"})]})})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-0",children:e.jsxs(De,{className:"w-full",children:[e.jsx(Ie,{children:e.jsxs(ke,{className:"border-b border-border",children:[e.jsx(Ee,{className:"w-12 px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:e.jsx($e,{checked:We.length===Ot.length&&Ot.length>0,onCheckedChange:e=>{He(e?Ot.map(e=>e.id):[])}})}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Category"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Description"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Slug"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Actions"})]})}),e.jsx(Se,{children:Ot.map(r=>e.jsxs(ke,{className:"border-b border-border hover:bg-muted transition-colors cursor-pointer",onClick:()=>{g(r),p(!0)},children:[e.jsx(Pe,{className:"px-4 py-3",children:e.jsx($e,{checked:We.includes(r.id),onCheckedChange:e=>{He(e?e=>[...e,r.id]:e=>e.filter(e=>e!==r.id))},onClick:e=>e.stopPropagation()})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 overflow-hidden",children:e.jsx(se,{src:r.image,alt:r.name,className:"w-full h-full object-cover"})}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-foreground",children:r.name})})]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2 max-w-xs",children:r.description})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:r.slug})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:"outline",onClick:async e=>{e.stopPropagation(),g(r);const{data:t,error:n}=await h.from("homepage_section_categories").select("section_id").eq("category_id",r.id);if(n)return void x.error("Failed to fetch category sections");const{data:a,error:i}=await h.from("categories").select("\n                                    id,\n                                    products:product_categories(\n                                      order,\n                                      product_id,\n                                      products (\n                                        id,\n                                        name,\n                                        slug,\n                                        brand,\n                                        price,\n                                        gallery_images\n                                      )\n                                    )\n                                  ").eq("id",r.id).single();if(i)return x.error("Failed to fetch products for category"),void console.error("Fetch products for category error:",i);const s=a.products.sort((e,r)=>e.order-r.order).map(e=>({id:e.products.id,name:e.products.name,slug:e.products.slug,brand:e.products.brand,price:e.products.price,gallery_images:e.products.gallery_images,order:e.order}));Me(s),jt({name:r.name,slug:r.slug,description:r.description,image:r.image,image_alt_text:r.image_alt_text,section_ids:t.map(e=>e.section_id)}),p(!0)},children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx(f,{size:"sm",variant:"outline",onClick:async e=>{e.stopPropagation();const{error:t}=await h.from("categories").delete().eq("id",r.id);t?x.error("Failed to delete category"):(x.success("Category deleted successfully"),st())},className:"text-destructive hover:text-destructive",children:e.jsx(ce,{className:"w-4 h-4"})})]})})]},r.id))})]})})})]}),e.jsxs(I,{value:"customers",className:"space-y-4",children:[e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(j,{placeholder:"Search customers by name or email...",value:Xe,onChange:e=>Qe(e.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ee,{children:[e.jsx(re,{className:"w-48 bg-background border border-border",children:e.jsx(te,{placeholder:"Customer Status"})}),e.jsxs(ne,{className:"bg-background border border-border z-50",children:[e.jsx(ae,{value:"all",children:"All Customers"}),e.jsx(ae,{value:"active",children:"Active"}),e.jsx(ae,{value:"inactive",children:"Inactive"}),e.jsx(ae,{value:"blocked",children:"Blocked"})]})]}),e.jsxs(ee,{children:[e.jsx(re,{className:"w-48 bg-background border border-border",children:e.jsx(te,{placeholder:"Sort By"})}),e.jsxs(ne,{className:"bg-background border border-border z-50",children:[e.jsx(ae,{value:"name",children:"Name"}),e.jsx(ae,{value:"total_spent",children:"Total Spent"}),e.jsx(ae,{value:"order_count",children:"Order Count"}),e.jsx(ae,{value:"last_order",children:"Last Order"}),e.jsx(ae,{value:"created_at",children:"Join Date"})]})]}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-serif font-medium text-foreground",children:_e.length})]}),e.jsx(we,{className:"w-8 h-8 text-accent"})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Customers"}),e.jsx("p",{className:"text-2xl font-serif font-medium text-foreground",children:_e.filter(e=>"active"===e.status).length})]}),e.jsx(P,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Order Value"}),e.jsxs("p",{className:"text-2xl font-serif font-medium text-foreground",children:["₹",_e.length>0?Math.round(_e.reduce((e,r)=>e+r.averageOrderValue,0)/_e.length).toLocaleString("en-IN"):"0"]})]}),e.jsx(pe,{className:"w-8 h-8 text-accent"})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-serif font-medium text-foreground",children:["₹",_e.reduce((e,r)=>e+r.totalSpent,0).toLocaleString("en-IN")]})]}),e.jsx(S,{className:"w-8 h-8 text-accent"})]})})})]}),Ue.length>0&&e.jsx($,{className:"bg-background border border-border bg-accent",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-accent"}),e.jsxs("span",{className:"font-medium",children:[Ue.length," customer",1!==Ue.length?"s":""," selected"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{onValueChange:e=>{"send_email"===e?x.info("Email functionality would be implemented here"):"export"===e?x.info("Export functionality would be implemented here"):"make_admin"===e&&x.info("Make admin functionality would be implemented here"),ze([])},children:[e.jsx(re,{className:"w-48 bg-background border border-border",children:e.jsx(te,{placeholder:"Bulk Actions"})}),e.jsxs(ne,{className:"bg-background border border-border z-50",children:[e.jsx(ae,{value:"send_email",children:"Send Email"}),e.jsx(ae,{value:"export",children:"Export Data"}),e.jsx(ae,{value:"make_admin",children:"Make Admin"})]})]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>ze([]),children:"Clear Selection"})]})]})})}),e.jsx($,{className:"bg-background border border-border",children:e.jsx(K,{className:"p-0",children:e.jsxs(De,{className:"w-full",children:[e.jsx(Ie,{children:e.jsxs(ke,{className:"border-b border-border",children:[e.jsx(Ee,{className:"w-12 px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:e.jsx($e,{checked:Ue.length===Pt.length&&Pt.length>0,onCheckedChange:e=>{ze(e?Pt.map(e=>e.id):[])}})}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Customer"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Contact"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Orders"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Total Spent"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Avg Order"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Last Order"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Status"}),e.jsx(Ee,{className:"px-4 py-3 text-left font-medium text-sm text-muted-foreground",children:"Actions"})]})}),e.jsx(Se,{children:Pt.map(r=>e.jsxs(ke,{className:"border-b border-border hover:bg-muted transition-colors cursor-pointer",onClick:()=>Nr(r.id),children:[e.jsx(Pe,{className:"px-4 py-3",children:e.jsx($e,{checked:Ue.includes(r.id),onCheckedChange:e=>{ze(e?e=>[...e,r.id]:e=>e.filter(e=>e!==r.id))},onClick:e=>e.stopPropagation()})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-accent rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-5 h-5 text-accent-foreground"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[r.name,r.is_admin&&e.jsx(O,{className:"bg-accent text-accent-foreground text-xs",children:"ADMIN"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Joined ",new Date(r.created_at).toLocaleDateString("en-IN")]})]})]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:r.email}),r.phone&&e.jsx("div",{className:"text-xs text-muted-foreground",children:r.phone})]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:r.orderCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"orders"})]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"font-medium",children:["₹",r.totalSpent.toLocaleString("en-IN")]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsxs("div",{className:"text-sm",children:["₹",r.averageOrderValue.toLocaleString("en-IN")]})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm",children:r.lastOrderDate?new Date(r.lastOrderDate).toLocaleDateString("en-IN"):"Never"})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx(O,{className:"active"===r.status?"bg-green-500 text-green-100 border-green-500":"inactive"===r.status?"bg-yellow-500 text-yellow-100 border-yellow-500":"bg-red-500 text-red-100 border-red-500",children:r.status})}),e.jsx(Pe,{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(f,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),Nr(r.id)},children:e.jsx(U,{className:"w-4 h-4"})})})})]},r.id))})]})})}),e.jsx(R,{open:null!==yr,onOpenChange:()=>Nr(null),children:e.jsx(B,{className:"max-w-6xl max-h-[95vh] overflow-y-auto bg-background border-border",children:yr&&(()=>{const r=_e.find(e=>e.id===yr);return r?e.jsxs(e.Fragment,{children:[e.jsxs(T,{className:"pb-6",children:[e.jsx(M,{className:"text-3xl font-serif text-foreground text-center",children:r.name}),e.jsx(F,{className:"text-center text-muted-foreground text-lg",children:"Complete customer profile and management"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-accent rounded-xl p-6 border border-accent/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-accent rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-8 h-8 text-accent"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-2xl font-serif",children:r.name}),r.is_admin&&e.jsx(O,{className:"bg-yellow-500/20 text-yellow-300 border-yellow-500/30 px-3 py-1",children:"ADMIN"})]}),e.jsx("div",{className:"text-muted-foreground",children:r.email}),r.phone&&e.jsx("div",{className:"text-muted-foreground",children:r.phone})]})]}),e.jsx("div",{className:"text-right",children:e.jsx(O,{className:"text-lg px-4 py-2 "+("active"===r.status?"bg-green-500/20 text-green-300 border-green-500/30":"inactive"===r.status?"bg-yellow-500/20 text-yellow-300 border-yellow-500/30":"bg-red-500/20 text-red-300 border-red-500/30"),children:r.status.toUpperCase()})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(f,{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2",children:[e.jsx(W,{className:"w-5 h-5 mr-2"}),"Send Email"]}),e.jsxs(f,{variant:"outline",className:"px-6 py-2",children:[e.jsx(je,{className:"w-5 h-5 mr-2"}),"Edit Profile"]}),e.jsxs(f,{variant:"destructive",className:"px-6 py-2",children:[e.jsx(de,{className:"w-5 h-5 mr-2"}),"Block Customer"]}),e.jsx(f,{variant:"outline",onClick:()=>Nr(null),className:"px-6 py-2",children:"Close"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsx($,{className:"bg-background border border-border text-center",children:e.jsxs(K,{className:"p-6",children:[e.jsx("div",{className:"text-3xl font-serif text-accent mb-2",children:r.orderCount}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Orders"})]})}),e.jsx($,{className:"bg-background border border-border text-center",children:e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"text-3xl font-serif text-accent mb-2",children:["₹",r.totalSpent.toLocaleString("en-IN")]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Spent"})]})}),e.jsx($,{className:"bg-background border border-border text-center",children:e.jsxs(K,{className:"p-6",children:[e.jsxs("div",{className:"text-3xl font-serif text-accent mb-2",children:["₹",r.averageOrderValue.toLocaleString("en-IN")]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Order Value"})]})}),e.jsx($,{className:"bg-background border border-border text-center",children:e.jsxs(K,{className:"p-6",children:[e.jsx("div",{className:"text-3xl font-serif text-accent mb-2",children:r.lastOrderDate?new Date(r.lastOrderDate).toLocaleDateString("en-IN"):"Never"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Order"})]})})]}),e.jsxs($,{className:"bg-background border border-border",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2 text-xl",children:[e.jsx(H,{className:"w-6 h-6 text-accent"}),"Customer Timeline"]})}),e.jsx(K,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-background rounded-lg border border-border",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-lg font-medium",children:"Account Created"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(r.created_at).toLocaleString("en-IN")})]})]}),r.firstOrderDate&&e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-background rounded-lg border border-border",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-lg font-medium",children:"First Order"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(r.firstOrderDate).toLocaleString("en-IN")})]})]}),r.lastOrderDate&&r.lastOrderDate!==r.firstOrderDate&&e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-background rounded-lg border border-border",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-lg font-medium",children:"Latest Order"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(r.lastOrderDate).toLocaleString("en-IN")})]})]})]})})]}),e.jsxs($,{className:"bg-background border border-border",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2 text-xl",children:[e.jsx(W,{className:"w-6 h-6 text-accent"}),"Contact Information"]})}),e.jsx(K,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm font-medium text-muted-foreground",children:"Email Address"}),e.jsx("div",{className:"text-lg",children:r.email})]}),r.phone&&e.jsxs("div",{children:[e.jsx(b,{className:"text-sm font-medium text-muted-foreground",children:"Phone Number"}),e.jsx("div",{className:"text-lg",children:r.phone})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-sm font-medium text-muted-foreground",children:"Account Status"}),e.jsx("div",{className:"text-lg capitalize",children:r.status})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-sm font-medium text-muted-foreground",children:"Member Since"}),e.jsx("div",{className:"text-lg",children:new Date(r.created_at).toLocaleDateString("en-IN")})]})]})})]})]})]}):null})()})})]}),e.jsx(I,{value:"settings",children:e.jsx(fo,{})})]}),e.jsx(R,{open:Ur,onOpenChange:zr,children:e.jsxs(B,{className:"max-w-2xl bg-background border-border",children:[e.jsxs(T,{children:[e.jsx(M,{className:"text-2xl font-serif text-foreground text-center",children:$r?"Edit Variant":"Add New Variant"}),e.jsx(F,{className:"text-center text-muted-foreground",children:$r?"Update variant details":"Create a new product variant"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Product"}),e.jsxs(ee,{value:mt.product_id,onValueChange:e=>ft(r=>({...r,product_id:e})),children:[e.jsx(re,{children:e.jsx(te,{placeholder:"Select product"})}),e.jsx(ne,{children:y.map(r=>e.jsxs(ae,{value:r.id,children:[r.name," - ",r.brand]},r.id))})]})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Variant Name"}),e.jsx(j,{value:mt.variant_name,onChange:e=>ft(r=>({...r,variant_name:e.target.value})),placeholder:"e.g., Packet, Carton, Half Carton"})]})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Description"}),e.jsx(Ce,{value:mt.variant_description,onChange:e=>ft(r=>({...r,variant_description:e.target.value})),placeholder:"Variant description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Price"}),e.jsx(j,{type:"number",value:mt.price,onChange:e=>ft(r=>({...r,price:parseFloat(e.target.value)||0})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"SKU"}),e.jsx(j,{value:mt.sku,onChange:e=>ft(r=>({...r,sku:e.target.value})),placeholder:"SKU code"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Stock Quantity"}),e.jsx(j,{type:"number",value:mt.stock_quantity,onChange:e=>ft(r=>({...r,stock_quantity:parseInt(e.target.value)||0})),placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Sort Order"}),e.jsx(j,{type:"number",value:mt.sort_order,onChange:e=>ft(r=>({...r,sort_order:parseInt(e.target.value)||0})),placeholder:"0"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{id:"variant-active",checked:mt.is_active,onCheckedChange:e=>ft(r=>({...r,is_active:!!e}))}),e.jsx(b,{htmlFor:"variant-active",children:"Active"})]})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Variant Images"}),e.jsx(mo,{imageUrls:mt.images,onImageUrlsChange:e=>ft(r=>({...r,images:e}))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[e.jsx(f,{variant:"outline",onClick:()=>zr(!1),children:"Cancel"}),e.jsx(f,{onClick:async()=>{try{if($r){const{error:e}=await h.from("product_variants").update({variant_name:mt.variant_name,variant_description:mt.variant_description,price:mt.price,sku:mt.sku,stock_quantity:mt.stock_quantity,is_active:mt.is_active,sort_order:mt.sort_order}).eq("id",$r.id);if(e)throw e;if(mt.images.length>0){await h.from("variant_images").delete().eq("variant_id",$r.id);const e=mt.images.map((e,r)=>({variant_id:$r.id,image_url:e,sort_order:r})),{error:r}=await h.from("variant_images").insert(e);if(r)throw r}x.success("Variant updated successfully")}else{const{data:e,error:r}=await h.from("product_variants").insert({product_id:mt.product_id,variant_name:mt.variant_name,variant_description:mt.variant_description,price:mt.price,sku:mt.sku,stock_quantity:mt.stock_quantity,is_active:mt.is_active,sort_order:mt.sort_order}).select().single();if(r)throw r;if(mt.images.length>0){const r=mt.images.map((r,t)=>({variant_id:e.id,image_url:r,sort_order:t})),{error:t}=await h.from("variant_images").insert(r);if(t)throw t}x.success("Variant created successfully")}zr(!1),lt()}catch(e){console.error("Error saving variant:",e),x.error("Failed to save variant")}},children:$r?"Update Variant":"Create Variant"})]})]})}),e.jsx(R,{open:qr,onOpenChange:Vr,children:e.jsxs(B,{className:"max-w-3xl bg-background border-border",children:[e.jsxs(T,{children:[e.jsx(M,{className:"text-2xl font-serif text-foreground text-center",children:Jr?"Edit Combo":"Add New Combo"}),e.jsx(F,{className:"text-center text-muted-foreground",children:Jr?"Update combo details":"Create a new product combo"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Combo Name"}),e.jsx(j,{value:gt.name,onChange:e=>xt(r=>({...r,name:e.target.value})),placeholder:"e.g., Marlboro + Gold Flake Special"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Sort Order"}),e.jsx(j,{type:"number",value:gt.sort_order,onChange:e=>xt(r=>({...r,sort_order:parseInt(e.target.value)||0})),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Description"}),e.jsx(Ce,{value:gt.description,onChange:e=>xt(r=>({...r,description:e.target.value})),placeholder:"Combo description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Combo Price"}),e.jsx(j,{type:"number",value:gt.combo_price,onChange:e=>xt(r=>({...r,combo_price:parseFloat(e.target.value)||0})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Savings Amount"}),e.jsx(j,{type:"number",value:gt.savings_amount,onChange:e=>xt(r=>({...r,savings_amount:parseFloat(e.target.value)||0})),placeholder:"0.00"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{id:"combo-active",checked:gt.is_active,onCheckedChange:e=>xt(r=>({...r,is_active:!!e}))}),e.jsx(b,{htmlFor:"combo-active",children:"Active"})]})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Combo Items"}),e.jsxs("div",{className:"space-y-3",children:[gt.combo_items.map((r,t)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-border rounded-lg",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(ee,{value:r.product_id,onValueChange:e=>{const r=[...gt.combo_items];r[t].product_id=e,xt(e=>({...e,combo_items:r}))},children:[e.jsx(re,{children:e.jsx(te,{placeholder:"Select product"})}),e.jsx(ne,{children:y.map(r=>e.jsxs(ae,{value:r.id,children:[r.name," - ",r.brand]},r.id))})]})}),e.jsx("div",{className:"w-24",children:e.jsx(j,{type:"number",value:r.quantity,onChange:e=>{const r=[...gt.combo_items];r[t].quantity=parseInt(e.target.value)||1,xt(e=>({...e,combo_items:r}))},placeholder:"Qty"})}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{const e=gt.combo_items.filter((e,r)=>r!==t);xt(r=>({...r,combo_items:e}))},children:e.jsx(ce,{className:"w-4 h-4"})})]},t)),e.jsxs(f,{variant:"outline",onClick:()=>{xt(e=>({...e,combo_items:[...e.combo_items,{product_id:"",quantity:1}]}))},children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Add Item"]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[e.jsx(f,{variant:"outline",onClick:()=>Vr(!1),children:"Cancel"}),e.jsx(f,{onClick:async()=>{try{if(Jr){const{error:e}=await h.from("product_combos").update({name:gt.name,description:gt.description,combo_price:gt.combo_price,savings_amount:gt.savings_amount,is_active:gt.is_active,sort_order:gt.sort_order}).eq("id",Jr.id);if(e)throw e;if(await h.from("combo_items").delete().eq("combo_id",Jr.id),gt.combo_items.length>0){const e=gt.combo_items.map(e=>({combo_id:Jr.id,product_id:e.product_id,variant_id:e.variant_id,quantity:e.quantity})),{error:r}=await h.from("combo_items").insert(e);if(r)throw r}x.success("Combo updated successfully")}else{const{data:e,error:r}=await h.from("product_combos").insert({name:gt.name,description:gt.description,combo_price:gt.combo_price,savings_amount:gt.savings_amount,is_active:gt.is_active,sort_order:gt.sort_order}).select().single();if(r)throw r;if(gt.combo_items.length>0){const r=gt.combo_items.map(r=>({combo_id:e.id,product_id:r.product_id,variant_id:r.variant_id,quantity:r.quantity})),{error:t}=await h.from("combo_items").insert(r);if(t)throw t}x.success("Combo created successfully")}Vr(!1),ct()}catch(e){console.error("Error saving combo:",e),x.error("Failed to save combo")}},children:Jr?"Update Combo":"Create Combo"})]})]})}),e.jsx(R,{open:Wr,onOpenChange:Hr,children:e.jsxs(B,{className:"max-w-2xl bg-background border-border",children:[e.jsxs(T,{children:[e.jsx(M,{className:"text-2xl font-serif text-foreground text-center",children:Xr?"Edit Discount":"Add New Discount"}),e.jsx(F,{className:"text-center text-muted-foreground",children:Xr?"Update discount details":"Create a new discount"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Discount Name"}),e.jsx(j,{value:ht.discount_name,onChange:e=>vt(r=>({...r,discount_name:e.target.value})),placeholder:"e.g., Summer Sale 20%"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Coupon Code"}),e.jsx(j,{value:ht.discount_code,onChange:e=>vt(r=>({...r,discount_code:e.target.value})),placeholder:"e.g., SUMMER20"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Discount Type"}),e.jsxs(ee,{value:ht.discount_type,onValueChange:e=>vt(r=>({...r,discount_type:e})),children:[e.jsx(re,{children:e.jsx(te,{})}),e.jsxs(ne,{children:[e.jsx(ae,{value:"percentage",children:"Percentage"}),e.jsx(ae,{value:"fixed_amount",children:"Fixed Amount"}),e.jsx(ae,{value:"cart_value",children:"Cart Value"})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Discount Value"}),e.jsx(j,{type:"number",value:ht.discount_value,onChange:e=>vt(r=>({...r,discount_value:parseFloat(e.target.value)||0})),placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Minimum Cart Value"}),e.jsx(j,{type:"number",value:ht.minimum_cart_value,onChange:e=>vt(r=>({...r,minimum_cart_value:parseFloat(e.target.value)||0})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Maximum Discount Amount"}),e.jsx(j,{type:"number",value:ht.maximum_discount_amount,onChange:e=>vt(r=>({...r,maximum_discount_amount:parseFloat(e.target.value)||0})),placeholder:"0.00"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Usage Limit"}),e.jsx(j,{type:"number",value:ht.usage_limit,onChange:e=>vt(r=>({...r,usage_limit:parseInt(e.target.value)||0})),placeholder:"0 (unlimited)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{id:"discount-active",checked:ht.is_active,onCheckedChange:e=>vt(r=>({...r,is_active:!!e}))}),e.jsx(b,{htmlFor:"discount-active",children:"Active"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Valid From"}),e.jsx(j,{type:"datetime-local",value:ht.valid_from,onChange:e=>vt(r=>({...r,valid_from:e.target.value}))})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Valid Until"}),e.jsx(j,{type:"datetime-local",value:ht.valid_until,onChange:e=>vt(r=>({...r,valid_until:e.target.value}))})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[e.jsx(f,{variant:"outline",onClick:()=>Hr(!1),children:"Cancel"}),e.jsx(f,{onClick:async()=>{try{if(Xr){const{error:e}=await h.from("discounts").update({discount_name:ht.discount_name,discount_code:ht.discount_code,discount_type:ht.discount_type,discount_value:ht.discount_value,minimum_cart_value:ht.minimum_cart_value,maximum_discount_amount:ht.maximum_discount_amount,usage_limit:ht.usage_limit,valid_from:ht.valid_from,valid_until:ht.valid_until,is_active:ht.is_active,applicable_products:ht.applicable_products,applicable_variants:ht.applicable_variants,applicable_combos:ht.applicable_combos}).eq("id",Xr.id);if(e)throw e;x.success("Discount updated successfully")}else{const{error:e}=await h.from("discounts").insert({discount_name:ht.discount_name,discount_code:ht.discount_code,discount_type:ht.discount_type,discount_value:ht.discount_value,minimum_cart_value:ht.minimum_cart_value,maximum_discount_amount:ht.maximum_discount_amount,usage_limit:ht.usage_limit,valid_from:ht.valid_from,valid_until:ht.valid_until,is_active:ht.is_active,applicable_products:ht.applicable_products,applicable_variants:ht.applicable_variants,applicable_combos:ht.applicable_combos});if(e)throw e;x.success("Discount created successfully")}Hr(!1),dt()}catch(e){console.error("Error saving discount:",e),x.error("Failed to save discount")}},children:Xr?"Update Discount":"Create Discount"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx($,{className:"bg-background border border-border max-w-md",children:e.jsxs(K,{className:"text-center p-8",children:[e.jsx(_,{className:"w-12 h-12 text-accent mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-serif text-foreground mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"You need admin privileges to access this dashboard."}),e.jsx(f,{onClick:()=>t("/"),children:"Back to Store"})]})})})}po.defaultProps=uo;export{go as AdminDashboard};
